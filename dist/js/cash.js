"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.cash=function(){var n,o=document,u=window,t=Array.prototype,s=t.slice,r=t.filter,i=t.push,e=function(){},a=function(t){return(void 0===t?"undefined":_typeof(t))===(void 0===e?"undefined":_typeof(e))&&t.call},f=function(t){return(void 0===t?"undefined":_typeof(t))===_typeof("")},c=/^#[\w-]*$/,h=/^\.[\w-]*$/,l=/<.+>/,d=/^\w+$/;function p(t,e){e=e||o;var n=h.test(t)?e.getElementsByClassName(t.slice(1)):d.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t);return n}function v(t){if(!n){var e=(n=o.implementation.createHTMLDocument(null)).createElement("base");e.href=o.location.href,n.head.appendChild(e)}return n.body.innerHTML=t,n.body.childNodes}function m(t){"loading"!==o.readyState?t():o.addEventListener("DOMContentLoaded",t)}function g(t,e){if(!t)return this;if(t.cash&&t!==u)return t;var n,r=t,i=0;if(f(t))r=c.test(t)?o.getElementById(t.slice(1)):l.test(t)?v(t):p(t,e);else if(a(t))return m(t),this;if(!r)return this;if(r.nodeType||r===u)this[0]=r,this.length=1;else for(n=this.length=r.length;i<n;i++)this[i]=r[i];return this}function y(t,e){return new g(t,e)}var b=y.fn=y.prototype=g.prototype={cash:!0,length:0,push:i,splice:t.splice,map:t.map,init:g};function x(t,e){for(var n=t.length,r=0;r<n&&!1!==e.call(t[r],t[r],r,t);r++);}function N(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function L(e){return f(e)?N:e.cash?function(t){return e.is(t)}:function(t,e){return t===e}}function C(t){return y(s.call(t).filter(function(t,e,n){return n.indexOf(t)===e}))}Object.defineProperty(b,"constructor",{value:y}),y.parseHTML=v,y.noop=e,y.isFunction=a,y.isString=f,y.extend=b.extend=function(t){t=t||{};var e=s.call(arguments),n=e.length,r=1;for(1===e.length&&(t=this,r=0);r<n;r++)if(e[r])for(var i in e[r])e[r].hasOwnProperty(i)&&(t[i]=e[r][i]);return t},y.extend({merge:function(t,e){for(var n=+e.length,r=t.length,i=0;i<n;r++,i++)t[r]=e[i];return t.length=r,t},each:x,matches:N,unique:C,isArray:Array.isArray,isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}});var E=y.uid="_cash"+Date.now();function w(t){return t[E]=t[E]||{}}function S(t,e,n){return w(t)[e]=n}function A(t,e){var n=w(t);return void 0===n[e]&&(n[e]=t.dataset?t.dataset[e]:y(t).attr("data-"+e)),n[e]}b.extend({data:function(e,n){if(f(e))return void 0===n?A(this[0],e):this.each(function(t){return S(t,e,n)});for(var t in e)this.data(t,e[t]);return this},removeData:function(i){return this.each(function(t){return n=i,void((r=w(e=t))?delete r[n]:e.dataset?delete e.dataset[n]:y(e).removeAttr("data-"+name));var e,n,r})}});var T=/\S+/g;function M(t){return f(t)&&t.match(T)}function B(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function _(t,e,n){t.classList?t.classList.add(e):n.indexOf(" "+e+" ")&&(t.className+=" "+e)}function H(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(e,"")}b.extend({addClass:function(t){var r=M(t);return r?this.each(function(e){var n=" "+e.className+" ";x(r,function(t){_(e,t,n)})}):this},attr:function(e,n){if(e){if(f(e))return void 0===n?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each(function(t){t.setAttribute?t.setAttribute(e,n):t[e]=n});for(var t in e)this.attr(t,e[t]);return this}},hasClass:function(t){var e=!1,n=M(t);return n&&n.length&&this.each(function(t){return!(e=B(t,n[0]))}),e},prop:function(e,n){if(f(e))return void 0===n?this[0][e]:this.each(function(t){t[e]=n});for(var t in e)this.prop(t,e[t]);return this},removeAttr:function(e){return this.each(function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]})},removeClass:function(t){if(!arguments.length)return this.attr("class","");var n=M(t);return n?this.each(function(e){x(n,function(t){H(e,t)})}):this},removeProp:function(e){return this.each(function(t){delete t[e]})},toggleClass:function(t,e){if(void 0!==e)return this[e?"addClass":"removeClass"](t);var r=M(t);return r?this.each(function(e){var n=" "+e.className+" ";x(r,function(t){B(e,t)?H(e,t):_(e,t,n)})}):this}}),b.extend({add:function(t,e){return C(y.merge(this,y(t,e)))},each:function(t){return x(this,t),this},eq:function(t){return y(this.get(t))},filter:function(e){if(!e)return this;var n=a(e)?e:L(e);return y(r.call(this,function(t){return n(t,e)}))},first:function(){return this.eq(0)},get:function(t){return void 0===t?s.call(this):t<0?this[t+this.length]:this[t]},index:function(t){var e=t?y(t)[0]:this[0],n=t?this:y(e).parent().children();return s.call(n).indexOf(e)},last:function(){return this.eq(-1)}});var O,k,I,P,R,q,D=(R=/(?:^\w|[A-Z]|\b\w)/g,q=/[\s-_]+/g,function(t){return t.replace(R,function(t,e){return t[0===e?"toLowerCase":"toUpperCase"]()}).replace(q,"")}),F=(O={},k=document,I=k.createElement("div"),P=I.style,function(e){if(e=D(e),O[e])return O[e];var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+["webkit","moz","ms","o"].join(t+" ")+t).split(" ");return x(n,function(t){if(t in P)return O[t]=e=O[e]=t,!1}),O[e]});function U(t,e){return parseInt(u.getComputedStyle(t[0],null)[e],10)||0}function $(e,n,t){var r,i=A(e,"_cashEvents"),o=i&&i[n];o&&(t?(e.removeEventListener(n,t),0<=(r=o.indexOf(t))&&o.splice(r,1)):(x(o,function(t){e.removeEventListener(n,t)}),o=[]))}function j(t,e){return"&"+encodeURIComponent(t)+"="+encodeURIComponent(e).replace(/%20/g,"+")}function z(t){var e,n,r,i=t.type;if(!i)return null;switch(i.toLowerCase()){case"select-one":return 0<=(r=(n=t).selectedIndex)?n.options[r].value:null;case"select-multiple":return e=[],x(t.options,function(t){t.selected&&e.push(t.value)}),e.length?e:null;case"radio":case"checkbox":return t.checked?t.value:null;default:return t.value?t.value:null}}function W(e,n,r){var t=f(n);t||!n.length?x(e,t?function(t){return t.insertAdjacentHTML(r?"afterbegin":"beforeend",n)}:function(t,e){return function(t,e,n){if(n){var r=t.childNodes[0];t.insertBefore(e,r)}else t.appendChild(e)}(t,0===e?n:n.cloneNode(!0),r)}):x(n,function(t){return W(e,t,r)})}y.prefixedProp=F,y.camelCase=D,b.extend({css:function(e,n){if(f(e))return e=F(e),1<arguments.length?this.each(function(t){return t.style[e]=n}):u.getComputedStyle(this[0])[e];for(var t in e)this.css(t,e[t]);return this}}),x(["Width","Height"],function(e){var t=e.toLowerCase();b[t]=function(){return this[0].getBoundingClientRect()[t]},b["inner"+e]=function(){return this[0]["client"+e]},b["outer"+e]=function(t){return this[0]["offset"+e]+(t?U(this,"margin"+("Width"===e?"Left":"Top"))+U(this,"margin"+("Width"===e?"Right":"Bottom")):0)}}),b.extend({off:function(e,n){return this.each(function(t){return $(t,e,n)})},on:function(u,n,s,c){var r;if(!f(u)){for(var t in u)this.on(t,n,u[t]);return this}return a(n)&&(s=n,n=null),"ready"===u?(m(s),this):(n&&(r=s,s=function(t){for(var e=t.target;!N(e,n);){if(e===this||null===e)return e=!1;e=e.parentNode}e&&r.call(e,t)}),this.each(function(t){var e,n,r,i,o=s;c&&(o=function(){s.apply(this,arguments),$(t,u,o)}),n=u,r=o,(i=A(e=t,"_cashEvents")||S(e,"_cashEvents",{}))[n]=i[n]||[],i[n].push(r),e.addEventListener(n,r)}))},one:function(t,e,n){return this.on(t,e,n,!0)},ready:m,trigger:function(t,e){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!1),n=this.extend(n,e),this.each(function(t){return t.dispatchEvent(n)})}}}),b.extend({serialize:function(){var i="";return x(this[0].elements||this,function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var e=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var n=z(t);null!==n&&x(n,function(t){i+=j(e,t)});break;default:var r=z(t);null!==r&&(i+=j(e,r))}}}),i.substr(1)},val:function(e){return void 0===e?z(this[0]):this.each(function(t){return t.value=e})}}),b.extend({after:function(t){return y(t).insertAfter(this),this},append:function(t){return W(this,t),this},appendTo:function(t){return W(y(t),this),this},before:function(t){return y(t).insertBefore(this),this},clone:function(){return y(this.map(function(t){return t.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(t){if(void 0===t)return this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each(function(t){return t.innerHTML=e})},insertAfter:function(t){var i=this;return y(t).each(function(t,e){var n=t.parentNode,r=t.nextSibling;i.each(function(t){n.insertBefore(0===e?t:t.cloneNode(!0),r)})}),this},insertBefore:function(t){var i=this;return y(t).each(function(e,n){var r=e.parentNode;i.each(function(t){r.insertBefore(0===n?t:t.cloneNode(!0),e)})}),this},prepend:function(t){return W(this,t,!0),this},prependTo:function(t){return W(y(t),this,!0),this},remove:function(){return this.each(function(t){if(t.parentNode)return t.parentNode.removeChild(t)})},text:function(e){return void 0===e?this[0].textContent:this.each(function(t){return t.textContent=e})}});var X=o.documentElement;return b.extend({position:function(){var t=this[0];return{left:t.offsetLeft,top:t.offsetTop}},offset:function(){var t=this[0].getBoundingClientRect();return{top:t.top+u.pageYOffset-X.clientTop,left:t.left+u.pageXOffset-X.clientLeft}},offsetParent:function(){return y(this[0].offsetParent)}}),b.extend({children:function(e){var n=[];return this.each(function(t){i.apply(n,t.children)}),n=C(n),e?n.filter(function(t){return N(t,e)}):n},closest:function(t){return!t||this.length<1?y():this.is(t)?this.filter(t):this.parent().closest(t)},is:function(e){if(!e)return!1;var n=!1,r=L(e);return this.each(function(t){return!(n=r(t,e))}),n},find:function(e){if(!e||e.nodeType)return y(e&&this.has(e).length?e:null);var n=[];return this.each(function(t){i.apply(n,p(e,t))}),C(n)},has:function(e){var t=f(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return y(this[0].nextElementSibling)},not:function(e){if(!e)return this;var n=L(e);return this.filter(function(t){return!n(t,e)})},parent:function(){var e=[];return this.each(function(t){t&&t.parentNode&&e.push(t.parentNode)}),C(e)},parents:function(e){var n,r=[];return this.each(function(t){for(n=t;n&&n.parentNode&&n!==o.body.parentNode;)n=n.parentNode,(!e||e&&N(n,e))&&r.push(n)}),C(r)},prev:function(){return y(this[0].previousElementSibling)},siblings:function(t){var e=this.parent().children(t),n=this[0];return e.filter(function(t){return t!==n})}}),y}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhc2guanMiXSwibmFtZXMiOlsid2luZG93IiwiY2FzaCIsImZyYWciLCJkb2MiLCJkb2N1bWVudCIsIndpbiIsIkFycmF5UHJvdG8iLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiZmlsdGVyIiwicHVzaCIsImlzRnVuY3Rpb24iLCJpdGVtIiwibm9vcCIsImNhbGwiLCJpc1N0cmluZyIsImNsYXNzTWF0Y2giLCJodG1sTWF0Y2giLCJzaW5nbGV0Iiwic2VsZWN0b3IiLCJjb250ZXh0IiwiZWxlbXMiLCJ0ZXN0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsInBhcnNlSFRNTCIsInN0ciIsImlkTWF0Y2giLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJsb2NhdGlvbiIsImhyZWYiLCJhcHBlbmRDaGlsZCIsImJhc2UiLCJib2R5IiwiY2hpbGROb2RlcyIsIm9uUmVhZHkiLCJmbiIsIkluaXQiLCJ0aGlzIiwicmVhZHlTdGF0ZSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpIiwiZmluZCIsImdldEVsZW1lbnRCeUlkIiwic3BsaWNlIiwibWFwIiwiaW5pdCIsInRhcmdldCIsImNvbGxlY3Rpb24iLCJjYWxsYmFjayIsImwiLCJrZXkiLCJtIiwiZWwiLCJtYXRjaGVzIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwiZWFjaCIsImlzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImV4dGVuZCIsImFyZ3VtZW50cyIsImFyZ3MiLCJoYXNPd25Qcm9wZXJ0eSIsIm1lcmdlIiwiZmlyc3QiLCJzZWNvbmQiLCJqIiwidW5pcXVlIiwiaXNBcnJheSIsImlzTnVtZXJpYyIsInNlbGYiLCJuIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJ1aWQiLCJsZW4iLCJEYXRlIiwibm93Iiwibm9kZSIsInNldERhdGEiLCJnZXREYXRhQ2FjaGUiLCJnZXREYXRhIiwiYyIsInVuZGVmaW5lZCIsImRhdGFzZXQiLCJhdHRyIiwiZGF0YSIsIm5hbWUiLCJ2IiwicmVtb3ZlRGF0YSIsImdldENsYXNzZXMiLCJoYXNDbGFzcyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiUmVnRXhwIiwiY2xhc3NOYW1lIiwiYWRkQ2xhc3MiLCJzcGFjZWROYW1lIiwiYWRkIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzIiwicmVtb3ZlIiwibm90V2hpdGVNYXRjaCIsInJlcGxhY2UiLCJjbGFzc2VzIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiY2hlY2siLCJwcm9wIiwicmVtb3ZlQXR0ciIsInJlbW92ZUF0dHJpYnV0ZSIsInJlbW92ZVByb3AiLCJ0b2dnbGVDbGFzcyIsInN0YXRlIiwiZXEiLCJnZXQiLCJpbmRleCIsImNvbXBhcmF0b3IiLCJnZXRDb21wYXJlRnVuY3Rpb24iLCJlIiwiZWxlbSIsImNoaWxkIiwicGFyZW50IiwiY2hpbGRyZW4iLCJsYXN0IiwiY2FjaGUiLCJkaXYiLCJzdHlsZSIsIndoaXRlU3BhY2UiLCJjYW1lbENhc2UiLCJjYW1lbFJlZ2V4IiwibGV0dGVyIiwiZ2V0UHJlZml4ZWRQcm9wIiwidWNQcm9wIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwcm9wcyIsImpvaW4iLCJzcGxpdCIsInAiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJyZW1vdmVFdmVudCIsImV2ZW50TmFtZSIsImV2ZW50cyIsImV2ZW50Q2FjaGUiLCJsb3dlciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImVuY29kZVVSSUNvbXBvbmVudCIsInRyaWdnZXIiLCJ2YWx1ZXMiLCJzZWxlY3RlZEluZGV4IiwidHlwZSIsImV2dCIsImluaXRFdmVudCIsInRvTG93ZXJDYXNlIiwib3B0aW9ucyIsIm8iLCJzZWxlY3RlZCIsImVuY29kZSIsImluc2VydENvbnRlbnQiLCJwcmVwZW5kIiwicXVlcnkiLCJ2YWwiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJnZXRWYWx1ZSIsImluc2VydEJlZm9yZSIsImluc2VydEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJwcmVmaXhlZFByb3AiLCJjc3MiLCJwcmVmaXhlcyIsIm1hcmdpbnMiLCJjb21wdXRlIiwib2ZmIiwicmVnaXN0ZXJFdmVudCIsIm9uIiwiZGVsZWdhdGUiLCJydW5PbmNlIiwib3JpZ2luYWxDYWxsYmFjayIsInQiLCJwYXJlbnROb2RlIiwiZmluYWxDYWxsYmFjayIsIm9uZSIsImNyZWF0ZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlcmlhbGl6ZSIsImVsZW1lbnRzIiwiZ2V0U2VsZWN0U2luZ2xlXyIsImNoZWNrZWQiLCJzdWJzdHIiLCJhZnRlciIsImluc2VydEFmdGVyIiwiYXBwZW5kIiwiY29udGVudCIsImJlZm9yZSIsImNsb25lIiwiZW1wdHkiLCJodG1sIiwic291cmNlIiwibm9kZVR5cGUiLCJvdXRlckhUTUwiLCJpbm5lckhUTUwiLCJhcHBlbmRUbyIsInNpYmxpbmciLCJuZXh0U2libGluZyIsIl90aGlzMiIsInByZXBlbmRUbyIsIl90aGlzIiwicmVtb3ZlQ2hpbGQiLCJ0ZXh0IiwidGV4dENvbnRlbnQiLCJkb2NFbCIsImRvY3VtZW50RWxlbWVudCIsInBhcmVudHMiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsInRvcCIsIm9mZnNldFRvcCIsIm9mZnNldCIsInJlY3QiLCJwYWdlWU9mZnNldCIsImNsaWVudFRvcCIsInBhZ2VYT2Zmc2V0IiwiY2xpZW50TGVmdCIsIm9mZnNldFBhcmVudCIsImFwcGx5IiwiY2xvc2VzdCIsIm1hdGNoIiwiaGFzIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsIm5vdCIsInJlc3VsdCIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwi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QUFBa0MsS0FBQTZKLFlBOURNM0QsRUFBQUEsRUFBQTJELGFBaUVIOUssR0FBVUEsR0FBVXVDLEVBQUE0RSxFQUFBbkgsS0FDbEJBLEVBQUxULEtBQWU0SCxLQXNDUjFELEVBQU95SyxJQTlCYkMsS0FGRCxXQXhFTSxPQUFBdFAsRUFBQXlDLEtBQUEsR0FBQThNLHlCQThFTkMsU0FBSUgsU0FBSmxPLEdBa0NBLElBQUlpQyxFQUFhWCxLQUFLMkYsU0FBU0MsU0FBU2xILEdBQVdzQyxFQUFLaEIsS0FBSyxHQS9CM0QsT0FBSTdCLEVBQVFBLE9BQUtxTCxTQUFZcEosR0FDM0J3TSxPQUFBQSxJQUFBNUwsT0FPTnlLLEVBMzVCWXVCIiwiZmlsZSI6ImNhc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgY2FzaC1kb20gMS4zLjUsIGh0dHBzOi8vZ2l0aHViLmNvbS9rZW53aGVlbGVyL2Nhc2ggQGxpY2Vuc2UgTUlUICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgd2luZG93LmNhc2ggPSBmYWN0b3J5KCk7XG59KShmdW5jdGlvbiAoKSB7XG4gIHZhciBkb2MgPSBkb2N1bWVudCwgd2luID0gd2luZG93LCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBzbGljZSA9IEFycmF5UHJvdG8uc2xpY2UsIGZpbHRlciA9IEFycmF5UHJvdG8uZmlsdGVyLCBwdXNoID0gQXJyYXlQcm90by5wdXNoO1xuXG4gIHZhciBub29wID0gZnVuY3Rpb24gKCkge30sIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIC8vIEBzZWUgaHR0cHM6Ly9jcmJ1Zy5jb20vNTY4NDQ4XG4gICAgcmV0dXJuIHR5cGVvZiBpdGVtID09PSB0eXBlb2Ygbm9vcCAmJiBpdGVtLmNhbGw7XG4gIH0sIGlzU3RyaW5nID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09IHR5cGVvZiBcIlwiO1xuICB9O1xuXG4gIHZhciBpZE1hdGNoID0gL14jW1xcdy1dKiQvLCBjbGFzc01hdGNoID0gL15cXC5bXFx3LV0qJC8sIGh0bWxNYXRjaCA9IC88Lis+Lywgc2luZ2xldCA9IC9eXFx3KyQvO1xuXG4gIGZ1bmN0aW9uIGZpbmQoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2M7XG4gICAgdmFyIGVsZW1zID0gKGNsYXNzTWF0Y2gudGVzdChzZWxlY3RvcikgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoc2VsZWN0b3Iuc2xpY2UoMSkpIDogc2luZ2xldC50ZXN0KHNlbGVjdG9yKSA/IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpIDogY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgcmV0dXJuIGVsZW1zO1xuICB9XG5cbiAgdmFyIGZyYWc7XG4gIGZ1bmN0aW9uIHBhcnNlSFRNTChzdHIpIHtcbiAgICBpZiAoIWZyYWcpIHtcbiAgICAgIGZyYWcgPSBkb2MuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KG51bGwpO1xuICAgICAgdmFyIGJhc2UgPSBmcmFnLmNyZWF0ZUVsZW1lbnQoXCJiYXNlXCIpO1xuICAgICAgYmFzZS5ocmVmID0gZG9jLmxvY2F0aW9uLmhyZWY7XG4gICAgICBmcmFnLmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7XG4gICAgfVxuXG4gICAgZnJhZy5ib2R5LmlubmVySFRNTCA9IHN0cjtcblxuICAgIHJldHVybiBmcmFnLmJvZHkuY2hpbGROb2RlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVhZHkoZm4pIHtcbiAgICBpZiAoZG9jLnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG4gICAgICBmbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEluaXQoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBJZiBhbHJlYWR5IGEgY2FzaCBjb2xsZWN0aW9uLCBkb24ndCBkbyBhbnkgZnVydGhlciBwcm9jZXNzaW5nXG4gICAgaWYgKHNlbGVjdG9yLmNhc2ggJiYgc2VsZWN0b3IgIT09IHdpbikge1xuICAgICAgcmV0dXJuIHNlbGVjdG9yO1xuICAgIH1cblxuICAgIHZhciBlbGVtcyA9IHNlbGVjdG9yLCBpID0gMCwgbGVuZ3RoO1xuXG4gICAgaWYgKGlzU3RyaW5nKHNlbGVjdG9yKSkge1xuICAgICAgZWxlbXMgPSAoaWRNYXRjaC50ZXN0KHNlbGVjdG9yKSA/XG4gICAgICAvLyBJZiBhbiBJRCB1c2UgdGhlIGZhc3RlciBnZXRFbGVtZW50QnlJZCBjaGVja1xuICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yLnNsaWNlKDEpKSA6IGh0bWxNYXRjaC50ZXN0KHNlbGVjdG9yKSA/XG4gICAgICAvLyBJZiBIVE1MLCBwYXJzZSBpdCBpbnRvIHJlYWwgZWxlbWVudHNcbiAgICAgIHBhcnNlSFRNTChzZWxlY3RvcikgOlxuICAgICAgLy8gZWxzZSB1c2UgYGZpbmRgXG4gICAgICBmaW5kKHNlbGVjdG9yLCBjb250ZXh0KSk7XG5cbiAgICAgIC8vIElmIGZ1bmN0aW9uLCB1c2UgYXMgc2hvcnRjdXQgZm9yIERPTSByZWFkeVxuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcbiAgICAgIG9uUmVhZHkoc2VsZWN0b3IpO3JldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICghZWxlbXMpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIElmIGEgc2luZ2xlIERPTSBlbGVtZW50IGlzIHBhc3NlZCBpbiBvciByZWNlaXZlZCB2aWEgSUQsIHJldHVybiB0aGUgc2luZ2xlIGVsZW1lbnRcbiAgICBpZiAoZWxlbXMubm9kZVR5cGUgfHwgZWxlbXMgPT09IHdpbikge1xuICAgICAgdGhpc1swXSA9IGVsZW1zO1xuICAgICAgdGhpcy5sZW5ndGggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUcmVhdCBsaWtlIGFuIGFycmF5IGFuZCBsb29wIHRocm91Z2ggZWFjaCBpdGVtLlxuICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGggPSBlbGVtcy5sZW5ndGg7XG4gICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXNbaV0gPSBlbGVtc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhc2goc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gbmV3IEluaXQoc2VsZWN0b3IsIGNvbnRleHQpO1xuICB9XG5cbiAgdmFyIGZuID0gY2FzaC5mbiA9IGNhc2gucHJvdG90eXBlID0gSW5pdC5wcm90b3R5cGUgPSB7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgIGNhc2g6IHRydWUsXG4gICAgbGVuZ3RoOiAwLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgc3BsaWNlOiBBcnJheVByb3RvLnNwbGljZSxcbiAgICBtYXA6IEFycmF5UHJvdG8ubWFwLFxuICAgIGluaXQ6IEluaXRcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIFwiY29uc3RydWN0b3JcIiwgeyB2YWx1ZTogY2FzaCB9KTtcblxuICBjYXNoLnBhcnNlSFRNTCA9IHBhcnNlSFRNTDtcbiAgY2FzaC5ub29wID0gbm9vcDtcbiAgY2FzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbiAgY2FzaC5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG4gIGNhc2guZXh0ZW5kID0gZm4uZXh0ZW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHRhcmdldCA9IHRhcmdldCB8fCB7fTtcblxuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpLCBsZW5ndGggPSBhcmdzLmxlbmd0aCwgaSA9IDE7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRhcmdldCA9IHRoaXM7XG4gICAgICBpID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWFyZ3NbaV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gYXJnc1tpXSkge1xuICAgICAgICBpZiAoYXJnc1tpXS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBhcmdzW2ldW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgbCA9IGNvbGxlY3Rpb24ubGVuZ3RoLCBpID0gMDtcblxuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoY2FsbGJhY2suY2FsbChjb2xsZWN0aW9uW2ldLCBjb2xsZWN0aW9uW2ldLCBpLCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgbSA9IGVsICYmIChlbC5tYXRjaGVzIHx8IGVsLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBlbC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgZWwubXNNYXRjaGVzU2VsZWN0b3IgfHwgZWwub01hdGNoZXNTZWxlY3Rvcik7XG4gICAgcmV0dXJuICEhbSAmJiBtLmNhbGwoZWwsIHNlbGVjdG9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbXBhcmVGdW5jdGlvbihzZWxlY3Rvcikge1xuICAgIHJldHVybiAoXG4gICAgLyogVXNlIGJyb3dzZXIncyBgbWF0Y2hlc2AgZnVuY3Rpb24gaWYgc3RyaW5nICovXG4gICAgaXNTdHJpbmcoc2VsZWN0b3IpID8gbWF0Y2hlcyA6XG4gICAgLyogTWF0Y2ggYSBjYXNoIGVsZW1lbnQgKi9cbiAgICBzZWxlY3Rvci5jYXNoID8gZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gc2VsZWN0b3IuaXMoZWwpO1xuICAgIH0gOlxuICAgIC8qIERpcmVjdCBjb21wYXJpc29uICovXG4gICAgZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIGVsID09PSBzZWxlY3RvcjtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuaXF1ZShjb2xsZWN0aW9uKSB7XG4gICAgcmV0dXJuIGNhc2goc2xpY2UuY2FsbChjb2xsZWN0aW9uKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09PSBpbmRleDtcbiAgICB9KSk7XG4gIH1cblxuICBjYXNoLmV4dGVuZCh7XG4gICAgbWVyZ2U6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICB2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsIGkgPSBmaXJzdC5sZW5ndGgsIGogPSAwO1xuXG4gICAgICBmb3IgKDsgaiA8IGxlbjsgaSsrLCBqKyspIHtcbiAgICAgICAgZmlyc3RbaV0gPSBzZWNvbmRbal07XG4gICAgICB9XG5cbiAgICAgIGZpcnN0Lmxlbmd0aCA9IGk7XG4gICAgICByZXR1cm4gZmlyc3Q7XG4gICAgfSxcblxuICAgIGVhY2g6IGVhY2gsXG4gICAgbWF0Y2hlczogbWF0Y2hlcyxcbiAgICB1bmlxdWU6IHVuaXF1ZSxcbiAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuICAgIGlzTnVtZXJpYzogZnVuY3Rpb24gKG4pIHtcbiAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XG4gICAgfVxuXG4gIH0pO1xuXG4gIHZhciB1aWQgPSBjYXNoLnVpZCA9IFwiX2Nhc2hcIiArIERhdGUubm93KCk7XG5cbiAgZnVuY3Rpb24gZ2V0RGF0YUNhY2hlKG5vZGUpIHtcbiAgICByZXR1cm4gKG5vZGVbdWlkXSA9IG5vZGVbdWlkXSB8fCB7fSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXREYXRhKG5vZGUsIGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gKGdldERhdGFDYWNoZShub2RlKVtrZXldID0gdmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGF0YShub2RlLCBrZXkpIHtcbiAgICB2YXIgYyA9IGdldERhdGFDYWNoZShub2RlKTtcbiAgICBpZiAoY1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNba2V5XSA9IG5vZGUuZGF0YXNldCA/IG5vZGUuZGF0YXNldFtrZXldIDogY2FzaChub2RlKS5hdHRyKFwiZGF0YS1cIiArIGtleSk7XG4gICAgfVxuICAgIHJldHVybiBjW2tleV07XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVEYXRhKG5vZGUsIGtleSkge1xuICAgIHZhciBjID0gZ2V0RGF0YUNhY2hlKG5vZGUpO1xuICAgIGlmIChjKSB7XG4gICAgICBkZWxldGUgY1trZXldO1xuICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhc2V0KSB7XG4gICAgICBkZWxldGUgbm9kZS5kYXRhc2V0W2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhc2gobm9kZSkucmVtb3ZlQXR0cihcImRhdGEtXCIgKyBuYW1lKTtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIGRhdGE6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgaWYgKGlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgPT09IHVuZGVmaW5lZCA/IGdldERhdGEodGhpc1swXSwgbmFtZSkgOiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RGF0YSh2LCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgdGhpcy5kYXRhKGtleSwgbmFtZVtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHJlbW92ZURhdGE6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZURhdGEodiwga2V5KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICB2YXIgbm90V2hpdGVNYXRjaCA9IC9cXFMrL2c7XG5cbiAgZnVuY3Rpb24gZ2V0Q2xhc3NlcyhjKSB7XG4gICAgcmV0dXJuIGlzU3RyaW5nKGMpICYmIGMubWF0Y2gobm90V2hpdGVNYXRjaCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNDbGFzcyh2LCBjKSB7XG4gICAgcmV0dXJuICh2LmNsYXNzTGlzdCA/IHYuY2xhc3NMaXN0LmNvbnRhaW5zKGMpIDogbmV3IFJlZ0V4cChcIihefCApXCIgKyBjICsgXCIoIHwkKVwiLCBcImdpXCIpLnRlc3Qodi5jbGFzc05hbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpIHtcbiAgICBpZiAodi5jbGFzc0xpc3QpIHtcbiAgICAgIHYuY2xhc3NMaXN0LmFkZChjKTtcbiAgICB9IGVsc2UgaWYgKHNwYWNlZE5hbWUuaW5kZXhPZihcIiBcIiArIGMgKyBcIiBcIikpIHtcbiAgICAgIHYuY2xhc3NOYW1lICs9IFwiIFwiICsgYztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVDbGFzcyh2LCBjKSB7XG4gICAgaWYgKHYuY2xhc3NMaXN0KSB7XG4gICAgICB2LmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHYuY2xhc3NOYW1lID0gdi5jbGFzc05hbWUucmVwbGFjZShjLCBcIlwiKTtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoYykge1xuICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuXG4gICAgICByZXR1cm4gKGNsYXNzZXMgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIHNwYWNlZE5hbWUgPSBcIiBcIiArIHYuY2xhc3NOYW1lICsgXCIgXCI7XG4gICAgICAgIGVhY2goY2xhc3NlcywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICBhZGRDbGFzcyh2LCBjLCBzcGFjZWROYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSA6IHRoaXMpO1xuICAgIH0sXG5cbiAgICBhdHRyOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgIGlmICghbmFtZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1swXSA/IHRoaXNbMF0uZ2V0QXR0cmlidXRlID8gdGhpc1swXS5nZXRBdHRyaWJ1dGUobmFtZSkgOiB0aGlzWzBdW25hbWVdIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIGlmICh2LnNldEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdi5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2W25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hdHRyKGtleSwgbmFtZVtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGhhc0NsYXNzOiBmdW5jdGlvbiAoYykge1xuICAgICAgdmFyIGNoZWNrID0gZmFsc2UsIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuICAgICAgaWYgKGNsYXNzZXMgJiYgY2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgY2hlY2sgPSBoYXNDbGFzcyh2LCBjbGFzc2VzWzBdKTtcbiAgICAgICAgICByZXR1cm4gIWNoZWNrO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGVjaztcbiAgICB9LFxuXG4gICAgcHJvcDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuICh2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdGhpc1swXVtuYW1lXSA6IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHZbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICB0aGlzLnByb3Aoa2V5LCBuYW1lW2tleV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKHYucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgICAgICAgdi5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHZbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGMpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKFwiY2xhc3NcIiwgXCJcIik7XG4gICAgICB9XG4gICAgICB2YXIgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7XG4gICAgICByZXR1cm4gKGNsYXNzZXMgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJlbW92ZUNsYXNzKHYsIGMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pIDogdGhpcyk7XG4gICAgfSxcblxuICAgIHJlbW92ZVByb3A6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGRlbGV0ZSB2W25hbWVdO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiAoYywgc3RhdGUpIHtcbiAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3N0YXRlID8gXCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiXShjKTtcbiAgICAgIH1cbiAgICAgIHZhciBjbGFzc2VzID0gZ2V0Q2xhc3NlcyhjKTtcbiAgICAgIHJldHVybiAoY2xhc3NlcyA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgc3BhY2VkTmFtZSA9IFwiIFwiICsgdi5jbGFzc05hbWUgKyBcIiBcIjtcbiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIGlmIChoYXNDbGFzcyh2LCBjKSkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModiwgYyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KSA6IHRoaXMpO1xuICAgIH0gfSk7XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHVuaXF1ZShjYXNoLm1lcmdlKHRoaXMsIGNhc2goc2VsZWN0b3IsIGNvbnRleHQpKSk7XG4gICAgfSxcblxuICAgIGVhY2g6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgZWFjaCh0aGlzLCBjYWxsYmFjayk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgZXE6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpcy5nZXQoaW5kZXgpKTtcbiAgICB9LFxuXG4gICAgZmlsdGVyOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21wYXJhdG9yID0gKGlzRnVuY3Rpb24oc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBnZXRDb21wYXJlRnVuY3Rpb24oc2VsZWN0b3IpKTtcblxuICAgICAgcmV0dXJuIGNhc2goZmlsdGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoZSwgc2VsZWN0b3IpO1xuICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICBmaXJzdDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXEoMCk7XG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoaW5kZXggPCAwID8gdGhpc1tpbmRleCArIHRoaXMubGVuZ3RoXSA6IHRoaXNbaW5kZXhdKTtcbiAgICB9LFxuXG4gICAgaW5kZXg6IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICB2YXIgY2hpbGQgPSBlbGVtID8gY2FzaChlbGVtKVswXSA6IHRoaXNbMF0sIGNvbGxlY3Rpb24gPSBlbGVtID8gdGhpcyA6IGNhc2goY2hpbGQpLnBhcmVudCgpLmNoaWxkcmVuKCk7XG4gICAgICByZXR1cm4gc2xpY2UuY2FsbChjb2xsZWN0aW9uKS5pbmRleE9mKGNoaWxkKTtcbiAgICB9LFxuXG4gICAgbGFzdDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXEoLTEpO1xuICAgIH1cblxuICB9KTtcblxuICB2YXIgY2FtZWxDYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FtZWxSZWdleCA9IC8oPzpeXFx3fFtBLVpdfFxcYlxcdykvZywgd2hpdGVTcGFjZSA9IC9bXFxzLV9dKy9nO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxSZWdleCwgZnVuY3Rpb24gKGxldHRlciwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxldHRlcltpbmRleCA9PT0gMCA/IFwidG9Mb3dlckNhc2VcIiA6IFwidG9VcHBlckNhc2VcIl0oKTtcbiAgICAgIH0pLnJlcGxhY2Uod2hpdGVTcGFjZSwgXCJcIik7XG4gICAgfTtcbiAgfSgpKTtcblxuICB2YXIgZ2V0UHJlZml4ZWRQcm9wID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FjaGUgPSB7fSwgZG9jID0gZG9jdW1lbnQsIGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCBzdHlsZSA9IGRpdi5zdHlsZTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgcHJvcCA9IGNhbWVsQ2FzZShwcm9wKTtcbiAgICAgIGlmIChjYWNoZVtwcm9wXSkge1xuICAgICAgICByZXR1cm4gY2FjaGVbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIHZhciB1Y1Byb3AgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKSwgcHJlZml4ZXMgPSBbXCJ3ZWJraXRcIiwgXCJtb3pcIiwgXCJtc1wiLCBcIm9cIl0sIHByb3BzID0gKHByb3AgKyBcIiBcIiArIChwcmVmaXhlcykuam9pbih1Y1Byb3AgKyBcIiBcIikgKyB1Y1Byb3ApLnNwbGl0KFwiIFwiKTtcblxuICAgICAgZWFjaChwcm9wcywgZnVuY3Rpb24gKHApIHtcbiAgICAgICAgaWYgKHAgaW4gc3R5bGUpIHtcbiAgICAgICAgICBjYWNoZVtwXSA9IHByb3AgPSBjYWNoZVtwcm9wXSA9IHA7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNhY2hlW3Byb3BdO1xuICAgIH07XG4gIH0oKSk7XG5cbiAgY2FzaC5wcmVmaXhlZFByb3AgPSBnZXRQcmVmaXhlZFByb3A7XG4gIGNhc2guY2FtZWxDYXNlID0gY2FtZWxDYXNlO1xuXG4gIGZuLmV4dGVuZCh7XG4gICAgY3NzOiBmdW5jdGlvbiAocHJvcCwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1N0cmluZyhwcm9wKSkge1xuICAgICAgICBwcm9wID0gZ2V0UHJlZml4ZWRQcm9wKHByb3ApO1xuICAgICAgICByZXR1cm4gKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIHYuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgfSkgOiB3aW4uZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdKVtwcm9wXSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wKSB7XG4gICAgICAgIHRoaXMuY3NzKGtleSwgcHJvcFtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGNvbXB1dGUoZWwsIHByb3ApIHtcbiAgICByZXR1cm4gcGFyc2VJbnQod2luLmdldENvbXB1dGVkU3R5bGUoZWxbMF0sIG51bGwpW3Byb3BdLCAxMCkgfHwgMDtcbiAgfVxuXG4gIGVhY2goW1wiV2lkdGhcIiwgXCJIZWlnaHRcIl0sIGZ1bmN0aW9uICh2KSB7XG4gICAgdmFyIGxvd2VyID0gdi50b0xvd2VyQ2FzZSgpO1xuXG4gICAgZm5bbG93ZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbbG93ZXJdO1xuICAgIH07XG5cbiAgICBmbltcImlubmVyXCIgKyB2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzWzBdW1wiY2xpZW50XCIgKyB2XTtcbiAgICB9O1xuXG4gICAgZm5bXCJvdXRlclwiICsgdl0gPSBmdW5jdGlvbiAobWFyZ2lucykge1xuICAgICAgcmV0dXJuIHRoaXNbMF1bXCJvZmZzZXRcIiArIHZdICsgKG1hcmdpbnMgPyBjb21wdXRlKHRoaXMsIFwibWFyZ2luXCIgKyAodiA9PT0gXCJXaWR0aFwiID8gXCJMZWZ0XCIgOiBcIlRvcFwiKSkgKyBjb21wdXRlKHRoaXMsIFwibWFyZ2luXCIgKyAodiA9PT0gXCJXaWR0aFwiID8gXCJSaWdodFwiIDogXCJCb3R0b21cIikpIDogMCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudChub2RlLCBldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGV2ZW50Q2FjaGUgPSBnZXREYXRhKG5vZGUsIFwiX2Nhc2hFdmVudHNcIikgfHwgc2V0RGF0YShub2RlLCBcIl9jYXNoRXZlbnRzXCIsIHt9KTtcbiAgICBldmVudENhY2hlW2V2ZW50TmFtZV0gPSBldmVudENhY2hlW2V2ZW50TmFtZV0gfHwgW107XG4gICAgZXZlbnRDYWNoZVtldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUV2ZW50KG5vZGUsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZXZlbnRzID0gZ2V0RGF0YShub2RlLCBcIl9jYXNoRXZlbnRzXCIpLCBldmVudENhY2hlID0gKGV2ZW50cyAmJiBldmVudHNbZXZlbnROYW1lXSksIGluZGV4O1xuXG4gICAgaWYgKCFldmVudENhY2hlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gICAgICBpbmRleCA9IGV2ZW50Q2FjaGUuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBldmVudENhY2hlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVhY2goZXZlbnRDYWNoZSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgZXZlbnRDYWNoZSA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIGZuLmV4dGVuZCh7XG4gICAgb2ZmOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gcmVtb3ZlRXZlbnQodiwgZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgb246IGZ1bmN0aW9uIChldmVudE5hbWUsIGRlbGVnYXRlLCBjYWxsYmFjaywgcnVuT25jZSkge1xuICAgICAgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICB2YXIgb3JpZ2luYWxDYWxsYmFjaztcbiAgICAgIGlmICghaXNTdHJpbmcoZXZlbnROYW1lKSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnROYW1lKSB7XG4gICAgICAgICAgdGhpcy5vbihrZXksIGRlbGVnYXRlLCBldmVudE5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Z1bmN0aW9uKGRlbGVnYXRlKSkge1xuICAgICAgICBjYWxsYmFjayA9IGRlbGVnYXRlO1xuICAgICAgICBkZWxlZ2F0ZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudE5hbWUgPT09IFwicmVhZHlcIikge1xuICAgICAgICBvblJlYWR5KGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICBvcmlnaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IGUudGFyZ2V0O1xuICAgICAgICAgIHdoaWxlICghbWF0Y2hlcyh0LCBkZWxlZ2F0ZSkpIHtcbiAgICAgICAgICAgIGlmICh0ID09PSB0aGlzIHx8IHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICh0ID0gZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ID0gdC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBvcmlnaW5hbENhbGxiYWNrLmNhbGwodCwgZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciBmaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGlmIChydW5PbmNlKSB7XG4gICAgICAgICAgZmluYWxDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZW1vdmVFdmVudCh2LCBldmVudE5hbWUsIGZpbmFsQ2FsbGJhY2spO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmVnaXN0ZXJFdmVudCh2LCBldmVudE5hbWUsIGZpbmFsQ2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIG9uZTogZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGVsZWdhdGUsIGNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5vbihldmVudE5hbWUsIGRlbGVnYXRlLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgfSxcblxuICAgIHJlYWR5OiBvblJlYWR5LFxuXG4gICAgLyoqXG4gICAgICogTW9kaWZpZWRcbiAgICAgKiBUcmlnZ2VycyBicm93c2VyIGV2ZW50XG4gICAgICogQHBhcmFtIFN0cmluZyBldmVudE5hbWVcbiAgICAgKiBAcGFyYW0gT2JqZWN0IGRhdGEgLSBBZGQgcHJvcGVydGllcyB0byBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcbiAgICAgICAgbGV0IGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XG4gICAgICAgIGV2dC5pbml0RXZlbnQoZXZlbnROYW1lLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIGV2dCA9IHRoaXMuZXh0ZW5kKGV2dCwgZGF0YSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICByZXR1cm4gdi5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICBmdW5jdGlvbiBlbmNvZGUobmFtZSwgdmFsdWUpIHtcbiAgICByZXR1cm4gXCImXCIgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZSgvJTIwL2csIFwiK1wiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNlbGVjdE11bHRpcGxlXyhlbCkge1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBlYWNoKGVsLm9wdGlvbnMsIGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAoby5zZWxlY3RlZCkge1xuICAgICAgICB2YWx1ZXMucHVzaChvLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlcyA6IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTZWxlY3RTaW5nbGVfKGVsKSB7XG4gICAgdmFyIHNlbGVjdGVkSW5kZXggPSBlbC5zZWxlY3RlZEluZGV4O1xuICAgIHJldHVybiBzZWxlY3RlZEluZGV4ID49IDAgPyBlbC5vcHRpb25zW3NlbGVjdGVkSW5kZXhdLnZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFZhbHVlKGVsKSB7XG4gICAgdmFyIHR5cGUgPSBlbC50eXBlO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlIFwic2VsZWN0LW9uZVwiOlxuICAgICAgICByZXR1cm4gZ2V0U2VsZWN0U2luZ2xlXyhlbCk7XG4gICAgICBjYXNlIFwic2VsZWN0LW11bHRpcGxlXCI6XG4gICAgICAgIHJldHVybiBnZXRTZWxlY3RNdWx0aXBsZV8oZWwpO1xuICAgICAgY2FzZSBcInJhZGlvXCI6XG4gICAgICAgIHJldHVybiAoZWwuY2hlY2tlZCkgPyBlbC52YWx1ZSA6IG51bGw7XG4gICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgcmV0dXJuIChlbC5jaGVja2VkKSA/IGVsLnZhbHVlIDogbnVsbDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBlbC52YWx1ZSA/IGVsLnZhbHVlIDogbnVsbDtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHF1ZXJ5ID0gXCJcIjtcblxuICAgICAgZWFjaCh0aGlzWzBdLmVsZW1lbnRzIHx8IHRoaXMsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoZWwuZGlzYWJsZWQgfHwgZWwudGFnTmFtZSA9PT0gXCJGSUVMRFNFVFwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuYW1lID0gZWwubmFtZTtcbiAgICAgICAgc3dpdGNoIChlbC50eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgICAgIGNhc2UgXCJyZXNldFwiOlxuICAgICAgICAgIGNhc2UgXCJzdWJtaXRcIjpcbiAgICAgICAgICBjYXNlIFwiYnV0dG9uXCI6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwic2VsZWN0LW11bHRpcGxlXCI6XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgaWYgKHZhbHVlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBlYWNoKHZhbHVlcywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgKz0gZW5jb2RlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5ICs9IGVuY29kZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcXVlcnkuc3Vic3RyKDEpO1xuICAgIH0sXG5cbiAgICB2YWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGdldFZhbHVlKHRoaXNbMF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB2LnZhbHVlID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgZnVuY3Rpb24gaW5zZXJ0RWxlbWVudChlbCwgY2hpbGQsIHByZXBlbmQpIHtcbiAgICBpZiAocHJlcGVuZCkge1xuICAgICAgdmFyIGZpcnN0ID0gZWwuY2hpbGROb2Rlc1swXTtcbiAgICAgIGVsLmluc2VydEJlZm9yZShjaGlsZCwgZmlyc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0Q29udGVudChwYXJlbnQsIGNoaWxkLCBwcmVwZW5kKSB7XG4gICAgdmFyIHN0ciA9IGlzU3RyaW5nKGNoaWxkKTtcblxuICAgIGlmICghc3RyICYmIGNoaWxkLmxlbmd0aCkge1xuICAgICAgZWFjaChjaGlsZCwgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIGluc2VydENvbnRlbnQocGFyZW50LCB2LCBwcmVwZW5kKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVhY2gocGFyZW50LCBzdHIgPyBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHYuaW5zZXJ0QWRqYWNlbnRIVE1MKHByZXBlbmQgPyBcImFmdGVyYmVnaW5cIiA6IFwiYmVmb3JlZW5kXCIsIGNoaWxkKTtcbiAgICB9IDogZnVuY3Rpb24gKHYsIGkpIHtcbiAgICAgIHJldHVybiBpbnNlcnRFbGVtZW50KHYsIChpID09PSAwID8gY2hpbGQgOiBjaGlsZC5jbG9uZU5vZGUodHJ1ZSkpLCBwcmVwZW5kKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZuLmV4dGVuZCh7XG4gICAgYWZ0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgY2FzaChzZWxlY3RvcikuaW5zZXJ0QWZ0ZXIodGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgYXBwZW5kOiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgaW5zZXJ0Q29udGVudCh0aGlzLCBjb250ZW50KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBhcHBlbmRUbzogZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgaW5zZXJ0Q29udGVudChjYXNoKHBhcmVudCksIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGJlZm9yZTogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICBjYXNoKHNlbGVjdG9yKS5pbnNlcnRCZWZvcmUodGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYXNoKHRoaXMubWFwKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB2LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgZW1wdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuaHRtbChcIlwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBodG1sOiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpc1swXS5pbm5lckhUTUw7XG4gICAgICB9XG4gICAgICB2YXIgc291cmNlID0gKGNvbnRlbnQubm9kZVR5cGUgPyBjb250ZW50WzBdLm91dGVySFRNTCA6IGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi5pbm5lckhUTUwgPSBzb3VyY2U7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW5zZXJ0QWZ0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXG4gICAgICBjYXNoKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZSwgc2libGluZyA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgICBfdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSgoaSA9PT0gMCA/IHYgOiB2LmNsb25lTm9kZSh0cnVlKSksIHNpYmxpbmcpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgY2FzaChzZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgIF90aGlzMi5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSgoaSA9PT0gMCA/IHYgOiB2LmNsb25lTm9kZSh0cnVlKSksIGVsKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBwcmVwZW5kOiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgaW5zZXJ0Q29udGVudCh0aGlzLCBjb250ZW50LCB0cnVlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBwcmVwZW5kVG86IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgIGluc2VydENvbnRlbnQoY2FzaChwYXJlbnQpLCB0aGlzLCB0cnVlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCEhdi5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgcmV0dXJuIHYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh2KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRleHQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdLnRleHRDb250ZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIGRvY0VsID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICBmbi5leHRlbmQoe1xuICAgIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzWzBdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogZWwub2Zmc2V0TGVmdCxcbiAgICAgICAgdG9wOiBlbC5vZmZzZXRUb3BcbiAgICAgIH07XG4gICAgfSxcblxuICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlY3QgPSB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsLmNsaWVudFRvcCxcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWwuY2xpZW50TGVmdFxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgb2Zmc2V0UGFyZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzWzBdLm9mZnNldFBhcmVudCk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZuLmV4dGVuZCh7XG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIGVsZW1zID0gW107XG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGVsLmNoaWxkcmVuKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbXMgPSB1bmlxdWUoZWxlbXMpO1xuXG4gICAgICByZXR1cm4gKCFzZWxlY3RvciA/IGVsZW1zIDogZWxlbXMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVzKHYsIHNlbGVjdG9yKTtcbiAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgY2xvc2VzdDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICBpZiAoIXNlbGVjdG9yIHx8IHRoaXMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gY2FzaCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXMoc2VsZWN0b3IpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQoKS5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgaXM6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXRjaCA9IGZhbHNlLCBjb21wYXJhdG9yID0gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTtcblxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBtYXRjaCA9IGNvbXBhcmF0b3IoZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuICFtYXRjaDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSxcblxuICAgIGZpbmQ6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3Rvci5ub2RlVHlwZSkge1xuICAgICAgICByZXR1cm4gY2FzaChzZWxlY3RvciAmJiB0aGlzLmhhcyhzZWxlY3RvcikubGVuZ3RoID8gc2VsZWN0b3IgOiBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVsZW1zID0gW107XG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGZpbmQoc2VsZWN0b3IsIGVsKSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVuaXF1ZShlbGVtcyk7XG4gICAgfSxcblxuICAgIGhhczogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgY29tcGFyYXRvciA9IChpc1N0cmluZyhzZWxlY3RvcikgPyBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGZpbmQoc2VsZWN0b3IsIGVsKS5sZW5ndGggIT09IDA7XG4gICAgICB9IDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jb250YWlucyhzZWxlY3Rvcik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGNvbXBhcmF0b3IpO1xuICAgIH0sXG5cbiAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzWzBdLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgfSxcblxuICAgIG5vdDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29tcGFyYXRvciA9IGdldENvbXBhcmVGdW5jdGlvbihzZWxlY3Rvcik7XG5cbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuICFjb21wYXJhdG9yKGVsLCBzZWxlY3Rvcik7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcGFyZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChpdGVtLnBhcmVudE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVuaXF1ZShyZXN1bHQpO1xuICAgIH0sXG5cbiAgICBwYXJlbnRzOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIHZhciBsYXN0LCByZXN1bHQgPSBbXTtcblxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGxhc3QgPSBpdGVtO1xuXG4gICAgICAgIHdoaWxlIChsYXN0ICYmIGxhc3QucGFyZW50Tm9kZSAmJiBsYXN0ICE9PSBkb2MuYm9keS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgbGFzdCA9IGxhc3QucGFyZW50Tm9kZTtcblxuICAgICAgICAgIGlmICghc2VsZWN0b3IgfHwgKHNlbGVjdG9yICYmIG1hdGNoZXMobGFzdCwgc2VsZWN0b3IpKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobGFzdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVuaXF1ZShyZXN1bHQpO1xuICAgIH0sXG5cbiAgICBwcmV2OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpO1xuICAgIH0sXG5cbiAgICBzaWJsaW5nczogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXMucGFyZW50KCkuY2hpbGRyZW4oc2VsZWN0b3IpLCBlbCA9IHRoaXNbMF07XG5cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gaSAhPT0gZWw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cblxuICByZXR1cm4gY2FzaDtcbn0pO1xuIl19
