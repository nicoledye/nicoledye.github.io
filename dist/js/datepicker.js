"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),_get=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,a)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(a):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(m){var t={format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},e=function(e){function O(e,t){_classCallCheck(this,O);var n=_possibleConstructorReturn(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,e,t));(n.el.M_Datepicker=n).options=m.extend({},O.defaults,t),t&&t.hasOwnProperty("i18n")&&"object"===_typeof(t.i18n)&&(n.options.i18n=m.extend({},O.defaults.i18n,t.i18n)),n.options.minDate&&n.options.minDate.setHours(0,0,0,0),n.options.maxDate&&n.options.maxDate.setHours(0,0,0,0),n.id=M.guid(),n._setupVariables(),n._insertHTMLIntoDOM(),n._setupModal(),n._setupEventHandlers(),n.options.defaultDate||(n.options.defaultDate=new Date(Date.parse(n.el.value)),n.options.setDefaultDate=!0);var a=n.options.defaultDate;return O._isDate(a)?n.options.setDefaultDate?n.setDate(a,!0):n.gotoDate(a):n.gotoDate(new Date),n.isOpen=!1,n}return _inherits(O,Component),_createClass(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),m(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".pika-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".pika-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(m(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,O._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(e){return t.formats[e]?t.formats[e]():e}).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),O._isDate(e)){var n=this.options.minDate,a=this.options.maxDate;O._isDate(n)&&e<n?e=n:O._isDate(a)&&a<e&&(e=a),this.date=new Date(e.getTime()),this._renderDateDisplay(),O._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=O._isDate(this.date)?this.date:new Date,t=this.options.i18n,n=t.weekdaysShort[e.getDay()],a=t.monthsShort[e.getMonth()],i=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=n+", "+a+" "+i}},{key:"gotoDate",value:function(e){var t=!0;if(O._isDate(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),a=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),t=i<n.getTime()||a.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),11<e.month&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,n){var a=this.options,i=new Date,s=O._getDaysInMonth(e,t),o=new Date(e,t,1).getDay(),r=[],l=[];O._setToStartOfDay(i),0<a.firstDay&&(o-=a.firstDay)<0&&(o+=7);for(var d=0===t?11:t-1,h=11===t?0:t+1,u=0===t?e-1:e,c=11===t?e+1:e,p=O._getDaysInMonth(u,d),y=s+o,v=y;7<v;)v-=7;y+=7-v;for(var f=!1,m=0,g=0;m<y;m++){var k=new Date(e,t,m-o+1),D=!!O._isDate(this.date)&&O._compareDates(k,this.date),b=O._compareDates(k,i),_=-1!==a.events.indexOf(k.toDateString()),M=m<o||s+o<=m,w=m-o+1,C=t,S=e,E=a.startRange&&O._compareDates(a.startRange,k),T=a.endRange&&O._compareDates(a.endRange,k),x=a.startRange&&a.endRange&&a.startRange<k&&k<a.endRange;M&&(m<o?(w=p+w,C=d,S=u):(w-=s,C=h,S=c));var B={day:w,month:C,year:S,hasEvent:_,isSelected:D,isToday:b,isDisabled:a.minDate&&k<a.minDate||a.maxDate&&k>a.maxDate||a.disableWeekends&&O._isWeekend(k)||a.disableDayFn&&a.disableDayFn(k),isEmpty:M,isStartRange:E,isEndRange:T,isInRange:x,showDaysInNextAndPreviousMonths:a.showDaysInNextAndPreviousMonths};l.push(this.renderDay(B)),7==++g&&(r.push(this.renderRow(l,a.isRTL,f)),g=0,f=!(l=[]))}return this.renderTable(a,r,n)}},{key:"renderDay",value:function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,n){return'<tr class="pika-row'+(n?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,n=[];for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(e,t,n,a,i,s){var o,r,l=void 0,d=void 0,h=void 0,u=this.options,c=n===u.minYear,p=n===u.maxYear,y='<div id="'+s+'" class="datepicker-controls" role="heading" aria-live="assertive">',v=!0,f=!0;for(h=[],l=0;l<12;l++)h.push('<option value="'+(n===i?l-t:12+l-t)+'"'+(l===a?' selected="selected"':"")+(c&&l<u.minMonth||p&&l>u.maxMonth?'disabled="disabled"':"")+">"+u.i18n.months[l]+"</option>");for(o='<select class="pika-select pika-select-month" tabindex="-1">'+h.join("")+"</select>",m.isArray(u.yearRange)?(l=u.yearRange[0],d=u.yearRange[1]+1):(l=n-u.yearRange,d=1+n+u.yearRange),h=[];l<d&&l<=u.maxYear;l++)l>=u.minYear&&h.push('<option value="'+l+'"'+(l===n?' selected="selected"':"")+">"+l+"</option>");r='<select class="pika-select pika-select-year" tabindex="-1">'+h.join("")+"</select>";y+='<button class="month-prev'+(v?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',y+='<div class="selects-container">',u.showMonthAfterYear?y+=r+o:y+=o+r,y+="</div>",c&&(0===a||u.minMonth>=a)&&(v=!1),p&&(11===a||u.maxMonth<=a)&&(f=!1);return(y+='<button class="month-next'+(f?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,n=this.options,a=n.minYear,i=n.maxYear,s=n.minMonth,o=n.maxMonth,r="";this._y<=a&&(this._y=a,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=i&&(this._y=i,!isNaN(o)&&this._m>o&&(this._m=o)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var l=0;l<1;l++)this._renderDateDisplay(),r+=this.renderTitle(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,t)+this.render(this.calendars[l].year,this.calendars[l].month,t);this.destroySelects(),this.calendarEl.innerHTML=r;var d=this.calendarEl.querySelector(".pika-select-year"),h=this.calendarEl.querySelector(".pika-select-month");M.FormSelect.init(d,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(h,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),d.addEventListener("change",this._handleYearChange.bind(this)),h.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=m(O._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".pika-single"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(e){if(this.isOpen){var t=m(e.target);t.hasClass("is-disabled")||(!t.hasClass("datepicker-day-button")||t.hasClass("is-empty")||t.parent().hasClass("is-disabled")?t.closest(".month-prev").length?this.prevMonth():t.closest(".month-next").length&&this.nextMonth():this.setDate(new Date(e.target.getAttribute("data-pika-year"),e.target.getAttribute("data-pika-month"),e.target.getAttribute("data-pika-day"))))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),O._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,n){for(t+=e.firstDay;7<=t;)t-=7;return n?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return _get(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){O._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,O._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){O._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),O}();e._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="pika-single"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"datepicker","M_Datepicker")}(cash);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGVwaWNrZXIuanMiXSwibmFtZXMiOlsiJCIsIl9kZWZhdWx0cyIsImZvcm1hdCIsInBhcnNlIiwiZGVmYXVsdERhdGUiLCJzZXREZWZhdWx0RGF0ZSIsImRpc2FibGVXZWVrZW5kcyIsImRpc2FibGVEYXlGbiIsImZpcnN0RGF5IiwibWluRGF0ZSIsIm1heERhdGUiLCJ5ZWFyUmFuZ2UiLCJtYXhZZWFyIiwibWluTW9udGgiLCJ1bmRlZmluZWQiLCJzdGFydFJhbmdlIiwibWluWWVhciIsIm1heE1vbnRoIiwiZW5kUmFuZ2UiLCJpMThuIiwiY2FuY2VsIiwic2hvd01vbnRoQWZ0ZXJZZWFyIiwiZG9uZSIsInByZXZpb3VzTW9udGgiLCJzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzIiwibW9udGhzIiwibW9udGhzU2hvcnQiLCJjb250YWluZXIiLCJ3ZWVrZGF5c1Nob3J0Iiwid2Vla2RheXNBYmJyZXYiLCJuZXh0TW9udGgiLCJldmVudHMiLCJfQ29tcG9uZW50IiwiRGF0ZXBpY2tlciIsImVsIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJjYWxsIiwiTV9EYXRlcGlja2VyIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJoYXNPd25Qcm9wZXJ0eSIsIl90eXBlb2YiLCJzZXRIb3VycyIsImlkIiwiTSIsImd1aWQiLCJfc2V0dXBWYXJpYWJsZXMiLCJfaW5zZXJ0SFRNTEludG9ET00iLCJfc2V0dXBNb2RhbCIsIl9zZXR1cEV2ZW50SGFuZGxlcnMiLCJEYXRlIiwidmFsdWUiLCJkZWZEYXRlIiwic2V0RGF0ZSIsImdvdG9EYXRlIiwiX2luaGVyaXRzIiwiQ29tcG9uZW50IiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLCJtb2RhbCIsImNhbmNlbEJ0biIsIm1vZGFsRWwiLCJyZW1vdmUiLCJkZXN0cm95U2VsZWN0cyIsImFwcGVuZFRvIiwib2xkWWVhclNlbGVjdCIsImNhbGVuZGFyRWwiLCJxdWVyeVNlbGVjdG9yIiwiRm9ybVNlbGVjdCIsImdldEluc3RhbmNlIiwiZGVzdHJveSIsIm9sZE1vbnRoU2VsZWN0Iiwic2hvd0NsZWFyQnRuIiwiY2xlYXJCdG4iLCJjc3MiLCJ2aXNpYmlsaXR5IiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJkYXRlIiwiJG1vZGFsRWwiLCJmb3JtYXRzIiwiX3RoaXMyIiwiZm9ybWF0dGVkRGF0ZSIsIk1vZGFsIiwiaW5pdCIsIm9uQ2xvc2VFbmQiLCJpc09wZW4iLCJfdGhpczMiLCJzcGxpdCIsIm1hcCIsImxhYmVsIiwibWluIiwicHJldmVudE9uU2VsZWN0IiwiX3JlbmRlckRhdGVEaXNwbGF5IiwiZHJhdyIsIl9pc0RhdGUiLCJvblNlbGVjdCIsIm1heCIsInRyaWdnZXIiLCJmaXJlZEJ5IiwieWVhclRleHRFbCIsImRpc3BsYXlEYXRlIiwiZGF0ZVRleHRFbCIsInRvU3RyaW5nIiwiJGVsIiwiZGF5IiwiZ2V0RGF5IiwibW9udGgiLCJjYWxlbmRhcnMiLCJnZXRNb250aCIsImZpcnN0VmlzaWJsZURhdGUiLCJsYXN0VmlzaWJsZURhdGUiLCJ2aXNpYmxlRGF0ZSIsImdldFRpbWUiLCJuZXdDYWxlbmRhciIsInllYXIiLCJsZW5ndGgiLCJzZXRNb250aCIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsImFkanVzdENhbGVuZGFycyIsImFkanVzdENhbGVuZGFyIiwiY2FsZW5kYXIiLCJNYXRoIiwiY2VpbCIsImFicyIsIl9zZXRUb1N0YXJ0T2ZEYXkiLCJiZWZvcmUiLCJyYW5kSWQiLCJvcHRzIiwibm93IiwiZGF5cyIsImRhdGEiLCJ5ZWFyT2ZQcmV2aW91c01vbnRoIiwicm93IiwieWVhck9mTmV4dE1vbnRoIiwiZGF5c0luUHJldmlvdXNNb250aCIsImNlbGxzIiwiYWZ0ZXIiLCJpc1dlZWtTZWxlY3RlZCIsImkiLCJfY29tcGFyZURhdGVzIiwiaGFzRXZlbnQiLCJpc0VtcHR5IiwiZGF5TnVtYmVyIiwibW9udGhOdW1iZXIiLCJpc1N0YXJ0UmFuZ2UiLCJpc0luUmFuZ2UiLCJpc0Rpc2FibGVkIiwiaXNTZWxlY3RlZCIsImlzVG9kYXkiLCJpbmRleE9mIiwidG9EYXRlU3RyaW5nIiwieWVhck51bWJlciIsImlzRW5kUmFuZ2UiLCJkYXlDb25maWciLCJwdXNoIiwiciIsIl9pc1dlZWtlbmQiLCJyZW5kZXJUYWJsZSIsImFyciIsInJlbmRlckRheSIsImFyaWFTZWxlY3RlZCIsImpvaW4iLCJpc1JUTCIsImlzUm93U2VsZWN0ZWQiLCJyZXZlcnNlIiwicmVuZGVySGVhZCIsImluc3RhbmNlIiwiaXNNaW5ZZWFyIiwiaXNNYXhZZWFyIiwiaHRtbCIsInJlbmRlckRheU5hbWUiLCJtb250aEh0bWwiLCJwcmV2Iiwicm93cyIsImMiLCJyZWZZZWFyIiwiaiIsImlzQXJyYXkiLCJuZXh0IiwibGVmdEFycm93IiwieWVhckh0bWwiLCJmb3JjZSIsIl95IiwiX20iLCJ5ZWFyU2VsZWN0IiwibW9udGhTZWxlY3QiLCJhZGRFdmVudExpc3RlbmVyIiwicmFuZG9tIiwiX2hhbmRsZVllYXJDaGFuZ2UiLCJzdWJzdHIiLCJyZW5kZXJUaXRsZSIsInJlbmRlciIsIl9oYW5kbGVJbnB1dENsaWNrQm91bmQiLCJfZmluaXNoU2VsZWN0aW9uQm91bmQiLCJfZmluaXNoU2VsZWN0aW9uIiwiX2hhbmRsZU1vbnRoQ2hhbmdlIiwiX2Nsb3NlQm91bmQiLCJjbG9zZSIsImNsYXNzZXMiLCJkcm9wZG93bk9wdGlvbnMiLCJkb2N1bWVudCIsImJvZHkiLCJjb25zdHJhaW5XaWR0aCIsIl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kIiwiX2hhbmRsZUNhbGVuZGFyQ2xpY2tCb3VuZCIsIm9uRHJhdyIsIl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCIsIl9oYW5kbGVJbnB1dEtleWRvd24iLCJiaW5kIiwiX2hhbmRsZUlucHV0Q2xpY2siLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FsZW5kYXJDbGljayIsImRvbmVCdG4iLCJfaGFuZGxlQ2xlYXJDbGlja0JvdW5kIiwiX2hhbmRsZUNsZWFyQ2xpY2siLCJkIiwiX3RoaXM0IiwiZGRkZCIsIm0iLCJtbSIsIm1tbSIsIm1tbW0iLCJkZGQiLCJ3ZWVrZGF5cyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ5eSIsInNsaWNlIiwieXl5eSIsIm9wZW4iLCJoYXNDbGFzcyIsImUiLCJ3aGljaCIsImtleXMiLCJwcmV2ZW50RGVmYXVsdCIsIiR0YXJnZXQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJjbG9zZXN0IiwicHJldk1vbnRoIiwic2V0SW5wdXRWYWx1ZSIsImdldEF0dHJpYnV0ZSIsImdvdG9Nb250aCIsImdvdG9ZZWFyIiwiaXNOYU4iLCJwYXJzZUludCIsImFiYnIiLCJvbk9wZW4iLCJvbkNsb3NlIiwiZWxzIiwiX2dldCIsIm9iaiIsInRlc3QiLCJwcm90b3R5cGUiLCJfaXNMZWFwWWVhciIsImEiLCJiIiwianF1ZXJ5IiwiZ2V0IiwialF1ZXJ5TG9hZGVkIiwiaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIiLCJjYXNoIl0sIm1hcHBpbmdzIjoiODBDQUFBLFNBQVVBLEdBR1IsSUFBSUMsRUFBWSxDQUdkQyxPQUFRLGVBR1JDLE1BQU8sS0FHUEMsWUFBYSxLQVhmQyxnQkFBQSxFQUVBQyxpQkFBZ0IsRUFFZEMsYUFBQSxLQUdBQyxTQUFBLEVBR0FDLFFBQUEsS0FnQkFDLFFBQVMsS0FHVEMsVUFBVyxHQVhYSixRQUFBQSxFQWVBSyxRQUFTLEtBYlRDLGNBQUFDLEVBQ0FOLGNBQVVNLEVBRVZDLFdBQUEsS0FDQU4sU0FBUyxLQUVUQyxPQUFBQSxFQUdBQyxvQkEzQmMsRUE4QmRLLGlDQTlCYyxFQWlDZEMsVUFBVUgsS0FHVkksY0FwQ2MsRUFxRGRDLEtBQU0sQ0FiTkMsT0FBQSxTQUNBQyxNQUFBQSxRQWVFQyxLQUFNLEtBYlJDLGNBQUEsSUFDQUMsVUFBQUEsSUFlRUMsT0FBZ0IsQ0FBQyxVQUFVLFdBQVcsUUFBUSxRQUFRLE1B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QUFBLEVBQUEsS0FBQSxDQUFBZ0IsSUFBQSxrQkFBQVAsTUFBQSxTQTZMVGlFLEVBQUFSLEdBekJFLE1BQU8sQ0FBQyxHQUFJbEYsRUFBV3NPLFlBQVk1SSxHQUFRLEdBQUssR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUFJUixLQXBLckYsQ0FBQWxELElBQUEsY0FBQVAsTUFBQSxTQWlNRlEsR0FFTGxFLE9BQUUySCxFQUFLdEQsR0FBU0MsR0FBaEJxRCxFQUFBLEtBQUEsR0FBQUEsRUFBQSxLQUFBLElBbk1PLENBQUExRCxJQUFBLGdCQUFBUCxNQUFBLFNBc01SOE0sRUFBQUMsR0F0TVEsT0FBQUQsRUFBQS9JLFlBQUFnSixFQUFBaEosWUFBQSxDQUFBeEQsSUFBQSxtQkFBQVAsTUFBQSxTQTJNWTRCLEdBQ2pCbkMsRUFBRXlCLFFBQVdDLElBQVlKLEVBQUFBLFNBQWVLLEVBQUFBLEVBQUFBLEVBQUFBLEtBNU1uQyxDQUFBYixJQUFBLGNBQUFQLE1BQUEsU0FrTlJ4QixHQWxOUSxPQUFBQSxFQUFBd08sT0FBQXhPLEVBQUEsR0FBQUEsR0FBQVUsZUFBQSxDQUFBcUIsSUFBQSxXQUFBME0sSUFBQSxXQTZISixPQUZEMVEsTUEzSEtnQyxFQUFBLEdBQUFBLEVBQUEyTCxVQUFBLENBQUEsd0NBdUpQLG1EQUFBLHdDQUNELGtDQXhKUSxrQ0FBQSxTQUFBLDhDQTJKUCxrQ0FDQSxrQ0FDRCw2R0E3SlEsa0NBQUEsa0ZBQUEsZ0ZBZ0tIM0wsU0FDTCxTQWpLUSxTQUFBLFNBQUEsVUFvS1AwSSxLQUFBLElBcEtPeEgsRUFBQWxCLFdBQUFBLEVBQUFrQixFQUFBeU4sY0F3S1B6TixFQUFBME4sd0JBQUE1TyxFQUFBLGFBQUEsZ0JBeEtOLENBQWE2TyIsImZpbGUiOiJkYXRlcGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGxldCBfZGVmYXVsdHMgPSB7XG5cbiAgICAvLyB0aGUgZGVmYXVsdCBvdXRwdXQgZm9ybWF0IGZvciB0aGUgaW5wdXQgZmllbGQgdmFsdWVcbiAgICBmb3JtYXQ6ICdtbW0gZGQsIHl5eXknLFxuXG4gICAgLy8gVXNlZCB0byBjcmVhdGUgZGF0ZSBvYmplY3QgZnJvbSBjdXJyZW50IGlucHV0IHN0cmluZ1xuICAgIHBhcnNlOiBudWxsLFxuXG4gICAgLy8gVGhlIGluaXRpYWwgZGF0ZSB0byB2aWV3IHdoZW4gZmlyc3Qgb3BlbmVkXG4gICAgZGVmYXVsdERhdGU6IG51bGwsXG5cbiAgICAvLyBNYWtlIHRoZSBgZGVmYXVsdERhdGVgIHRoZSBpbml0aWFsIHNlbGVjdGVkIHZhbHVlXG4gICAgc2V0RGVmYXVsdERhdGU6IGZhbHNlLFxuXG4gICAgZGlzYWJsZVdlZWtlbmRzOiBmYWxzZSxcblxuICAgIGRpc2FibGVEYXlGbjogbnVsbCxcblxuICAgIC8vIEZpcnN0IGRheSBvZiB3ZWVrICgwOiBTdW5kYXksIDE6IE1vbmRheSBldGMpXG4gICAgZmlyc3REYXk6IDAsXG5cbiAgICAvLyBUaGUgZWFybGllc3QgZGF0ZSB0aGF0IGNhbiBiZSBzZWxlY3RlZFxuICAgIG1pbkRhdGU6IG51bGwsXG4gICAgLy8gVGhlbGF0ZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICBtYXhEYXRlOiBudWxsLFxuXG4gICAgLy8gTnVtYmVyIG9mIHllYXJzIGVpdGhlciBzaWRlLCBvciBhcnJheSBvZiB1cHBlci9sb3dlciByYW5nZVxuICAgIHllYXJSYW5nZTogMTAsXG5cbiAgICAvLyB1c2VkIGludGVybmFsbHkgKGRvbid0IGNvbmZpZyBvdXRzaWRlKVxuICAgIG1pblllYXI6IDAsXG4gICAgbWF4WWVhcjogOTk5OSxcbiAgICBtaW5Nb250aDogdW5kZWZpbmVkLFxuICAgIG1heE1vbnRoOiB1bmRlZmluZWQsXG5cbiAgICBzdGFydFJhbmdlOiBudWxsLFxuICAgIGVuZFJhbmdlOiBudWxsLFxuXG4gICAgaXNSVEw6IGZhbHNlLFxuXG4gICAgLy8gUmVuZGVyIHRoZSBtb250aCBhZnRlciB5ZWFyIGluIHRoZSBjYWxlbmRhciB0aXRsZVxuICAgIHNob3dNb250aEFmdGVyWWVhcjogZmFsc2UsXG5cbiAgICAvLyBSZW5kZXIgZGF5cyBvZiB0aGUgY2FsZW5kYXIgZ3JpZCB0aGF0IGZhbGwgaW4gdGhlIG5leHQgb3IgcHJldmlvdXMgbW9udGhcbiAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBmYWxzZSxcblxuICAgIC8vIFNwZWNpZnkgYSBET00gZWxlbWVudCB0byByZW5kZXIgdGhlIGNhbGVuZGFyIGluXG4gICAgY29udGFpbmVyOiBudWxsLFxuXG4gICAgLy8gU2hvdyBjbGVhciBidXR0b25cbiAgICBzaG93Q2xlYXJCdG46IGZhbHNlLFxuXG4gICAgLy8gaW50ZXJuYXRpb25hbGl6YXRpb25cbiAgICBpMThuOiB7XG4gICAgICBjYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgY2xlYXI6ICdDbGVhcicsXG4gICAgICBkb25lOiAnT2snLFxuICAgICAgcHJldmlvdXNNb250aCA6ICfigLknLFxuICAgICAgbmV4dE1vbnRoICAgICA6ICfigLonLFxuICAgICAgbW9udGhzICAgICAgICA6IFsnSmFudWFyeScsJ0ZlYnJ1YXJ5JywnTWFyY2gnLCdBcHJpbCcsJ01heScsJ0p1bmUnLCdKdWx5JywnQXVndXN0JywnU2VwdGVtYmVyJywnT2N0b2JlcicsJ05vdmVtYmVyJywnRGVjZW1iZXInXSxcbiAgICAgIG1vbnRoc1Nob3J0ICAgOiBbJ0phbicsJ0ZlYicsJ01hcicsJ0FwcicsJ01heScsJ0p1bicsJ0p1bCcsJ0F1ZycsJ1NlcCcsJ09jdCcsJ05vdicsJ0RlYyddLFxuICAgICAgd2Vla2RheXMgICAgICA6IFsnU3VuZGF5JywnTW9uZGF5JywnVHVlc2RheScsJ1dlZG5lc2RheScsJ1RodXJzZGF5JywnRnJpZGF5JywnU2F0dXJkYXknXSxcbiAgICAgIHdlZWtkYXlzU2hvcnQgOiBbJ1N1bicsJ01vbicsJ1R1ZScsJ1dlZCcsJ1RodScsJ0ZyaScsJ1NhdCddLFxuICAgICAgd2Vla2RheXNBYmJyZXYgOiBbJ1MnLCdNJywnVCcsJ1cnLCdUJywnRicsJ1MnXVxuICAgIH0sXG5cbiAgICAvLyBldmVudHMgYXJyYXlcbiAgICBldmVudHM6IFtdLFxuXG4gICAgLy8gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICBvblNlbGVjdDogbnVsbCxcbiAgICBvbk9wZW46IG51bGwsXG4gICAgb25DbG9zZTogbnVsbCxcbiAgICBvbkRyYXc6IG51bGwsXG4gIH07XG5cblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuICBjbGFzcyBEYXRlcGlja2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgRGF0ZXBpY2tlciBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgICAgc3VwZXIoRGF0ZXBpY2tlciwgZWwsIG9wdGlvbnMpO1xuXG4gICAgICB0aGlzLmVsLk1fRGF0ZXBpY2tlciA9IHRoaXM7XG5cbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBEYXRlcGlja2VyLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gbWFrZSBzdXJlIGkxOG4gZGVmYXVsdHMgYXJlIG5vdCBsb3N0IHdoZW4gb25seSBmZXcgaTE4biBvcHRpb24gcHJvcGVydGllcyBhcmUgcGFzc2VkXG4gICAgICBpZighIW9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaTE4bicpICYmIHR5cGVvZiBvcHRpb25zLmkxOG4gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICB0aGlzLm9wdGlvbnMuaTE4biA9ICQuZXh0ZW5kKHt9LCBEYXRlcGlja2VyLmRlZmF1bHRzLmkxOG4sIG9wdGlvbnMuaTE4bik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aW1lIGNvbXBvbmVudCBmcm9tIG1pbkRhdGUgYW5kIG1heERhdGUgb3B0aW9uc1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5taW5EYXRlKSB0aGlzLm9wdGlvbnMubWluRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubWF4RGF0ZSkgdGhpcy5vcHRpb25zLm1heERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgIHRoaXMuaWQgPSBNLmd1aWQoKTtcblxuICAgICAgdGhpcy5fc2V0dXBWYXJpYWJsZXMoKTtcbiAgICAgIHRoaXMuX2luc2VydEhUTUxJbnRvRE9NKCk7XG4gICAgICB0aGlzLl9zZXR1cE1vZGFsKCk7XG5cbiAgICAgIHRoaXMuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5kZWZhdWx0RGF0ZSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMuZGVmYXVsdERhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHRoaXMuZWwudmFsdWUpKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnNldERlZmF1bHREYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGRlZkRhdGUgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdERhdGU7XG5cbiAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGVmRGF0ZSkpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zZXREZWZhdWx0RGF0ZSkge1xuICAgICAgICAgIHRoaXMuc2V0RGF0ZShkZWZEYXRlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLmdvdG9EYXRlKGRlZkRhdGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdvdG9EYXRlKG5ldyBEYXRlKCkpO1xuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIG9wZW4vY2xvc2Ugc3RhdGUgb2YgZGF0ZXBpY2tlclxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRzKCkge1xuICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICB9XG5cbiAgICBzdGF0aWMgaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBzdXBlci5pbml0KHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgc3RhdGljIF9pc0RhdGUob2JqKSB7XG4gICAgICByZXR1cm4gKC9EYXRlLykudGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgJiYgIWlzTmFOKG9iai5nZXRUaW1lKCkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBfaXNXZWVrZW5kKGRhdGUpIHtcbiAgICAgIGxldCBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgcmV0dXJuIGRheSA9PT0gMCB8fCBkYXkgPT09IDY7XG4gICAgfVxuXG4gICAgc3RhdGljIF9zZXRUb1N0YXJ0T2ZEYXkoZGF0ZSkge1xuICAgICAgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShkYXRlKSkgZGF0ZS5zZXRIb3VycygwLDAsMCwwKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgICByZXR1cm4gWzMxLCBEYXRlcGlja2VyLl9pc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vbnRoXTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2lzTGVhcFllYXIoeWVhcikge1xuICAgICAgLy8gc29sdXRpb24gYnkgTWF0dGkgVmlya2t1bmVuOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODgxOTUxXG4gICAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwO1xuICAgIH1cblxuICAgIHN0YXRpYyBfY29tcGFyZURhdGVzKGEsYikge1xuICAgICAgLy8gd2VhayBkYXRlIGNvbXBhcmlzb24gKHVzZSBzZXRUb1N0YXJ0T2ZEYXkoZGF0ZSkgdG8gZW5zdXJlIGNvcnJlY3QgcmVzdWx0KVxuICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX3NldFRvU3RhcnRPZkRheShkYXRlKSB7XG4gICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSBkYXRlLnNldEhvdXJzKDAsMCwwLDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgbGV0IGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICByZXR1cm4gZG9tRWxlbS5NX0RhdGVwaWNrZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHRoaXMubW9kYWwuZGVzdHJveSgpO1xuICAgICAgJCh0aGlzLm1vZGFsRWwpLnJlbW92ZSgpO1xuICAgICAgdGhpcy5kZXN0cm95U2VsZWN0cygpO1xuICAgICAgdGhpcy5lbC5NX0RhdGVwaWNrZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG5cbiAgICBkZXN0cm95U2VsZWN0cygpIHtcbiAgICAgIGxldCBvbGRZZWFyU2VsZWN0ID0gdGhpcy5jYWxlbmRhckVsLnF1ZXJ5U2VsZWN0b3IoJy5waWthLXNlbGVjdC15ZWFyJyk7XG4gICAgICBpZiAob2xkWWVhclNlbGVjdCkge1xuICAgICAgICBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2Uob2xkWWVhclNlbGVjdCkuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgbGV0IG9sZE1vbnRoU2VsZWN0ID0gdGhpcy5jYWxlbmRhckVsLnF1ZXJ5U2VsZWN0b3IoJy5waWthLXNlbGVjdC1tb250aCcpO1xuICAgICAgaWYgKG9sZE1vbnRoU2VsZWN0KSB7XG4gICAgICAgIE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShvbGRNb250aFNlbGVjdCkuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgX2luc2VydEhUTUxJbnRvRE9NKCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHtcbiAgICAgICAgJCh0aGlzLmNsZWFyQnRuKS5jc3Moe3Zpc2liaWxpdHk6ICcnfSk7XG4gICAgICAgIHRoaXMuY2xlYXJCdG4uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmkxOG4uY2xlYXI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZG9uZUJ0bi5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaTE4bi5kb25lO1xuICAgICAgdGhpcy5jYW5jZWxCdG4uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmkxOG4uY2FuY2VsO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLiRtb2RhbEVsLmFwcGVuZFRvKHRoaXMub3B0aW9ucy5jb250YWluZXIpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRtb2RhbEVsLmluc2VydEJlZm9yZSh0aGlzLmVsKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIF9zZXR1cE1vZGFsKCkge1xuICAgICAgdGhpcy5tb2RhbEVsLmlkID0gJ21vZGFsLScgKyB0aGlzLmlkO1xuICAgICAgdGhpcy5tb2RhbCA9IE0uTW9kYWwuaW5pdCh0aGlzLm1vZGFsRWwsIHtcbiAgICAgICAgb25DbG9zZUVuZDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKGZvcm1hdCkge1xuICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5mb3JtYXQ7XG4gICAgICBpZiAoIURhdGVwaWNrZXIuX2lzRGF0ZSh0aGlzLmRhdGUpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgbGV0IGZvcm1hdEFycmF5ID0gZm9ybWF0LnNwbGl0KCAvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyApO1xuICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXRBcnJheS5tYXAoKGxhYmVsKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdHNbbGFiZWxdKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0c1tsYWJlbF0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgIH0pLmpvaW4oICcnICk7XG4gICAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcbiAgICB9XG5cbiAgICBzZXREYXRlKGRhdGUsIHByZXZlbnRPblNlbGVjdCkge1xuICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlbmRlckRhdGVEaXNwbGF5KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRyYXcoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UoZGF0ZSkpO1xuICAgICAgfVxuICAgICAgaWYgKCFEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgbWluID0gdGhpcy5vcHRpb25zLm1pbkRhdGUsXG4gICAgICAgICAgbWF4ID0gdGhpcy5vcHRpb25zLm1heERhdGU7XG5cbiAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUobWluKSAmJiBkYXRlIDwgbWluKSB7XG4gICAgICAgIGRhdGUgPSBtaW47XG4gICAgICB9IGVsc2UgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShtYXgpICYmIGRhdGUgPiBtYXgpIHtcbiAgICAgICAgZGF0ZSA9IG1heDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuXG4gICAgICB0aGlzLl9yZW5kZXJEYXRlRGlzcGxheSgpO1xuXG4gICAgICBEYXRlcGlja2VyLl9zZXRUb1N0YXJ0T2ZEYXkodGhpcy5kYXRlKTtcbiAgICAgIHRoaXMuZ290b0RhdGUodGhpcy5kYXRlKTtcblxuICAgICAgaWYgKCFwcmV2ZW50T25TZWxlY3QgJiYgdHlwZW9mIHRoaXMub3B0aW9ucy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25TZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmRhdGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldElucHV0VmFsdWUoKSB7XG4gICAgICB0aGlzLmVsLnZhbHVlID0gdGhpcy50b1N0cmluZygpO1xuICAgICAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJywge2ZpcmVkQnk6IHRoaXN9KTtcbiAgICB9XG5cbiAgICBfcmVuZGVyRGF0ZURpc3BsYXkoKSB7XG4gICAgICBsZXQgZGlzcGxheURhdGUgPSBEYXRlcGlja2VyLl9pc0RhdGUodGhpcy5kYXRlKSA/IHRoaXMuZGF0ZSA6IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgaTE4biA9IHRoaXMub3B0aW9ucy5pMThuO1xuICAgICAgbGV0IGRheSA9IGkxOG4ud2Vla2RheXNTaG9ydFtkaXNwbGF5RGF0ZS5nZXREYXkoKV07XG4gICAgICBsZXQgbW9udGggPSBpMThuLm1vbnRoc1Nob3J0W2Rpc3BsYXlEYXRlLmdldE1vbnRoKCldO1xuICAgICAgbGV0IGRhdGUgPSBkaXNwbGF5RGF0ZS5nZXREYXRlKCk7XG4gICAgICB0aGlzLnllYXJUZXh0RWwuaW5uZXJIVE1MID0gZGlzcGxheURhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIHRoaXMuZGF0ZVRleHRFbC5pbm5lckhUTUwgPSBgJHtkYXl9LCAke21vbnRofSAke2RhdGV9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIGRhdGVcbiAgICAgKi9cbiAgICBnb3RvRGF0ZShkYXRlKSB7XG4gICAgICBsZXQgbmV3Q2FsZW5kYXIgPSB0cnVlO1xuXG4gICAgICBpZiAoIURhdGVwaWNrZXIuX2lzRGF0ZShkYXRlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNhbGVuZGFycykge1xuICAgICAgICBsZXQgZmlyc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLCAxKSxcbiAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aC0xXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1t0aGlzLmNhbGVuZGFycy5sZW5ndGgtMV0ubW9udGgsIDEpLFxuICAgICAgICAgICAgdmlzaWJsZURhdGUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgLy8gZ2V0IHRoZSBlbmQgb2YgdGhlIG1vbnRoXG4gICAgICAgIGxhc3RWaXNpYmxlRGF0ZS5zZXRNb250aChsYXN0VmlzaWJsZURhdGUuZ2V0TW9udGgoKSsxKTtcbiAgICAgICAgbGFzdFZpc2libGVEYXRlLnNldERhdGUobGFzdFZpc2libGVEYXRlLmdldERhdGUoKS0xKTtcbiAgICAgICAgbmV3Q2FsZW5kYXIgPSAodmlzaWJsZURhdGUgPCBmaXJzdFZpc2libGVEYXRlLmdldFRpbWUoKSB8fCBsYXN0VmlzaWJsZURhdGUuZ2V0VGltZSgpIDwgdmlzaWJsZURhdGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3Q2FsZW5kYXIpIHtcbiAgICAgICAgdGhpcy5jYWxlbmRhcnMgPSBbe1xuICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksXG4gICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgICAgIH1dO1xuICAgICAgICAvLyBpZiAodGhpcy5vcHRpb25zLm1haW5DYWxlbmRhciA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAvLyAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoICs9IDEgLSB0aGlzLm9wdGlvbnMubnVtYmVyT2ZNb250aHM7XG4gICAgICAgIC8vIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICB9XG5cbiAgICBhZGp1c3RDYWxlbmRhcnMoKSB7XG4gICAgICB0aGlzLmNhbGVuZGFyc1swXSA9IHRoaXMuYWRqdXN0Q2FsZW5kYXIodGhpcy5jYWxlbmRhcnNbMF0pO1xuICAgICAgLy8gZm9yIChsZXQgYyA9IDE7IGMgPCB0aGlzLm9wdGlvbnMubnVtYmVyT2ZNb250aHM7IGMrKykge1xuICAgICAgLy8gICB0aGlzLmNhbGVuZGFyc1tjXSA9IHRoaXMuYWRqdXN0Q2FsZW5kYXIoe1xuICAgICAgLy8gICAgIG1vbnRoOiB0aGlzLmNhbGVuZGFyc1swXS5tb250aCArIGMsXG4gICAgICAvLyAgICAgeWVhcjogdGhpcy5jYWxlbmRhcnNbMF0ueWVhclxuICAgICAgLy8gICB9KTtcbiAgICAgIC8vIH1cbiAgICAgIHRoaXMuZHJhdygpO1xuICAgIH1cblxuICAgIGFkanVzdENhbGVuZGFyKGNhbGVuZGFyKSB7XG4gICAgICBpZiAoY2FsZW5kYXIubW9udGggPCAwKSB7XG4gICAgICAgIGNhbGVuZGFyLnllYXIgLT0gTWF0aC5jZWlsKE1hdGguYWJzKGNhbGVuZGFyLm1vbnRoKS8xMik7XG4gICAgICAgIGNhbGVuZGFyLm1vbnRoICs9IDEyO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGVuZGFyLm1vbnRoID4gMTEpIHtcbiAgICAgICAgY2FsZW5kYXIueWVhciArPSBNYXRoLmZsb29yKE1hdGguYWJzKGNhbGVuZGFyLm1vbnRoKS8xMik7XG4gICAgICAgIGNhbGVuZGFyLm1vbnRoIC09IDEyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuICAgIH1cblxuICAgIG5leHRNb250aCgpIHtcbiAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoKys7XG4gICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgIH1cblxuICAgIHByZXZNb250aCgpIHtcbiAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLS07XG4gICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgIH1cblxuICAgIHJlbmRlcih5ZWFyLCBtb250aCwgcmFuZElkKSB7XG4gICAgICBsZXQgb3B0cyAgID0gdGhpcy5vcHRpb25zLFxuICAgICAgICAgIG5vdyAgICA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgZGF5cyAgID0gRGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpLFxuICAgICAgICAgIGJlZm9yZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSxcbiAgICAgICAgICBkYXRhICAgPSBbXSxcbiAgICAgICAgICByb3cgICAgPSBbXTtcbiAgICAgIERhdGVwaWNrZXIuX3NldFRvU3RhcnRPZkRheShub3cpO1xuICAgICAgaWYgKG9wdHMuZmlyc3REYXkgPiAwKSB7XG4gICAgICAgIGJlZm9yZSAtPSBvcHRzLmZpcnN0RGF5O1xuICAgICAgICBpZiAoYmVmb3JlIDwgMCkge1xuICAgICAgICAgIGJlZm9yZSArPSA3O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgcHJldmlvdXNNb250aCA9IG1vbnRoID09PSAwID8gMTEgOiBtb250aCAtIDEsXG4gICAgICAgICAgbmV4dE1vbnRoID0gbW9udGggPT09IDExID8gMCA6IG1vbnRoICsgMSxcbiAgICAgICAgICB5ZWFyT2ZQcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyB5ZWFyIC0gMSA6IHllYXIsXG4gICAgICAgICAgeWVhck9mTmV4dE1vbnRoID0gbW9udGggPT09IDExID8geWVhciArIDEgOiB5ZWFyLFxuICAgICAgICAgIGRheXNJblByZXZpb3VzTW9udGggPSBEYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5ZWFyT2ZQcmV2aW91c01vbnRoLCBwcmV2aW91c01vbnRoKTtcbiAgICAgIGxldCBjZWxscyA9IGRheXMgKyBiZWZvcmUsXG4gICAgICAgICAgYWZ0ZXIgPSBjZWxscztcbiAgICAgIHdoaWxlKGFmdGVyID4gNykge1xuICAgICAgICBhZnRlciAtPSA3O1xuICAgICAgfVxuICAgICAgY2VsbHMgKz0gNyAtIGFmdGVyO1xuICAgICAgbGV0IGlzV2Vla1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICBmb3IgKGxldCBpID0gMCwgciA9IDA7IGkgPCBjZWxsczsgaSsrKSB7XG4gICAgICAgIGxldCBkYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSArIChpIC0gYmVmb3JlKSksXG4gICAgICAgICAgICBpc1NlbGVjdGVkID0gRGF0ZXBpY2tlci5faXNEYXRlKHRoaXMuZGF0ZSkgPyBEYXRlcGlja2VyLl9jb21wYXJlRGF0ZXMoZGF5LCB0aGlzLmRhdGUpIDogZmFsc2UsXG4gICAgICAgICAgICBpc1RvZGF5ID0gRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKGRheSwgbm93KSxcbiAgICAgICAgICAgIGhhc0V2ZW50ID0gb3B0cy5ldmVudHMuaW5kZXhPZihkYXkudG9EYXRlU3RyaW5nKCkpICE9PSAtMSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRW1wdHkgPSBpIDwgYmVmb3JlIHx8IGkgPj0gKGRheXMgKyBiZWZvcmUpLFxuICAgICAgICAgICAgZGF5TnVtYmVyID0gMSArIChpIC0gYmVmb3JlKSxcbiAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbW9udGgsXG4gICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhcixcbiAgICAgICAgICAgIGlzU3RhcnRSYW5nZSA9IG9wdHMuc3RhcnRSYW5nZSAmJiBEYXRlcGlja2VyLl9jb21wYXJlRGF0ZXMob3B0cy5zdGFydFJhbmdlLCBkYXkpLFxuICAgICAgICAgICAgaXNFbmRSYW5nZSA9IG9wdHMuZW5kUmFuZ2UgJiYgRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKG9wdHMuZW5kUmFuZ2UsIGRheSksXG4gICAgICAgICAgICBpc0luUmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgb3B0cy5lbmRSYW5nZSAmJiBvcHRzLnN0YXJ0UmFuZ2UgPCBkYXkgJiYgZGF5IDwgb3B0cy5lbmRSYW5nZSxcbiAgICAgICAgICAgIGlzRGlzYWJsZWQgPSAob3B0cy5taW5EYXRlICYmIGRheSA8IG9wdHMubWluRGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAob3B0cy5tYXhEYXRlICYmIGRheSA+IG9wdHMubWF4RGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAob3B0cy5kaXNhYmxlV2Vla2VuZHMgJiYgRGF0ZXBpY2tlci5faXNXZWVrZW5kKGRheSkpIHx8XG4gICAgICAgICAgICAgICAgKG9wdHMuZGlzYWJsZURheUZuICYmIG9wdHMuZGlzYWJsZURheUZuKGRheSkpO1xuXG4gICAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgICAgaWYgKGkgPCBiZWZvcmUpIHtcbiAgICAgICAgICAgIGRheU51bWJlciA9IGRheXNJblByZXZpb3VzTW9udGggKyBkYXlOdW1iZXI7XG4gICAgICAgICAgICBtb250aE51bWJlciA9IHByZXZpb3VzTW9udGg7XG4gICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mUHJldmlvdXNNb250aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF5TnVtYmVyID0gZGF5TnVtYmVyIC0gZGF5cztcbiAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbmV4dE1vbnRoO1xuICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXJPZk5leHRNb250aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGF5Q29uZmlnID0ge1xuICAgICAgICAgIGRheTogZGF5TnVtYmVyLFxuICAgICAgICAgIG1vbnRoOiBtb250aE51bWJlcixcbiAgICAgICAgICB5ZWFyOiB5ZWFyTnVtYmVyLFxuICAgICAgICAgIGhhc0V2ZW50OiBoYXNFdmVudCxcbiAgICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgICAgICAgIGlzVG9kYXk6IGlzVG9kYXksXG4gICAgICAgICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICAgICAgICBpc0VtcHR5OiBpc0VtcHR5LFxuICAgICAgICAgIGlzU3RhcnRSYW5nZTogaXNTdGFydFJhbmdlLFxuICAgICAgICAgIGlzRW5kUmFuZ2U6IGlzRW5kUmFuZ2UsXG4gICAgICAgICAgaXNJblJhbmdlOiBpc0luUmFuZ2UsXG4gICAgICAgICAgc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogb3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJvdy5wdXNoKHRoaXMucmVuZGVyRGF5KGRheUNvbmZpZykpO1xuXG4gICAgICAgIGlmICgrK3IgPT09IDcpIHtcbiAgICAgICAgICBkYXRhLnB1c2godGhpcy5yZW5kZXJSb3cocm93LCBvcHRzLmlzUlRMLCBpc1dlZWtTZWxlY3RlZCkpO1xuICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICAgIHIgPSAwO1xuICAgICAgICAgIGlzV2Vla1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnJlbmRlclRhYmxlKG9wdHMsIGRhdGEsIHJhbmRJZCk7XG4gICAgfVxuXG4gICAgcmVuZGVyRGF5KG9wdHMpIHtcbiAgICAgIGxldCBhcnIgPSBbXTtcbiAgICAgIGxldCBhcmlhU2VsZWN0ZWQgPSAnZmFsc2UnO1xuICAgICAgaWYgKG9wdHMuaXNFbXB0eSkge1xuICAgICAgICBpZiAob3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzKSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLW91dHNpZGUtY3VycmVudC1tb250aCcpO1xuICAgICAgICAgIGFyci5wdXNoKCdpcy1zZWxlY3Rpb24tZGlzYWJsZWQnKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPVwiaXMtZW1wdHlcIj48L3RkPic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgYXJyLnB1c2goJ2lzLWRpc2FibGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRzLmlzVG9kYXkpIHtcbiAgICAgICAgYXJyLnB1c2goJ2lzLXRvZGF5Jyk7XG4gICAgICB9XG4gICAgICBpZiAob3B0cy5pc1NlbGVjdGVkKSB7XG4gICAgICAgIGFyci5wdXNoKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgICBhcmlhU2VsZWN0ZWQgPSAndHJ1ZSc7XG4gICAgICB9XG4gICAgICBpZiAob3B0cy5oYXNFdmVudCkge1xuICAgICAgICBhcnIucHVzaCgnaGFzLWV2ZW50Jyk7XG4gICAgICB9XG4gICAgICBpZiAob3B0cy5pc0luUmFuZ2UpIHtcbiAgICAgICAgYXJyLnB1c2goJ2lzLWlucmFuZ2UnKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLmlzU3RhcnRSYW5nZSkge1xuICAgICAgICBhcnIucHVzaCgnaXMtc3RhcnRyYW5nZScpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdHMuaXNFbmRSYW5nZSkge1xuICAgICAgICBhcnIucHVzaCgnaXMtZW5kcmFuZ2UnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAnPHRkIGRhdGEtZGF5PVwiJyArIG9wdHMuZGF5ICsgJ1wiIGNsYXNzPVwiJyArIGFyci5qb2luKCcgJykgKyAnXCIgYXJpYS1zZWxlY3RlZD1cIicgKyBhcmlhU2VsZWN0ZWQgKyAnXCI+JyArXG4gICAgICAgICc8YnV0dG9uIGNsYXNzPVwiZGF0ZXBpY2tlci1kYXktYnV0dG9uXCIgdHlwZT1cImJ1dHRvblwiICcgK1xuICAgICAgICAnZGF0YS1waWthLXllYXI9XCInICsgb3B0cy55ZWFyICsgJ1wiIGRhdGEtcGlrYS1tb250aD1cIicgKyBvcHRzLm1vbnRoICsgJ1wiIGRhdGEtcGlrYS1kYXk9XCInICsgb3B0cy5kYXkgKyAnXCI+JyArXG4gICAgICAgIG9wdHMuZGF5ICtcbiAgICAgICAgJzwvYnV0dG9uPicgK1xuICAgICAgICAnPC90ZD4nO1xuICAgIH1cblxuICAgIHJlbmRlclJvdyhkYXlzLCBpc1JUTCwgaXNSb3dTZWxlY3RlZCkge1xuICAgICAgcmV0dXJuICc8dHIgY2xhc3M9XCJwaWthLXJvdycgKyAoaXNSb3dTZWxlY3RlZCA/ICcgaXMtc2VsZWN0ZWQnIDogJycpICsgJ1wiPicgKyAoaXNSVEwgPyBkYXlzLnJldmVyc2UoKSA6IGRheXMpLmpvaW4oJycpICsgJzwvdHI+JztcbiAgICB9XG5cbiAgICByZW5kZXJUYWJsZShvcHRzLCBkYXRhLCByYW5kSWQpIHtcbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItdGFibGUtd3JhcHBlclwiPjx0YWJsZSBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBjbGFzcz1cImRhdGVwaWNrZXItdGFibGVcIiByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cIicgK1xuICAgICAgICByYW5kSWQgKyAnXCI+JyArXG4gICAgICAgIHRoaXMucmVuZGVySGVhZChvcHRzKSArIHRoaXMucmVuZGVyQm9keShkYXRhKSArICc8L3RhYmxlPjwvZGl2Pic7XG4gICAgfVxuXG4gICAgcmVuZGVySGVhZChvcHRzKSB7XG4gICAgICBsZXQgaSwgYXJyID0gW107XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIGFyci5wdXNoKCc8dGggc2NvcGU9XCJjb2xcIj48YWJiciB0aXRsZT1cIicgK1xuICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRheU5hbWUob3B0cywgaSkgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGF5TmFtZShvcHRzLCBpLCB0cnVlKSArICc8L2FiYnI+PC90aD4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAnPHRoZWFkPjx0cj4nICsgKG9wdHMuaXNSVEwgPyBhcnIucmV2ZXJzZSgpIDogYXJyKS5qb2luKCcnKSArICc8L3RyPjwvdGhlYWQ+JztcbiAgICB9XG5cbiAgICByZW5kZXJCb2R5KHJvd3MpIHtcbiAgICAgIHJldHVybiAnPHRib2R5PicgKyByb3dzLmpvaW4oJycpICsgJzwvdGJvZHk+JztcbiAgICB9XG5cbiAgICByZW5kZXJUaXRsZShpbnN0YW5jZSwgYywgeWVhciwgbW9udGgsIHJlZlllYXIsIHJhbmRJZCkge1xuICAgICAgbGV0IGksIGosIGFycixcbiAgICAgICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgICAgIGlzTWluWWVhciA9IHllYXIgPT09IG9wdHMubWluWWVhcixcbiAgICAgICAgICBpc01heFllYXIgPSB5ZWFyID09PSBvcHRzLm1heFllYXIsXG4gICAgICAgICAgaHRtbCA9ICc8ZGl2IGlkPVwiJyArIHJhbmRJZCArICdcIiBjbGFzcz1cImRhdGVwaWNrZXItY29udHJvbHNcIiByb2xlPVwiaGVhZGluZ1wiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiPicsXG4gICAgICAgICAgbW9udGhIdG1sLFxuICAgICAgICAgIHllYXJIdG1sLFxuICAgICAgICAgIHByZXYgPSB0cnVlLFxuICAgICAgICAgIG5leHQgPSB0cnVlO1xuXG4gICAgICBmb3IgKGFyciA9IFtdLCBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgYXJyLnB1c2goJzxvcHRpb24gdmFsdWU9XCInICsgKHllYXIgPT09IHJlZlllYXIgPyBpIC0gYyA6IDEyICsgaSAtIGMpICsgJ1wiJyArXG4gICAgICAgICAgICAgICAgIChpID09PSBtb250aCA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzogJycpICtcbiAgICAgICAgICAgICAgICAgKChpc01pblllYXIgJiYgaSA8IG9wdHMubWluTW9udGgpIHx8IChpc01heFllYXIgJiYgaSA+IG9wdHMubWF4TW9udGgpID8gJ2Rpc2FibGVkPVwiZGlzYWJsZWRcIicgOiAnJykgKyAnPicgK1xuICAgICAgICAgICAgICAgICBvcHRzLmkxOG4ubW9udGhzW2ldICsgJzwvb3B0aW9uPicpO1xuICAgICAgfVxuXG4gICAgICBtb250aEh0bWwgPSAnPHNlbGVjdCBjbGFzcz1cInBpa2Etc2VsZWN0IHBpa2Etc2VsZWN0LW1vbnRoXCIgdGFiaW5kZXg9XCItMVwiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+JztcblxuICAgICAgaWYgKCQuaXNBcnJheShvcHRzLnllYXJSYW5nZSkpIHtcbiAgICAgICAgaSA9IG9wdHMueWVhclJhbmdlWzBdO1xuICAgICAgICBqID0gb3B0cy55ZWFyUmFuZ2VbMV0gKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaSA9IHllYXIgLSBvcHRzLnllYXJSYW5nZTtcbiAgICAgICAgaiA9IDEgKyB5ZWFyICsgb3B0cy55ZWFyUmFuZ2U7XG4gICAgICB9XG5cbiAgICAgIGZvciAoYXJyID0gW107IGkgPCBqICYmIGkgPD0gb3B0cy5tYXhZZWFyOyBpKyspIHtcbiAgICAgICAgaWYgKGkgPj0gb3B0cy5taW5ZZWFyKSB7XG4gICAgICAgICAgYXJyLnB1c2goJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIicgKyAoaSA9PT0geWVhciA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzogJycpICsgJz4nICsgKGkpICsgJzwvb3B0aW9uPicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHllYXJIdG1sID0gJzxzZWxlY3QgY2xhc3M9XCJwaWthLXNlbGVjdCBwaWthLXNlbGVjdC15ZWFyXCIgdGFiaW5kZXg9XCItMVwiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+JztcblxuICAgICAgbGV0IGxlZnRBcnJvdyA9ICc8c3ZnIGZpbGw9XCIjMDAwMDAwXCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTE1LjQxIDE2LjA5bC00LjU4LTQuNTkgNC41OC00LjU5TDE0IDUuNWwtNiA2IDYgNnpcIi8+PHBhdGggZD1cIk0wLS41aDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PC9zdmc+JztcbiAgICAgIGh0bWwgKz0gJzxidXR0b24gY2xhc3M9XCJtb250aC1wcmV2JyArIChwcmV2ID8gJycgOiAnIGlzLWRpc2FibGVkJykgKyAnXCIgdHlwZT1cImJ1dHRvblwiPicgKyBsZWZ0QXJyb3cgKyAnPC9idXR0b24+JztcblxuXG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwic2VsZWN0cy1jb250YWluZXJcIj4nO1xuICAgICAgaWYgKG9wdHMuc2hvd01vbnRoQWZ0ZXJZZWFyKSB7XG4gICAgICAgIGh0bWwgKz0geWVhckh0bWwgKyBtb250aEh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sICs9IG1vbnRoSHRtbCArIHllYXJIdG1sO1xuICAgICAgfVxuICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgaWYgKGlzTWluWWVhciAmJiAobW9udGggPT09IDAgfHwgb3B0cy5taW5Nb250aCA+PSBtb250aCkpIHtcbiAgICAgICAgcHJldiA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNNYXhZZWFyICYmIChtb250aCA9PT0gMTEgfHwgb3B0cy5tYXhNb250aCA8PSBtb250aCkpIHtcbiAgICAgICAgbmV4dCA9IGZhbHNlO1xuICAgICAgfVxuXG5cbiAgICAgIC8vIGlmIChjID09PSAodGhpcy5vcHRpb25zLm51bWJlck9mTW9udGhzIC0gMSkgKSB7XG4gICAgICBsZXQgcmlnaHRBcnJvdyA9ICc8c3ZnIGZpbGw9XCIjMDAwMDAwXCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTguNTkgMTYuMzRsNC41OC00LjU5LTQuNTgtNC41OUwxMCA1Ljc1bDYgNi02IDZ6XCIvPjxwYXRoIGQ9XCJNMC0uMjVoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48L3N2Zz4nO1xuICAgICAgICBodG1sICs9ICc8YnV0dG9uIGNsYXNzPVwibW9udGgtbmV4dCcgKyAobmV4dCA/ICcnIDogJyBpcy1kaXNhYmxlZCcpICsgJ1wiIHR5cGU9XCJidXR0b25cIj4nICsgcmlnaHRBcnJvdyArICc8L2J1dHRvbj4nO1xuICAgICAgLy8gfVxuXG4gICAgICByZXR1cm4gaHRtbCArPSAnPC9kaXY+JztcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHJlZnJlc2ggdGhlIEhUTUxcbiAgICAgKi9cbiAgICBkcmF3KGZvcmNlKSB7XG4gICAgICBpZiAoIXRoaXMuaXNPcGVuICYmICFmb3JjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICBtaW5ZZWFyID0gb3B0cy5taW5ZZWFyLFxuICAgICAgICAgIG1heFllYXIgPSBvcHRzLm1heFllYXIsXG4gICAgICAgICAgbWluTW9udGggPSBvcHRzLm1pbk1vbnRoLFxuICAgICAgICAgIG1heE1vbnRoID0gb3B0cy5tYXhNb250aCxcbiAgICAgICAgICBodG1sID0gJycsXG4gICAgICAgICAgcmFuZElkO1xuXG4gICAgICBpZiAodGhpcy5feSA8PSBtaW5ZZWFyKSB7XG4gICAgICAgIHRoaXMuX3kgPSBtaW5ZZWFyO1xuICAgICAgICBpZiAoIWlzTmFOKG1pbk1vbnRoKSAmJiB0aGlzLl9tIDwgbWluTW9udGgpIHtcbiAgICAgICAgICB0aGlzLl9tID0gbWluTW9udGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl95ID49IG1heFllYXIpIHtcbiAgICAgICAgdGhpcy5feSA9IG1heFllYXI7XG4gICAgICAgIGlmICghaXNOYU4obWF4TW9udGgpICYmIHRoaXMuX20gPiBtYXhNb250aCkge1xuICAgICAgICAgIHRoaXMuX20gPSBtYXhNb250aDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByYW5kSWQgPSAncGlrYS10aXRsZS0nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIDIpO1xuXG5cbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgMTsgYysrKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckRhdGVEaXNwbGF5KCk7XG4gICAgICAgIGh0bWwgKz1cbiAgICAgICAgICB0aGlzLnJlbmRlclRpdGxlKHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgYyxcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzW2NdLm1vbnRoLFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHJhbmRJZCkgK1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMuY2FsZW5kYXJzW2NdLnllYXIsIHRoaXMuY2FsZW5kYXJzW2NdLm1vbnRoLCByYW5kSWQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRlc3Ryb3lTZWxlY3RzKCk7XG5cbiAgICAgIHRoaXMuY2FsZW5kYXJFbC5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAvLyBJbml0IE1hdGVyaWFsaXplIFNlbGVjdFxuICAgICAgbGV0IHllYXJTZWxlY3QgPSB0aGlzLmNhbGVuZGFyRWwucXVlcnlTZWxlY3RvcignLnBpa2Etc2VsZWN0LXllYXInKTtcbiAgICAgIGxldCBtb250aFNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcucGlrYS1zZWxlY3QtbW9udGgnKTtcbiAgICAgIE0uRm9ybVNlbGVjdC5pbml0KHllYXJTZWxlY3QsIHtjbGFzc2VzOiAnc2VsZWN0LXllYXInLCBkcm9wZG93bk9wdGlvbnM6IHtjb250YWluZXI6IGRvY3VtZW50LmJvZHksIGNvbnN0cmFpbldpZHRoOiBmYWxzZX19KTtcbiAgICAgIE0uRm9ybVNlbGVjdC5pbml0KG1vbnRoU2VsZWN0LCB7Y2xhc3NlczogJ3NlbGVjdC1tb250aCcsIGRyb3Bkb3duT3B0aW9uczoge2NvbnRhaW5lcjogZG9jdW1lbnQuYm9keSwgY29uc3RyYWluV2lkdGg6IGZhbHNlfX0pO1xuXG4gICAgICAvLyBBZGQgY2hhbmdlIGhhbmRsZXJzIGZvciBzZWxlY3RcbiAgICAgIHllYXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlWWVhckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgIG1vbnRoU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlLmJpbmQodGhpcykpO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkRyYXcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhdyh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICovXG4gICAgX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kPSB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGljay5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5fZmluaXNoU2VsZWN0aW9uQm91bmQgPSB0aGlzLl9maW5pc2hTZWxlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlID0gdGhpcy5faGFuZGxlTW9udGhDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2Nsb3NlQm91bmQgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG5cbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kKTtcbiAgICAgIHRoaXMuY2FsZW5kYXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhbGVuZGFyQ2xpY2tCb3VuZCk7XG4gICAgICB0aGlzLmRvbmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9maW5pc2hTZWxlY3Rpb25Cb3VuZCk7XG4gICAgICB0aGlzLmNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlQm91bmQpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikge1xuICAgICAgICB0aGlzLl9oYW5kbGVDbGVhckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbGVhckNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGVhckNsaWNrQm91bmQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9zZXR1cFZhcmlhYmxlcygpIHtcbiAgICAgIHRoaXMuJG1vZGFsRWwgPSAkKERhdGVwaWNrZXIuX3RlbXBsYXRlKTtcbiAgICAgIHRoaXMubW9kYWxFbCA9IHRoaXMuJG1vZGFsRWxbMF07XG5cblx0XHQgIHRoaXMuY2FsZW5kYXJFbCA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcucGlrYS1zaW5nbGUnKTtcblxuICAgICAgdGhpcy55ZWFyVGV4dEVsID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy55ZWFyLXRleHQnKTtcbiAgICAgIHRoaXMuZGF0ZVRleHRFbCA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS10ZXh0Jyk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikge1xuICAgICAgICB0aGlzLmNsZWFyQnRuID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlcGlja2VyLWNsZWFyJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmRvbmVCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItZG9uZScpO1xuICAgICAgdGhpcy5jYW5jZWxCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2FuY2VsJyk7XG5cbiAgICAgIHRoaXMuZm9ybWF0cyA9IHtcblxuICAgICAgICBkOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRkOiAoKSA9PiB7XG4gICAgICAgICAgbGV0IGQgPSB0aGlzLmRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICAgIHJldHVybiAoZCA8IDEwID8gJzAnIDogJycpICsgZDtcbiAgICAgICAgfSxcbiAgICAgICAgZGRkOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pMThuLndlZWtkYXlzU2hvcnRbdGhpcy5kYXRlLmdldERheSgpXTtcbiAgICAgICAgfSxcbiAgICAgICAgZGRkZDogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaTE4bi53ZWVrZGF5c1t0aGlzLmRhdGUuZ2V0RGF5KCldO1xuICAgICAgICB9LFxuICAgICAgICBtOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgbW06ICgpID0+IHtcbiAgICAgICAgICBsZXQgbSA9IHRoaXMuZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgICByZXR1cm4gKG0gPCAxMCA/ICcwJyA6ICcnKSArIG07XG4gICAgICAgIH0sXG4gICAgICAgIG1tbTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaTE4bi5tb250aHNTaG9ydFt0aGlzLmRhdGUuZ2V0TW9udGgoKV07XG4gICAgICAgIH0sXG4gICAgICAgIG1tbW06ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmkxOG4ubW9udGhzW3RoaXMuZGF0ZS5nZXRNb250aCgpXTtcbiAgICAgICAgfSxcbiAgICAgICAgeXk6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gKCcnICsgdGhpcy5kYXRlLmdldEZ1bGxZZWFyKCkpLnNsaWNlKDIpO1xuICAgICAgICB9LFxuICAgICAgICB5eXl5OiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAqL1xuICAgIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlQm91bmQpO1xuICAgICAgdGhpcy5jYWxlbmRhckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlSW5wdXRDbGljaygpIHtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cblxuICAgIF9oYW5kbGVJbnB1dEtleWRvd24oZSkge1xuICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9oYW5kbGVDYWxlbmRhckNsaWNrKGUpIHtcbiAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKCdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKCdkYXRlcGlja2VyLWRheS1idXR0b24nKSAmJlxuICAgICAgICAgICAgISR0YXJnZXQuaGFzQ2xhc3MoJ2lzLWVtcHR5JykgJiZcbiAgICAgICAgICAgICEkdGFyZ2V0LnBhcmVudCgpLmhhc0NsYXNzKCdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgdGhpcy5zZXREYXRlKG5ldyBEYXRlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1waWthLXllYXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBpa2EtbW9udGgnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBpa2EtZGF5JykpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJy5tb250aC1wcmV2JykubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5wcmV2TW9udGgoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJy5tb250aC1uZXh0JykubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5uZXh0TW9udGgoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKCdwaWthLXNlbGVjdCcpKSB7XG4gICAgICAvLyAgIC8vIGlmIHRoaXMgaXMgdG91Y2ggZXZlbnQgcHJldmVudCBtb3VzZSBldmVudHMgZW11bGF0aW9uXG4gICAgICAvLyAgIC8vIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAvLyAgIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICAvLyAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgIC8vICAgLy8gICByZXR1cm4gZmFsc2U7XG4gICAgICAvLyAgIC8vIH1cbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAvLyAgIHRoaXMuX2MgPSB0cnVlO1xuICAgICAgLy8gfVxuICAgIH1cblxuXG4gICAgX2hhbmRsZUNsZWFyQ2xpY2soKSB7XG4gICAgICB0aGlzLmRhdGUgPSBudWxsO1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZU1vbnRoQ2hhbmdlKGUpIHtcbiAgICAgIHRoaXMuZ290b01vbnRoKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlWWVhckNoYW5nZShlKSB7XG4gICAgICB0aGlzLmdvdG9ZZWFyKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgbW9udGggKHplcm8taW5kZXgsIGUuZy4gMDogSmFudWFyeSlcbiAgICAgKi9cbiAgICBnb3RvTW9udGgobW9udGgpIHtcbiAgICAgIGlmICghaXNOYU4obW9udGgpKSB7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoID0gcGFyc2VJbnQobW9udGgsIDEwKTtcbiAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZnVsbCB5ZWFyIChlLmcuIFwiMjAxMlwiKVxuICAgICAqL1xuICAgIGdvdG9ZZWFyKHllYXIpIHtcbiAgICAgIGlmICghaXNOYU4oeWVhcikpIHtcbiAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ueWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlSW5wdXRDaGFuZ2UoZSkge1xuICAgICAgbGV0IGRhdGU7XG5cbiAgICAgIC8vIFByZXZlbnQgY2hhbmdlIGV2ZW50IGZyb20gYmVpbmcgZmlyZWQgd2hlbiB0cmlnZ2VyZWQgYnkgdGhlIHBsdWdpblxuICAgICAgaWYgKGUuZmlyZWRCeSA9PT0gdGhpcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBhcnNlKSB7XG4gICAgICAgIGRhdGUgPSB0aGlzLm9wdGlvbnMucGFyc2UodGhpcy5lbC52YWx1ZSwgdGhpcy5vcHRpb25zLmZvcm1hdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZSh0aGlzLmVsLnZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgdGhpcy5zZXREYXRlKGRhdGUpO1xuICAgICAgfVxuICAgICAgLy8gaWYgKCFzZWxmLl92KSB7XG4gICAgICAvLyAgIHNlbGYuc2hvdygpO1xuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHJlbmRlckRheU5hbWUob3B0cywgZGF5LCBhYmJyKSB7XG4gICAgICBkYXkgKz0gb3B0cy5maXJzdERheTtcbiAgICAgIHdoaWxlIChkYXkgPj0gNykge1xuICAgICAgICBkYXkgLT0gNztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhYmJyID8gb3B0cy5pMThuLndlZWtkYXlzQWJicmV2W2RheV0gOiBvcHRzLmkxOG4ud2Vla2RheXNbZGF5XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgaW5wdXQgdmFsdWUgdG8gdGhlIHNlbGVjdGVkIGRhdGUgYW5kIGNsb3NlIERhdGVwaWNrZXJcbiAgICAgKi9cbiAgICBfZmluaXNoU2VsZWN0aW9uKCkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBPcGVuIERhdGVwaWNrZXJcbiAgICAgKi9cbiAgICBvcGVuKCkge1xuICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW4uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgdGhpcy5tb2RhbC5vcGVuKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZSBEYXRlcGlja2VyXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubW9kYWwuY2xvc2UoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxuXG4gIERhdGVwaWNrZXIuX3RlbXBsYXRlID0gW1xuXHRcdCc8ZGl2IGNsYXNzPSBcIm1vZGFsIGRhdGVwaWNrZXItbW9kYWxcIj4nLFxuXHRcdCAgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50IGRhdGVwaWNrZXItY29udGFpbmVyXCI+JyxcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWRhdGUtZGlzcGxheVwiPicsXG4gICAgICAgICAgJzxzcGFuIGNsYXNzPVwieWVhci10ZXh0XCI+PC9zcGFuPicsXG4gICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZGF0ZS10ZXh0XCI+PC9zcGFuPicsXG4gICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItY2FsZW5kYXItY29udGFpbmVyXCI+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cInBpa2Etc2luZ2xlXCI+PC9kaXY+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItZm9vdGVyXCI+JyxcbiAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwiYnRuLWZsYXQgZGF0ZXBpY2tlci1jbGVhciB3YXZlcy1lZmZlY3RcIiBzdHlsZT1cInZpc2liaWxpdHk6IGhpZGRlbjtcIiB0eXBlPVwiYnV0dG9uXCI+PC9idXR0b24+JyxcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29uZmlybWF0aW9uLWJ0bnNcIj4nLFxuICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IGRhdGVwaWNrZXItY2FuY2VsIHdhdmVzLWVmZmVjdFwiIHR5cGU9XCJidXR0b25cIj48L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IGRhdGVwaWNrZXItZG9uZSB3YXZlcy1lZmZlY3RcIiB0eXBlPVwiYnV0dG9uXCI+PC9idXR0b24+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAnPC9kaXY+JyxcbiAgICAgICc8L2Rpdj4nLFxuXHRcdCc8L2Rpdj4nXG5cdF0uam9pbignJyk7XG5cbiAgTS5EYXRlcGlja2VyID0gRGF0ZXBpY2tlcjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKERhdGVwaWNrZXIsICdkYXRlcGlja2VyJywgJ01fRGF0ZXBpY2tlcicpO1xuICB9XG5cbn0pKGNhc2gpO1xuIl19
