"use strict";var _createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(h,i){var t={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},e=function(e){function o(e,t){_classCallCheck(this,o);var n=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,e,t));return n.el.M_Dropdown=n,o._dropdowns.push(n),n.id=M.getIdFromTrigger(e),n.dropdownEl=document.getElementById(n.id),n.$dropdownEl=h(n.dropdownEl),n.options=h.extend({},o.defaults,t),n.isOpen=!1,n.isScrollable=!1,n.isTouchMoving=!1,n.focusedIndex=-1,n.filterQuery=[],n.options.container?h(n.options.container).append(n.dropdownEl):n.$el.after(n.dropdownEl),n._makeDropdownFocusable(),n._resetFilterQueryBound=n._resetFilterQuery.bind(n),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),n._handleDocumentTouchmoveBound=n._handleDocumentTouchmove.bind(n),n._handleDropdownKeydownBound=n._handleDropdownKeydown.bind(n),n._handleTriggerKeydownBound=n._handleTriggerKeydown.bind(n),n._setupEventHandlers(),n}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),o._dropdowns.splice(o._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.options.hover?(this.el.removeEventHandlers("mouseenter",this._handleMouseEnterBound),this.el.removeEventHandlers("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventHandlers("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(e){var t=e.toElement||e.relatedTarget,n=!!h(t).closest(".dropdown-content").length,o=!1,i=h(t).closest(".dropdown-trigger");i.length&&i[0].M_Dropdown&&i[0].M_Dropdown.isOpen&&(o=!0),o||n||this.close()}},{key:"_handleDocumentClick",value:function(e){var t=this,n=h(e.target);this.options.closeOnClick&&n.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){t.close()},0):!n.closest(".dropdown-trigger").length&&n.closest(".dropdown-content").length||setTimeout(function(){t.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(e){h(e.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownKeydown",value:function(e){if(e.which===M.keys.TAB)e.preventDefault(),this.close();else if(e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||!this.isOpen)if(e.which===M.keys.ENTER&&this.isOpen){var t=this.dropdownEl.children[this.focusedIndex],n=h(t).find("a, button").first();n.length?n[0].click():t.click()}else e.which===M.keys.ESC&&this.isOpen&&(e.preventDefault(),this.close());else{e.preventDefault();var o=e.which===M.keys.ARROW_DOWN?1:-1,i=this.focusedIndex,s=!1;do{if(i+=o,this.dropdownEl.children[i]&&-1!==this.dropdownEl.children[i].tabIndex){s=!0;break}}while(i<this.dropdownEl.children.length&&0<=i);s&&(this.focusedIndex=i,this._focusFocusedItem())}var r=String.fromCharCode(e.which).toLowerCase();if(r&&-1===[9,13,27,38,40].indexOf(e.which)){this.filterQuery.push(r);var l=this.filterQuery.join(""),d=h(this.dropdownEl).find("li").filter(function(e){return 0===h(e).text().toLowerCase().indexOf(l)})[0];d&&(this.focusedIndex=h(d).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,h(this.dropdownEl).children().each(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),n=t.height,o=t.width,i=e.left-t.left,s=e.top-t.top,r={left:i,top:s,height:n,width:o},l=this.dropdownEl.offsetParent,d=M.checkPossibleAlignments(this.el,l,r,this.options.coverTrigger?0:e.height),h="top",a=this.options.alignment;if(s+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,d.top||(d.bottom?h="bottom":(this.isScrollable=!0,d.spaceOnTop>d.spaceOnBottom?(h="bottom",n+=d.spaceOnTop,s-=d.spaceOnTop):n+=d.spaceOnBottom)),!d[a]){var u="left"===a?"right":"left";d[u]?a=u:d.spaceOnLeft>d.spaceOnRight?(a="right",o+=d.spaceOnLeft,i-=d.spaceOnLeft):(a="left",o+=d.spaceOnRight)}return"bottom"===h&&(s=s-t.height+(this.options.coverTrigger?e.height:0)),"right"===a&&(i=i-t.width+e.width),{x:i,y:s,verticalAlignment:h,horizontalAlignment:a,height:n,width:o}}},{key:"_animateIn",value:function(){var n=this;i.remove(this.dropdownEl),i({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(e){if(n.options.autoFocus&&n.dropdownEl.focus(),"function"==typeof n.options.onOpenEnd){var t=e.animatables[0].target;n.options.onOpenEnd.call(t,n.el)}}})}},{key:"_animateOut",value:function(){var t=this;i.remove(this.dropdownEl),i({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(e){if(t._resetDropdownStyles(),"function"==typeof t.options.onCloseEnd){e.animatables[0].target;t.options.onCloseEnd.call(t,t.el)}}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return t}}]),o}();e._dropdowns=[],window.M.Dropdown=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"dropdown","M_Dropdown")}(cash,M.anime);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duLmpzIl0sIm5hbWVzIjpbIiQiLCJhbmltIiwiX2RlZmF1bHRzIiwiYWxpZ25tZW50IiwiYXV0b0ZvY3VzIiwiY29uc3RyYWluV2lkdGgiLCJjb250YWluZXIiLCJjb3ZlclRyaWdnZXIiLCJjbG9zZU9uQ2xpY2siLCJob3ZlciIsImluRHVyYXRpb24iLCJvdXREdXJhdGlvbiIsIm9uT3BlblN0YXJ0Iiwib25PcGVuRW5kIiwib25DbG9zZVN0YXJ0IiwiX0NvbXBvbmVudCIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiRHJvcGRvd24iLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJjYWxsIiwiZWwiLCJvbkNsb3NlRW5kIiwicHVzaCIsImlkIiwiTSIsImdldElkRnJvbVRyaWdnZXIiLCJkcm9wZG93bkVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIiRkcm9wZG93bkVsIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJpc09wZW4iLCJpc1Njcm9sbGFibGUiLCJpc1RvdWNoTW92aW5nIiwiZm9jdXNlZEluZGV4IiwiZmlsdGVyUXVlcnkiLCJhcHBlbmQiLCJfbWFrZURyb3Bkb3duRm9jdXNhYmxlIiwiX3Jlc2V0RmlsdGVyUXVlcnlCb3VuZCIsIl9yZXNldEZpbHRlclF1ZXJ5IiwiYmluZCIsIl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQiLCJfaGFuZGxlRG9jdW1lbnRDbGljayIsIl9oYW5kbGVEb2N1bWVudFRvdWNobW92ZUJvdW5kIiwiX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlIiwiX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kIiwiX2hhbmRsZURyb3Bkb3duS2V5ZG93biIsIl9oYW5kbGVUcmlnZ2VyS2V5ZG93bkJvdW5kIiwiX2hhbmRsZVRyaWdnZXJLZXlkb3duIiwiX3NldHVwRXZlbnRIYW5kbGVycyIsIl9pbmhlcml0cyIsIkNvbXBvbmVudCIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiX3Jlc2V0RHJvcGRvd25TdHlsZXMiLCJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsIl9kcm9wZG93bnMiLCJzcGxpY2UiLCJpbmRleE9mIiwiTV9Ecm9wZG93biIsInVuZGVmaW5lZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTW91c2VFbnRlckJvdW5kIiwiX2hhbmRsZU1vdXNlRW50ZXIiLCJfaGFuZGxlTW91c2VMZWF2ZUJvdW5kIiwiX2hhbmRsZU1vdXNlTGVhdmUiLCJfaGFuZGxlQ2xpY2tCb3VuZCIsIl9oYW5kbGVDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudEhhbmRsZXJzIiwiYm9keSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm9wZW4iLCJ0b0VsIiwidG9FbGVtZW50IiwicmVsYXRlZFRhcmdldCIsImxlYXZlVG9Ecm9wZG93bkNvbnRlbnQiLCJjbG9zZXN0IiwibGVuZ3RoIiwibGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciIsIiRjbG9zZXN0VHJpZ2dlciIsImNsb3NlIiwiJHRhcmdldCIsIl90aGlzMiIsInNldFRpbWVvdXQiLCJ3aGljaCIsImtleXMiLCJFTlRFUiIsInRhcmdldCIsIlRBQiIsIkFSUk9XX0RPV04iLCJBUlJPV19VUCIsIm5ld0ZvY3VzZWRJbmRleCIsImZvY3VzZWRFbGVtZW50IiwiY2hpbGRyZW4iLCJkaXJlY3Rpb24iLCJmaXJzdCIsImZvdW5kTmV3SW5kZXgiLCIkYWN0aXZhdGFibGVFbGVtZW50IiwiY2xpY2siLCJ0YWJJbmRleCIsIl9mb2N1c0ZvY3VzZWRJdGVtIiwibGV0dGVyIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwidG9Mb3dlckNhc2UiLCJzdHJpbmciLCJuZXdPcHRpb25FbCIsImZpbmQiLCJmaWx0ZXIiLCJ0ZXh0IiwiaW5kZXgiLCJmaWx0ZXJUaW1lb3V0IiwiZGlzcGxheSIsIndpZHRoIiwiaGVpZ2h0IiwibGVmdCIsInRvcCIsInRyYW5zZm9ybS1vcmlnaW4iLCJ0cmFuc2Zvcm0iLCJvcGFjaXR5IiwiZWFjaCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImZvY3VzIiwib2Zmc2V0UGFyZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidHJpZ2dlckJSZWN0IiwiZHJvcGRvd25CUmVjdCIsImlkZWFsSGVpZ2h0IiwiaWRlYWxXaWR0aCIsImlkZWFsWFBvcyIsImlkZWFsWVBvcyIsImRyb3Bkb3duQm91bmRzIiwiY2xvc2VzdE92ZXJmbG93UGFyZW50IiwiYWxpZ25tZW50cyIsImNoZWNrUG9zc2libGVBbGlnbm1lbnRzIiwidmVydGljYWxBbGlnbm1lbnQiLCJob3Jpem9udGFsQWxpZ25tZW50Iiwic3BhY2VPblRvcCIsIm9wcG9zaXRlQWxpZ25tZW50Iiwic3BhY2VPbkxlZnQiLCJzcGFjZU9uUmlnaHQiLCJ4IiwieSIsInRhcmdldHMiLCJlYXNpbmciLCJfdGhpczMiLCJlbGVtIiwiYW5pbWF0YWJsZXMiLCJzY2FsZVgiLCJzY2FsZVkiLCJkdXJhdGlvbiIsImNvbXBsZXRlIiwiX3RoaXM0IiwicmVtb3ZlIiwic3R5bGUiLCJfZ2V0RHJvcGRvd25Qb3NpdGlvbiIsInBvc2l0aW9uSW5mbyIsInRyYW5zZm9ybU9yaWdpbiIsIl9wbGFjZURyb3Bkb3duIiwiX2FuaW1hdGVJbiIsIl9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnMiLCJfYW5pbWF0ZU91dCIsIl9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzIiwiY3NzIiwiZWxzIiwiX2dldCIsImdldCIsIndpbmRvdyIsImpRdWVyeUxvYWRlZCIsImluaXRpYWxpemVKcXVlcnlXcmFwcGVyIiwiY2FzaCIsImFuaW1lIl0sIm1hcHBpbmdzIjoiNG5DQUFBLFNBQVdBLEVBQUdDLEdBR1osSUFBSUMsRUFBWSxDQUNkQyxVQUFXLE9BQ1hDLFdBQVcsRUFDWEMsZ0JBQWdCLEVBQ2hCQyxVQUFXLEtBQ1hDLGNBQWMsRUFDZEMsY0FBYyxFQUNkQyxPQUFPLEVB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Z0JTLENBQUEvRyxJQUFBLFFBQUFDLE1BQUEsV0FnZmYzQyxLQUFBb0IsU0FpQ0NwQixLQUFLb0IsUUFBUyxFQUNkcEIsS0FBS3VCLGNBQWdCLEVBbGhCUCxtQkFBQXZCLEtBQUFGLFFBQUFGLGNBQUFJLEtBQUFGLFFBQUFGLGFBc2ZUVyxLQUFBUCxLQUFBQSxLQUFBUSxJQUdKUixLQUFBMEosY0FDRDFKLEtBQUEySixnQ0FFQTNKLEtBQUFGLFFBQUFaLFdBQ0FjLEtBQUlRLEdBQUEyRyxXQTdmVSxDQUFBekUsSUFBQSx3QkFBQUMsTUFBQSxXQXFnQmQzQyxLQUFLdUosU0FDTHZKLEtBQUt3SixZQUFMSSxJQUFBLENBQ0FuRCxNQUFLZ0QsR0FDTi9DLE9BQUEsR0FpQ0tDLEtBQU0sR0EvQlpDLElBQUEsR0FpQ01DLG1CQUFvQixLQUV0QjdHLEtBQUt1SixxQkE3aUJPLENBQUEsQ0FBQTdHLElBQUEsT0FBQUMsTUFBQSxTQWdGYmtILEVBQUEvSixHQWdCRCxPQUFBZ0ssS0FBQTdKLEVBQUFHLFdBQUFDLE9BQUFDLGVBQUFMLEdBQUEsT0FBQUQsTUFBQU8sS0FBQVAsS0FBa0JBLEtBQU02SixFQUFLL0osS0FoR2YsQ0FBQTRDLElBQUEsY0FBQUMsTUFBQSxTQXVGVFAsR0EvRGtCLE9BZ0VsQkUsRUFBQUEsT0FBTDlCLEVBQUEsR0FBQUEsR0FoRXVCeUMsYUF4QlQsQ0FBQVAsSUFBQSxXQUFBcUgsSUFBQSxXQTZFWmpMLE9BQUVFLE1BN0VVaUIsRUFBQSxHQXNqQmxCQSxFQUFTNkMsV0FBYSxHQWpDbEJrSCxPQUFBcEosRUFBQVgsU0FBWUEsRUFFWFcsRUFBQXFKLGNBb0NIckosRUFBRXNKLHdCQUF3QmpLLEVBQVUsV0FBWSxjQTNqQnBELENBOGpCR2tLLEtBQU12SixFQUFFd0oiLCJmaWxlIjoiZHJvcGRvd24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGxldCBfZGVmYXVsdHMgPSB7XG4gICAgYWxpZ25tZW50OiAnbGVmdCcsXG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgIGNvbnN0cmFpbldpZHRoOiB0cnVlLFxuICAgIGNvbnRhaW5lcjogbnVsbCxcbiAgICBjb3ZlclRyaWdnZXI6IHRydWUsXG4gICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgIGhvdmVyOiBmYWxzZSxcbiAgICBpbkR1cmF0aW9uOiAxNTAsXG4gICAgb3V0RHVyYXRpb246IDI1MCxcbiAgICBvbk9wZW5TdGFydDogbnVsbCxcbiAgICBvbk9wZW5FbmQ6IG51bGwsXG4gICAgb25DbG9zZVN0YXJ0OiBudWxsLFxuICAgIG9uQ2xvc2VFbmQ6IG51bGxcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICovXG4gIGNsYXNzIERyb3Bkb3duIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgICAgc3VwZXIoRHJvcGRvd24sIGVsLCBvcHRpb25zKTtcblxuICAgICAgdGhpcy5lbC5NX0Ryb3Bkb3duID0gdGhpcztcbiAgICAgIERyb3Bkb3duLl9kcm9wZG93bnMucHVzaCh0aGlzKTtcblxuICAgICAgdGhpcy5pZCA9IE0uZ2V0SWRGcm9tVHJpZ2dlcihlbCk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKTtcbiAgICAgIHRoaXMuJGRyb3Bkb3duRWwgPSAkKHRoaXMuZHJvcGRvd25FbCk7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgZHJvcGRvd25cbiAgICAgICAqIEBtZW1iZXIgRHJvcGRvd24jb3B0aW9uc1xuICAgICAgICogQHByb3Age1N0cmluZ30gW2FsaWdubWVudD0nbGVmdCddIC0gRWRnZSB3aGljaCB0aGUgZHJvcGRvd24gaXMgYWxpZ25lZCB0b1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFthdXRvRm9jdXM9dHJ1ZV0gLSBBdXRvbWF0aWNhbGx5IGZvY3VzIGRyb3Bkb3duIGVsIGZvciBrZXlib2FyZFxuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtjb25zdHJhaW5XaWR0aD10cnVlXSAtIENvbnN0cmFpbiB3aWR0aCB0byB3aWR0aCBvZiB0aGUgYnV0dG9uXG4gICAgICAgKiBAcHJvcCB7RWxlbWVudH0gY29udGFpbmVyIC0gQ29udGFpbmVyIGVsZW1lbnQgdG8gYXR0YWNoIGRyb3Bkb3duIHRvIChvcHRpb25hbClcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbY292ZXJUcmlnZ2VyPXRydWVdIC0gUGxhY2UgZHJvcGRvd24gb3ZlciB0cmlnZ2VyXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2Nsb3NlT25DbGljaz10cnVlXSAtIENsb3NlIG9uIGNsaWNrIG9mIGRyb3Bkb3duIGl0ZW1cbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbaG92ZXI9ZmFsc2VdIC0gT3BlbiBkcm9wZG93biBvbiBob3ZlclxuICAgICAgICogQHByb3Age051bWJlcn0gW2luRHVyYXRpb249MTUwXSAtIER1cmF0aW9uIG9mIG9wZW4gYW5pbWF0aW9uIGluIG1zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbb3V0RHVyYXRpb249MjUwXSAtIER1cmF0aW9uIG9mIGNsb3NlIGFuaW1hdGlvbiBpbiBtc1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIHN0YXJ0cyBvcGVuaW5nXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIGZpbmlzaGVzIG9wZW5pbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gZHJvcGRvd24gc3RhcnRzIGNsb3NpbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIGZpbmlzaGVzIGNsb3NpbmdcbiAgICAgICAqL1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIERyb3Bkb3duLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgb3Blbi9jbG9zZSBzdGF0ZSBvZiBkcm9wZG93blxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIGlmIGRyb3Bkb3duIGNvbnRlbnQgaXMgc2Nyb2xsYWJsZVxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gZmFsc2U7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIGlmIHRvdWNoIG1vdmluZyBvbiBkcm9wZG93biBjb250ZW50XG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgdGhpcy5pc1RvdWNoTW92aW5nID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gLTE7XG4gICAgICB0aGlzLmZpbHRlclF1ZXJ5ID0gW107XG5cbiAgICAgIC8vIE1vdmUgZHJvcGRvd24tY29udGVudCBhZnRlciBkcm9wZG93bi10cmlnZ2VyXG4gICAgICBpZiAoISF0aGlzLm9wdGlvbnMuY29udGFpbmVyKSB7XG4gICAgICAgICQodGhpcy5vcHRpb25zLmNvbnRhaW5lcikuYXBwZW5kKHRoaXMuZHJvcGRvd25FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRlbC5hZnRlcih0aGlzLmRyb3Bkb3duRWwpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9tYWtlRHJvcGRvd25Gb2N1c2FibGUoKTtcbiAgICAgIHRoaXMuX3Jlc2V0RmlsdGVyUXVlcnlCb3VuZCA9IHRoaXMuX3Jlc2V0RmlsdGVyUXVlcnkuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlQm91bmQgPSB0aGlzLl9oYW5kbGVEb2N1bWVudFRvdWNobW92ZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlRHJvcGRvd25LZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVEcm9wZG93bktleWRvd24uYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZVRyaWdnZXJLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVUcmlnZ2VyS2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBkZWZhdWx0cygpIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gc3VwZXIuaW5pdCh0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgbGV0IGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICByZXR1cm4gZG9tRWxlbS5NX0Ryb3Bkb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7XG4gICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICBEcm9wZG93bi5fZHJvcGRvd25zLnNwbGljZShEcm9wZG93bi5fZHJvcGRvd25zLmluZGV4T2YodGhpcyksIDEpO1xuICAgICAgdGhpcy5lbC5NX0Ryb3Bkb3duID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICovXG4gICAgX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgIC8vIFRyaWdnZXIga2V5ZG93biBoYW5kbGVyXG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVUcmlnZ2VyS2V5ZG93bkJvdW5kKTtcblxuICAgICAgLy8gSG92ZXIgZXZlbnQgaGFuZGxlcnNcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXIpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kID0gdGhpcy5faGFuZGxlTW91c2VFbnRlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQpO1xuICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcblxuICAgICAgICAvLyBDbGljayBldmVudCBoYW5kbGVyc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0JvdW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgKi9cbiAgICBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgIC8vIFRyaWdnZXIga2V5ZG93biBoYW5kbGVyXG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVUcmlnZ2VyS2V5ZG93bkJvdW5kKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3Zlcikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50SGFuZGxlcnMoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50SGFuZGxlcnMoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwucmVtb3ZlRXZlbnRIYW5kbGVycygnbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tCb3VuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3NldHVwVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpIHtcbiAgICAgIC8vIFVzZSBjYXB0dXJlIHBoYXNlIGV2ZW50IGhhbmRsZXIgdG8gcHJldmVudCBjbGlja1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVCb3VuZCk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kKTtcbiAgICB9XG5cbiAgICBfcmVtb3ZlVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpIHtcbiAgICAgIC8vIFVzZSBjYXB0dXJlIHBoYXNlIGV2ZW50IGhhbmRsZXIgdG8gcHJldmVudCBjbGlja1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVCb3VuZCk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlQ2xpY2soZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlTW91c2VMZWF2ZShlKSB7XG4gICAgICBsZXQgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDtcbiAgICAgIGxldCBsZWF2ZVRvRHJvcGRvd25Db250ZW50ID0gISEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoO1xuICAgICAgbGV0IGxlYXZlVG9BY3RpdmVEcm9wZG93blRyaWdnZXIgPSBmYWxzZTtcblxuICAgICAgbGV0ICRjbG9zZXN0VHJpZ2dlciA9ICQodG9FbCkuY2xvc2VzdCgnLmRyb3Bkb3duLXRyaWdnZXInKTtcbiAgICAgIGlmICgkY2xvc2VzdFRyaWdnZXIubGVuZ3RoICYmICEhJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24gJiZcbiAgICAgICAgJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24uaXNPcGVuKSB7XG4gICAgICAgIGxlYXZlVG9BY3RpdmVEcm9wZG93blRyaWdnZXIgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDbG9zZSBob3ZlciBkcm9wZG93biBpZiBtb3VzZSBkaWQgbm90IGxlYXZlIHRvIGVpdGhlciBhY3RpdmUgZHJvcGRvd24tdHJpZ2dlciBvciBkcm9wZG93bi1jb250ZW50XG4gICAgICBpZiAoIWxlYXZlVG9BY3RpdmVEcm9wZG93blRyaWdnZXIgJiYgIWxlYXZlVG9Ecm9wZG93bkNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9oYW5kbGVEb2N1bWVudENsaWNrKGUpIHtcbiAgICAgIGxldCAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNsb3NlT25DbGljayAmJlxuICAgICAgICAgICR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggJiZcbiAgICAgICAgICAhdGhpcy5pc1RvdWNoTW92aW5nKSB7IC8vIGlzVG91Y2hNb3ZpbmcgdG8gY2hlY2sgaWYgc2Nyb2xsaW5nIG9uIG1vYmlsZS5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSBpZiAoJHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tdHJpZ2dlcicpLmxlbmd0aCB8fFxuICAgICAgICAhJHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmxlbmd0aCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuICAgICAgdGhpcy5pc1RvdWNoTW92aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgX2hhbmRsZVRyaWdnZXJLZXlkb3duKGUpIHtcbiAgICAgIC8vIEFSUk9XIERPV04gT1IgRU5URVIgV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gb3BlbiBEcm9wZG93blxuICAgICAgaWYgKChlLndoaWNoID09PSBNLmtleXMuQVJST1dfRE9XTiB8fFxuICAgICAgICAgIGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIERvY3VtZW50IFRvdWNobW92ZVxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBfaGFuZGxlRG9jdW1lbnRUb3VjaG1vdmUoZSkge1xuICAgICAgbGV0ICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuaXNUb3VjaE1vdmluZyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIERyb3Bkb3duIEtleWRvd25cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgX2hhbmRsZURyb3Bkb3duS2V5ZG93bihlKSB7XG4gICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgICAvLyBOYXZpZ2F0ZSBkb3duIGRyb3Bkb3duIGxpc3RcbiAgICAgIH0gZWxzZSBpZiAoKGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8XG4gICAgICAgICAgICAgICAgICBlLndoaWNoID09PSBNLmtleXMuQVJST1dfVVApICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOID8gMSA6IC0xO1xuICAgICAgICBsZXQgbmV3Rm9jdXNlZEluZGV4ID0gdGhpcy5mb2N1c2VkSW5kZXg7XG4gICAgICAgIGxldCBmb3VuZE5ld0luZGV4ID0gZmFsc2U7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBuZXdGb2N1c2VkSW5kZXggPSBuZXdGb2N1c2VkSW5kZXggKyBkaXJlY3Rpb247XG5cbiAgICAgICAgICBpZiAoISF0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XSAmJlxuICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XS50YWJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGZvdW5kTmV3SW5kZXggPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChuZXdGb2N1c2VkSW5kZXggPCB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW4ubGVuZ3RoICYmXG4gICAgICAgICAgICAgICBuZXdGb2N1c2VkSW5kZXggPj0gMCk7XG5cbiAgICAgICAgaWYgKGZvdW5kTmV3SW5kZXgpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9IG5ld0ZvY3VzZWRJbmRleDtcbiAgICAgICAgICB0aGlzLl9mb2N1c0ZvY3VzZWRJdGVtKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFTlRFUiBzZWxlY3RzIGNob2ljZSBvbiBmb2N1c2VkIGl0ZW1cbiAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICAgIC8vIFNlYXJjaCBmb3IgPGE+IGFuZCA8YnV0dG9uPlxuICAgICAgICBsZXQgZm9jdXNlZEVsZW1lbnQgPSB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bdGhpcy5mb2N1c2VkSW5kZXhdO1xuICAgICAgICBsZXQgJGFjdGl2YXRhYmxlRWxlbWVudCA9ICQoZm9jdXNlZEVsZW1lbnQpLmZpbmQoJ2EsIGJ1dHRvbicpLmZpcnN0KCk7XG5cbiAgICAgICAgLy8gQ2xpY2sgYSBvciBidXR0b24gdGFnIGlmIGV4aXN0cywgb3RoZXJ3aXNlIGNsaWNrIGxpIHRhZ1xuICAgICAgICAhISRhY3RpdmF0YWJsZUVsZW1lbnQubGVuZ3RoID8gJGFjdGl2YXRhYmxlRWxlbWVudFswXS5jbGljaygpIDogZm9jdXNlZEVsZW1lbnQuY2xpY2soKTtcblxuICAgICAgICAvLyBDbG9zZSBkcm9wZG93biBvbiBFU0NcbiAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVTQyAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ0FTRSBXSEVOIFVTRVIgVFlQRSBMRVRURVJTXG4gICAgICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBub25MZXR0ZXJzID0gWzksIDEzLCAyNywgMzgsIDQwXTtcbiAgICAgIGlmIChsZXR0ZXIgJiYgKG5vbkxldHRlcnMuaW5kZXhPZihlLndoaWNoKSA9PT0gLTEpKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyUXVlcnkucHVzaChsZXR0ZXIpO1xuXG4gICAgICAgIGxldCBzdHJpbmcgPSB0aGlzLmZpbHRlclF1ZXJ5LmpvaW4oJycpLFxuICAgICAgICAgIG5ld09wdGlvbkVsID0gJCh0aGlzLmRyb3Bkb3duRWwpLmZpbmQoJ2xpJykuZmlsdGVyKChlbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICQoZWwpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyaW5nKSA9PT0gMDtcbiAgICAgICAgICB9KVswXTtcblxuICAgICAgICBpZiAobmV3T3B0aW9uRWwpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9ICQobmV3T3B0aW9uRWwpLmluZGV4KCk7XG4gICAgICAgICAgdGhpcy5fZm9jdXNGb2N1c2VkSXRlbSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmlsdGVyVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5fcmVzZXRGaWx0ZXJRdWVyeUJvdW5kLCAxMDAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCBkcm9wZG93blxuICAgICAqL1xuICAgIF9yZXNldEZpbHRlclF1ZXJ5KCkge1xuICAgICAgdGhpcy5maWx0ZXJRdWVyeSA9IFtdO1xuICAgIH1cblxuICAgIF9yZXNldERyb3Bkb3duU3R5bGVzKCkge1xuICAgICAgdGhpcy4kZHJvcGRvd25FbC5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnJyxcbiAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICBsZWZ0OiAnJyxcbiAgICAgICAgdG9wOiAnJyxcbiAgICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiAnJyxcbiAgICAgICAgdHJhbnNmb3JtOiAnJyxcbiAgICAgICAgb3BhY2l0eTogJydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9tYWtlRHJvcGRvd25Gb2N1c2FibGUoKSB7XG4gICAgICAvLyBOZWVkZWQgZm9yIGFycm93IGtleSBuYXZpZ2F0aW9uXG4gICAgICB0aGlzLmRyb3Bkb3duRWwudGFiSW5kZXggPSAwO1xuXG4gICAgICAvLyBPbmx5IHNldCB0YWJpbmRleCBpZiBpdCBoYXNuJ3QgYmVlbiBzZXQgYnkgdXNlclxuICAgICAgJCh0aGlzLmRyb3Bkb3duRWwpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICBpZiAoIWVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2ZvY3VzRm9jdXNlZEl0ZW0oKSB7XG4gICAgICBpZiAodGhpcy5mb2N1c2VkSW5kZXggPj0gMCAmJlxuICAgICAgICAgIHRoaXMuZm9jdXNlZEluZGV4IDwgdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuLmxlbmd0aCAmJlxuICAgICAgICAgIHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuW3RoaXMuZm9jdXNlZEluZGV4XS5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9nZXREcm9wZG93blBvc2l0aW9uKCkge1xuICAgICAgbGV0IG9mZnNldFBhcmVudEJSZWN0ID0gdGhpcy5lbC5vZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBsZXQgdHJpZ2dlckJSZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGxldCBkcm9wZG93bkJSZWN0ID0gdGhpcy5kcm9wZG93bkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICBsZXQgaWRlYWxIZWlnaHQgPSBkcm9wZG93bkJSZWN0LmhlaWdodDtcbiAgICAgIGxldCBpZGVhbFdpZHRoID0gZHJvcGRvd25CUmVjdC53aWR0aDtcbiAgICAgIGxldCBpZGVhbFhQb3MgPSB0cmlnZ2VyQlJlY3QubGVmdCAtIGRyb3Bkb3duQlJlY3QubGVmdDtcbiAgICAgIGxldCBpZGVhbFlQb3MgPSB0cmlnZ2VyQlJlY3QudG9wIC0gZHJvcGRvd25CUmVjdC50b3A7XG5cbiAgICAgIGxldCBkcm9wZG93bkJvdW5kcyA9IHtcbiAgICAgICAgbGVmdDogaWRlYWxYUG9zLFxuICAgICAgICB0b3A6IGlkZWFsWVBvcyxcbiAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCxcbiAgICAgICAgd2lkdGg6IGlkZWFsV2lkdGhcbiAgICAgIH07XG5cblxuICAgICAgLy8gQ291bnRhaW5lciBoZXJlIHdpbGwgYmUgY2xvc2VzdCBhbmNlc3RvciB3aXRoIG92ZXJmbG93OiBoaWRkZW5cbiAgICAgIGxldCBjbG9zZXN0T3ZlcmZsb3dQYXJlbnQgPSB0aGlzLmRyb3Bkb3duRWwub2Zmc2V0UGFyZW50O1xuICAgICAgbGV0IGFsaWdubWVudHMgPSBNLmNoZWNrUG9zc2libGVBbGlnbm1lbnRzKHRoaXMuZWwsIGNsb3Nlc3RPdmVyZmxvd1BhcmVudCwgZHJvcGRvd25Cb3VuZHMsIHRoaXMub3B0aW9ucy5jb3ZlclRyaWdnZXIgPyAwIDogdHJpZ2dlckJSZWN0LmhlaWdodCk7XG5cbiAgICAgIGxldCB2ZXJ0aWNhbEFsaWdubWVudCA9ICd0b3AnO1xuICAgICAgbGV0IGhvcml6b250YWxBbGlnbm1lbnQgPSB0aGlzLm9wdGlvbnMuYWxpZ25tZW50O1xuICAgICAgaWRlYWxZUG9zICs9ICh0aGlzLm9wdGlvbnMuY292ZXJUcmlnZ2VyID8gMCA6IHRyaWdnZXJCUmVjdC5oZWlnaHQpO1xuXG4gICAgICAvLyBSZXNldCBpc1Njcm9sbGFibGVcbiAgICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gZmFsc2U7XG5cbiAgICAgIGlmICghYWxpZ25tZW50cy50b3ApIHtcbiAgICAgICAgaWYgKGFsaWdubWVudHMuYm90dG9tKSB7XG4gICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQgPSAnYm90dG9tJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc2lkZSBoYXMgbW9zdCBzcGFjZSBhbmQgY3V0b2ZmIGF0IGNvcnJlY3QgaGVpZ2h0XG4gICAgICAgICAgaWYgKGFsaWdubWVudHMuc3BhY2VPblRvcCA+IGFsaWdubWVudHMuc3BhY2VPbkJvdHRvbSkge1xuICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQgPSAnYm90dG9tJztcbiAgICAgICAgICAgIGlkZWFsSGVpZ2h0ICs9IGFsaWdubWVudHMuc3BhY2VPblRvcDtcbiAgICAgICAgICAgIGlkZWFsWVBvcyAtPSBhbGlnbm1lbnRzLnNwYWNlT25Ub3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkZWFsSGVpZ2h0ICs9IGFsaWdubWVudHMuc3BhY2VPbkJvdHRvbTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgcHJlZmVycmVkIGhvcml6b250YWwgYWxpZ25tZW50IGlzIHBvc3NpYmxlXG4gICAgICBpZiAoIWFsaWdubWVudHNbaG9yaXpvbnRhbEFsaWdubWVudF0pIHtcbiAgICAgICAgbGV0IG9wcG9zaXRlQWxpZ25tZW50ID0gaG9yaXpvbnRhbEFsaWdubWVudCA9PT0gJ2xlZnQnID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgaWYgKGFsaWdubWVudHNbb3Bwb3NpdGVBbGlnbm1lbnRdKSB7XG4gICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudCA9IG9wcG9zaXRlQWxpZ25tZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIERldGVybWluZSB3aGljaCBzaWRlIGhhcyBtb3N0IHNwYWNlIGFuZCBjdXRvZmYgYXQgY29ycmVjdCBoZWlnaHRcbiAgICAgICAgICBpZiAoYWxpZ25tZW50cy5zcGFjZU9uTGVmdCA+IGFsaWdubWVudHMuc3BhY2VPblJpZ2h0KSB7XG4gICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGlkZWFsV2lkdGggKz0gYWxpZ25tZW50cy5zcGFjZU9uTGVmdDtcbiAgICAgICAgICAgIGlkZWFsWFBvcyAtPSBhbGlnbm1lbnRzLnNwYWNlT25MZWZ0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gJ2xlZnQnO1xuICAgICAgICAgICAgaWRlYWxXaWR0aCArPSBhbGlnbm1lbnRzLnNwYWNlT25SaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHZlcnRpY2FsQWxpZ25tZW50ID09PSAnYm90dG9tJykge1xuICAgICAgICBpZGVhbFlQb3MgPSBpZGVhbFlQb3MgLSBkcm9wZG93bkJSZWN0LmhlaWdodCArXG4gICAgICAgICAgKHRoaXMub3B0aW9ucy5jb3ZlclRyaWdnZXIgPyB0cmlnZ2VyQlJlY3QuaGVpZ2h0IDogMCk7XG4gICAgICB9XG4gICAgICBpZiAoaG9yaXpvbnRhbEFsaWdubWVudCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBpZGVhbFhQb3MgPSBpZGVhbFhQb3MgLSBkcm9wZG93bkJSZWN0LndpZHRoICsgdHJpZ2dlckJSZWN0LndpZHRoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogaWRlYWxYUG9zLFxuICAgICAgICB5OiBpZGVhbFlQb3MsXG4gICAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiB2ZXJ0aWNhbEFsaWdubWVudCxcbiAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudDogaG9yaXpvbnRhbEFsaWdubWVudCxcbiAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCxcbiAgICAgICAgd2lkdGg6IGlkZWFsV2lkdGhcbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBBbmltYXRlIGluIGRyb3Bkb3duXG4gICAgICovXG4gICAgX2FuaW1hdGVJbigpIHtcbiAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZHJvcGRvd25FbCk7XG4gICAgICBhbmltKHtcbiAgICAgICAgdGFyZ2V0czogdGhpcy5kcm9wZG93bkVsLFxuICAgICAgICBvcGFjaXR5OiB7XG4gICAgICAgICAgdmFsdWU6IFswLCAxXSxcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfSxcbiAgICAgICAgc2NhbGVYOiBbLjMsIDFdLFxuICAgICAgICBzY2FsZVk6IFsuMywgMV0sXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50JyxcbiAgICAgICAgY29tcGxldGU6IChhbmltKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd25FbC5mb2N1cygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG9uT3BlbkVuZCBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMub3B0aW9ucy5vbk9wZW5FbmQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBsZXQgZWxlbSA9IGFuaW0uYW5pbWF0YWJsZXNbMF0udGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKGVsZW0sIHRoaXMuZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW5pbWF0ZSBvdXQgZHJvcGRvd25cbiAgICAgKi9cbiAgICBfYW5pbWF0ZU91dCgpIHtcbiAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZHJvcGRvd25FbCk7XG4gICAgICBhbmltKHtcbiAgICAgICAgdGFyZ2V0czogdGhpcy5kcm9wZG93bkVsLFxuICAgICAgICBvcGFjaXR5OiB7XG4gICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50J1xuICAgICAgICB9LFxuICAgICAgICBzY2FsZVg6IC4zLFxuICAgICAgICBzY2FsZVk6IC4zLFxuICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVpbnQnLFxuICAgICAgICBjb21wbGV0ZTogKGFuaW0pID0+IHtcbiAgICAgICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7XG5cbiAgICAgICAgICAvLyBvbkNsb3NlRW5kIGNhbGxiYWNrXG4gICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5vcHRpb25zLm9uQ2xvc2VFbmQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBsZXQgZWxlbSA9IGFuaW0uYW5pbWF0YWJsZXNbMF0udGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYWNlIGRyb3Bkb3duXG4gICAgICovXG4gICAgX3BsYWNlRHJvcGRvd24oKSB7XG4gICAgICAvLyBTZXQgd2lkdGggYmVmb3JlIGNhbGN1bGF0aW5nIHBvc2l0aW9uSW5mb1xuICAgICAgbGV0IGlkZWFsV2lkdGggPSB0aGlzLm9wdGlvbnMuY29uc3RyYWluV2lkdGggP1xuICAgICAgICB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDogdGhpcy5kcm9wZG93bkVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLndpZHRoID0gaWRlYWxXaWR0aCArICdweCc7XG5cbiAgICAgIGxldCBwb3NpdGlvbkluZm8gPSB0aGlzLl9nZXREcm9wZG93blBvc2l0aW9uKCk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUubGVmdCA9IHBvc2l0aW9uSW5mby54ICsgJ3B4JztcbiAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS50b3AgPSBwb3NpdGlvbkluZm8ueSArICdweCc7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUuaGVpZ2h0ID0gcG9zaXRpb25JbmZvLmhlaWdodCArICdweCc7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUud2lkdGggPSBwb3NpdGlvbkluZm8ud2lkdGggKyAncHgnO1xuICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9XG4gICAgICAgIGAke3Bvc2l0aW9uSW5mby5ob3Jpem9udGFsQWxpZ25tZW50ID09PSAnbGVmdCcgPyAnMCcgOiAnMTAwJSd9ICR7cG9zaXRpb25JbmZvLnZlcnRpY2FsQWxpZ25tZW50ID09PSAndG9wJyA/ICcwJyA6ICcxMDAlJ31gO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogT3BlbiBEcm9wZG93blxuICAgICAqL1xuICAgIG9wZW4oKSB7XG4gICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFja1xuICAgICAgaWYgKHR5cGVvZiAodGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0KSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzZXQgc3R5bGVzXG4gICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgIHRoaXMuX3BsYWNlRHJvcGRvd24oKTtcbiAgICAgIHRoaXMuX2FuaW1hdGVJbigpO1xuICAgICAgdGhpcy5fc2V0dXBUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgRHJvcGRvd25cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gLTE7XG5cbiAgICAgIC8vIG9uQ2xvc2VTdGFydCBjYWxsYmFja1xuICAgICAgaWYgKHR5cGVvZiAodGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hbmltYXRlT3V0KCk7XG4gICAgICB0aGlzLl9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzKSB7XG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWNhbGN1bGF0ZSBkaW1lbnNpb25zXG4gICAgICovXG4gICAgcmVjYWxjdWxhdGVEaW1lbnNpb25zKCkge1xuICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuJGRyb3Bkb3duRWwuY3NzKHtcbiAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICBsZWZ0OiAnJyxcbiAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICd0cmFuc2Zvcm0tb3JpZ2luJzogJycsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wbGFjZURyb3Bkb3duKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIERyb3Bkb3duXG4gICAqL1xuICBEcm9wZG93bi5fZHJvcGRvd25zID0gW107XG5cbiAgd2luZG93Lk0uRHJvcGRvd24gPSBEcm9wZG93bjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKERyb3Bkb3duLCAnZHJvcGRvd24nLCAnTV9Ecm9wZG93bicpO1xuICB9XG5cbn0pKGNhc2gsIE0uYW5pbWUpO1xuIl19
