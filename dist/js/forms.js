"use strict";!function(u){M.updateTextFields=function(){u("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(t,e){var i=u(this);0<t.value.length||u(t).is(":focus")||t.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):t.validity?i.siblings("label").toggleClass("active",!0===t.validity.badInput):i.siblings("label").removeClass("active")})},M.validate_field=function(t){var e=null!==t.attr("data-length"),i=parseInt(t.attr("data-length")),a=t[0].value.length;0!==a||!1!==t[0].validity.badInput||t.is(":required")?t.hasClass("validate")&&(t.is(":valid")&&e&&a<=i||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid"))):t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid"))},M.textareaAutoResize=function(t){if(t instanceof Element&&(t=u(t)),t.length){var e=u(".hiddendiv").first();e.length||(e=u('<div class="hiddendiv common"></div>'),u("body").append(e));var i=t.css("font-family"),a=t.css("font-size"),n=t.css("line-height"),s=t.css("padding-top"),l=t.css("padding-right"),d=t.css("padding-bottom"),o=t.css("padding-left");a&&e.css("font-size",a),i&&e.css("font-family",i),n&&e.css("line-height",n),s&&e.css("padding-top",s),l&&e.css("padding-right",l),d&&e.css("padding-bottom",d),o&&e.css("padding-left",o),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&e.css("overflow-wrap","normal").css("white-space","pre"),e.text(t[0].value+"\n");var r=e.html().replace(/\n/g,"<br>");e.html(r),0<t[0].offsetWidth&&0<t[0].offsetHeight?e.css("width",t.width()+"px"):e.css("width",window.innerWidth/2+"px"),t.data("original-height")<=e.innerHeight()?t.css("height",e.innerHeight()+"px"):t[0].value.length<t.data("previous-length")&&t.css("height",t.data("original-height")+"px"),t.data("previous-length",t[0].value.length)}else console.error("No textarea element found")},u(document).ready(function(){var a="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";u(document).on("change",a,function(){0===this.value.length&&null===u(this).attr("placeholder")||u(this).siblings("label").addClass("active"),M.validate_field(u(this))}),u(document).ready(function(){M.updateTextFields()}),u(document).on("reset",function(t){var e=u(t.target);e.is("form")&&(e.find(a).removeClass("valid").removeClass("invalid"),e.find(a).each(function(t){this.value.length&&u(this).siblings("label").removeClass("active")}),setTimeout(function(){e.find("select").each(function(){if(this.M_FormSelect){var t=u(this).find("option[selected]").text();u(this).siblings("input.select-dropdown")[0].value=t}})},0))}),document.addEventListener("focus",function(t){u(t.target).is(a)&&u(t.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(t){var e=u(t.target);if(e.is(a)){var i=".prefix";0===e[0].value.length&&!0!==e[0].validity.badInput&&null===e.attr("placeholder")&&(i+=", label"),e.siblings(i).removeClass("active"),M.validate_field(e)}},!0);u(document).on("keyup","input[type=radio], input[type=checkbox]",function(t){if(t.which===M.keys.TAB)return u(this).addClass("tabbed"),void u(this).one("blur",function(t){u(this).removeClass("tabbed")})});var t=".materialize-textarea";u(t).each(function(){var t=u(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)}),u(document).on("keyup",t,function(){M.textareaAutoResize(u(this))}),u(document).on("keydown",t,function(){M.textareaAutoResize(u(this))}),u(document).on("change",'.file-field input[type="file"]',function(){for(var t=u(this).closest(".file-field").find("input.file-path"),e=u(this)[0].files,i=[],a=0;a<e.length;a++)i.push(e[a].name);t[0].value=i.join(", "),t.trigger("change")})})}(cash);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zLmpzIl0sIm5hbWVzIjpbIiQiLCJNIiwidXBkYXRlVGV4dEZpZWxkcyIsImVhY2giLCJlbGVtZW50IiwiaW5kZXgiLCJpbnB1dF9zZWxlY3RvciIsImF1dG9mb2N1cyIsIiR0aGlzIiwiYXR0ciIsImFkZENsYXNzIiwibGVuZ3RoIiwic2libGluZ3MiLCJ2YWxpZGl0eSIsImJhZElucHV0IiwidG9nZ2xlQ2xhc3MiLCJ2YWxpZGF0ZV9maWVsZCIsIm9iamVjdCIsImhhc0xlbmd0aCIsInBhcnNlSW50IiwibGVuIiwidmFsdWUiLCJpcyIsImhhc0NsYXNzIiwibGVuQXR0ciIsInJlbW92ZUNsYXNzIiwidGV4dGFyZWFBdXRvUmVzaXplIiwiJHRleHRhcmVhIiwiY29uc29sZSIsIkVsZW1lbnQiLCJoaWRkZW5EaXYiLCJmaXJzdCIsImFwcGVuZCIsImZvbnRTaXplIiwiY3NzIiwibGluZUhlaWdodCIsInBhZGRpbmdSaWdodCIsInBhZGRpbmdCb3R0b20iLCJwYWRkaW5nTGVmdCIsImZvbnRGYW1pbHkiLCJwYWRkaW5nVG9wIiwiZGF0YSIsImhlaWdodCIsImNvbnRlbnQiLCJodG1sIiwicmVwbGFjZSIsIm9mZnNldEhlaWdodCIsIndpZHRoIiwidGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImVycm9yIiwiZG9jdW1lbnQiLCJyZWFkeSIsInRoaXMiLCJvbiIsImUiLCJmb3JtUmVzZXQiLCJ0YXJnZXQiLCJmaW5kIiwicmVzZXRfdGV4dCIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiJGlucHV0RWxlbWVudCIsInNlbGVjdG9yIiwia2V5cyIsIm9uZSIsInRleHRfYXJlYV9zZWxlY3RvciIsInBhdGhfaW5wdXQiLCJjbG9zZXN0IiwiaSIsImZpbGVzIiwiZmlsZV9uYW1lcyIsInB1c2giLCJuYW1lIiwiam9pbiIsImZpbGVfZmllbGQiLCJjYXNoIl0sIm1hcHBpbmdzIjoiY0FBQyxTQUFVQSxHQUFWQyxF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b3Jtcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCkge1xuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgbGFiZWxzIG9mIHRleHQgZmllbGRzXG4gIE0udXBkYXRlVGV4dEZpZWxkcyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgaW5wdXRbdHlwZT1kYXRlXSwgaW5wdXRbdHlwZT10aW1lXSwgdGV4dGFyZWEnO1xuICAgICQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XG4gICAgICBpZiAoZWxlbWVudC52YWx1ZS5sZW5ndGggPiAwIHx8ICQoZWxlbWVudCkuaXMoJzpmb2N1cycpIHx8IGVsZW1lbnQuYXV0b2ZvY3VzIHx8ICR0aGlzLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09IG51bGwpIHtcbiAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnZhbGlkaXR5KSB7XG4gICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBlbGVtZW50LnZhbGlkaXR5LmJhZElucHV0ID09PSB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBNLnZhbGlkYXRlX2ZpZWxkID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgbGV0IGhhc0xlbmd0aCA9IG9iamVjdC5hdHRyKCdkYXRhLWxlbmd0aCcpICE9PSBudWxsO1xuICAgIGxldCBsZW5BdHRyID0gcGFyc2VJbnQob2JqZWN0LmF0dHIoJ2RhdGEtbGVuZ3RoJykpO1xuICAgIGxldCBsZW4gPSBvYmplY3RbMF0udmFsdWUubGVuZ3RoO1xuXG4gICAgaWYgKGxlbiA9PT0gMCAmJiBvYmplY3RbMF0udmFsaWRpdHkuYmFkSW5wdXQgPT09IGZhbHNlICYmICFvYmplY3QuaXMoJzpyZXF1aXJlZCcpKSB7XG4gICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xuICAgICAgICAvLyBDaGVjayBmb3IgY2hhcmFjdGVyIGNvdW50ZXIgYXR0cmlidXRlc1xuICAgICAgICBpZiAoKG9iamVjdC5pcygnOnZhbGlkJykgJiYgaGFzTGVuZ3RoICYmIChsZW4gPD0gbGVuQXR0cikpIHx8IChvYmplY3QuaXMoJzp2YWxpZCcpICYmICFoYXNMZW5ndGgpKSB7XG4gICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCd2YWxpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuXG4gIE0udGV4dGFyZWFBdXRvUmVzaXplID0gZnVuY3Rpb24oJHRleHRhcmVhKSB7XG4gICAgLy8gV3JhcCBpZiBuYXRpdmUgZWxlbWVudFxuICAgIGlmICgkdGV4dGFyZWEgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAkdGV4dGFyZWEgPSAkKCR0ZXh0YXJlYSk7XG4gICAgfVxuXG4gICAgaWYgKCEkdGV4dGFyZWEubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiTm8gdGV4dGFyZWEgZWxlbWVudCBmb3VuZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUZXh0YXJlYSBBdXRvIFJlc2l6ZVxuICAgIGxldCBoaWRkZW5EaXYgPSAkKCcuaGlkZGVuZGl2JykuZmlyc3QoKTtcbiAgICBpZiAoIWhpZGRlbkRpdi5sZW5ndGgpIHtcbiAgICAgIGhpZGRlbkRpdiA9ICQoJzxkaXYgY2xhc3M9XCJoaWRkZW5kaXYgY29tbW9uXCI+PC9kaXY+Jyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGhpZGRlbkRpdik7XG4gICAgfVxuXG4gICAgLy8gU2V0IGZvbnQgcHJvcGVydGllcyBvZiBoaWRkZW5EaXZcbiAgICBsZXQgZm9udEZhbWlseSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtZmFtaWx5Jyk7XG4gICAgbGV0IGZvbnRTaXplID0gJHRleHRhcmVhLmNzcygnZm9udC1zaXplJyk7XG4gICAgbGV0IGxpbmVIZWlnaHQgPSAkdGV4dGFyZWEuY3NzKCdsaW5lLWhlaWdodCcpO1xuXG4gICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgcGFkZGluZyBzaG9ydGhhbmQuXG4gICAgbGV0IHBhZGRpbmdUb3AgPSAkdGV4dGFyZWEuY3NzKCdwYWRkaW5nLXRvcCcpO1xuICAgIGxldCBwYWRkaW5nUmlnaHQgPSAkdGV4dGFyZWEuY3NzKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgbGV0IHBhZGRpbmdCb3R0b20gPSAkdGV4dGFyZWEuY3NzKCdwYWRkaW5nLWJvdHRvbScpO1xuICAgIGxldCBwYWRkaW5nTGVmdCA9ICR0ZXh0YXJlYS5jc3MoJ3BhZGRpbmctbGVmdCcpO1xuXG4gICAgaWYgKGZvbnRTaXplKSB7IGhpZGRlbkRpdi5jc3MoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKTsgfVxuICAgIGlmIChmb250RmFtaWx5KSB7IGhpZGRlbkRpdi5jc3MoJ2ZvbnQtZmFtaWx5JywgZm9udEZhbWlseSk7IH1cbiAgICBpZiAobGluZUhlaWdodCkgeyBoaWRkZW5EaXYuY3NzKCdsaW5lLWhlaWdodCcsIGxpbmVIZWlnaHQpOyB9XG4gICAgaWYgKHBhZGRpbmdUb3ApIHsgaGlkZGVuRGl2LmNzcygncGFkZGluZy10b3AnLCBwYWRkaW5nVG9wKTsgfVxuICAgIGlmIChwYWRkaW5nUmlnaHQpIHsgaGlkZGVuRGl2LmNzcygncGFkZGluZy1yaWdodCcsIHBhZGRpbmdSaWdodCk7IH1cbiAgICBpZiAocGFkZGluZ0JvdHRvbSkgeyBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLWJvdHRvbScsIHBhZGRpbmdCb3R0b20pOyB9XG4gICAgaWYgKHBhZGRpbmdMZWZ0KSB7IGhpZGRlbkRpdi5jc3MoJ3BhZGRpbmctbGVmdCcsIHBhZGRpbmdMZWZ0KTsgfVxuXG4gICAgLy8gU2V0IG9yaWdpbmFsLWhlaWdodCwgaWYgbm9uZVxuICAgIGlmICghJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcpKSB7XG4gICAgICAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JywgJHRleHRhcmVhLmhlaWdodCgpKTtcbiAgICB9XG5cbiAgICBpZiAoJHRleHRhcmVhLmF0dHIoJ3dyYXAnKSA9PT0gJ29mZicpIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ292ZXJmbG93LXdyYXAnLCAnbm9ybWFsJylcbiAgICAgICAgLmNzcygnd2hpdGUtc3BhY2UnLCAncHJlJyk7XG4gICAgfVxuXG4gICAgaGlkZGVuRGl2LnRleHQoJHRleHRhcmVhWzBdLnZhbHVlICsgJ1xcbicpO1xuICAgIGxldCBjb250ZW50ID0gaGlkZGVuRGl2Lmh0bWwoKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcblxuXG4gICAgLy8gV2hlbiB0ZXh0YXJlYSBpcyBoaWRkZW4sIHdpZHRoIGdvZXMgY3JhenkuXG4gICAgLy8gQXBwcm94aW1hdGUgd2l0aCBoYWxmIG9mIHdpbmRvdyBzaXplXG5cbiAgICBpZiAoJHRleHRhcmVhWzBdLm9mZnNldFdpZHRoID4gMCAmJiAkdGV4dGFyZWFbMF0ub2Zmc2V0SGVpZ2h0ID4gMCkge1xuICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCAkdGV4dGFyZWEud2lkdGgoKSArICdweCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgKHdpbmRvdy5pbm5lcldpZHRoLzIpICsgJ3B4Jyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgaWYgdGhlIG5ldyBoZWlnaHQgaXMgZ3JlYXRlciB0aGFuIHRoZVxuICAgICAqIG9yaWdpbmFsIGhlaWdodCBvZiB0aGUgdGV4dGFyZWFcbiAgICAgKi9cbiAgICBpZiAoJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcpIDw9IGhpZGRlbkRpdi5pbm5lckhlaWdodCgpKSB7XG4gICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCBoaWRkZW5EaXYuaW5uZXJIZWlnaHQoKSArICdweCcpO1xuICAgIH0gZWxzZSBpZiAoJHRleHRhcmVhWzBdLnZhbHVlLmxlbmd0aCA8ICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBJbiBjYXNlIHRoZSBuZXcgaGVpZ2h0IGlzIGxlc3MgdGhhbiBvcmlnaW5hbCBoZWlnaHQsIGl0XG4gICAgICAgKiBtZWFucyB0aGUgdGV4dGFyZWEgaGFzIGxlc3MgdGV4dCB0aGFuIGJlZm9yZVxuICAgICAgICogU28gd2Ugc2V0IHRoZSBoZWlnaHQgdG8gdGhlIG9yaWdpbmFsIG9uZVxuICAgICAgICovXG4gICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JykgKyAncHgnKTtcbiAgICB9XG4gICAgJHRleHRhcmVhLmRhdGEoJ3ByZXZpb3VzLWxlbmd0aCcsICR0ZXh0YXJlYVswXS52YWx1ZS5sZW5ndGgpO1xuICB9O1xuXG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgLy8gVGV4dCBiYXNlZCBpbnB1dHNcbiAgICBsZXQgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIGlucHV0W3R5cGU9ZGF0ZV0sIGlucHV0W3R5cGU9dGltZV0sIHRleHRhcmVhJztcblxuICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZih0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMCB8fCAkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09IG51bGwpIHtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgICBNLnZhbGlkYXRlX2ZpZWxkKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSBpZiBpbnB1dCBlbGVtZW50IGhhcyBiZWVuIHByZS1wb3B1bGF0ZWQgb24gZG9jdW1lbnQgcmVhZHlcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpO1xuICAgIH0pO1xuXG4gICAgLy8gSFRNTCBET00gRk9STSBSRVNFVCBoYW5kbGluZ1xuICAgICQoZG9jdW1lbnQpLm9uKCdyZXNldCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGxldCBmb3JtUmVzZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkge1xuICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgZm9ybVJlc2V0LmZpbmQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVzZXQgc2VsZWN0IChhZnRlciBuYXRpdmUgcmVzZXQpXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm9ybVJlc2V0LmZpbmQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIGlmICh0aGlzLk1fRm9ybVNlbGVjdCkge1xuICAgICAgICAgICAgICBsZXQgcmVzZXRfdGV4dCA9ICQodGhpcykuZmluZCgnb3B0aW9uW3NlbGVjdGVkXScpLnRleHQoKTtcbiAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJylbMF0udmFsdWUgPSByZXNldF90ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBhY3RpdmUgd2hlbiBlbGVtZW50IGhhcyBmb2N1c1xuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyhpbnB1dF9zZWxlY3RvcikpIHtcbiAgICAgICAgJChlLnRhcmdldCkuc2libGluZ3MoJ2xhYmVsLCAucHJlZml4JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFjdGl2ZSB3aGVuIGVsZW1lbnQgaXMgYmx1cnJlZFxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgbGV0ICRpbnB1dEVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcbiAgICAgIGlmICgkaW5wdXRFbGVtZW50LmlzKGlucHV0X3NlbGVjdG9yKSkge1xuICAgICAgICBsZXQgc2VsZWN0b3IgPSBcIi5wcmVmaXhcIjtcblxuICAgICAgICBpZiAoJGlucHV0RWxlbWVudFswXS52YWx1ZS5sZW5ndGggPT09IDAgJiYgJGlucHV0RWxlbWVudFswXS52YWxpZGl0eS5iYWRJbnB1dCAhPT0gdHJ1ZSAmJiAkaW5wdXRFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJykgPT09IG51bGwpIHtcbiAgICAgICAgICBzZWxlY3RvciArPSBcIiwgbGFiZWxcIjtcbiAgICAgICAgfVxuICAgICAgICAkaW5wdXRFbGVtZW50LnNpYmxpbmdzKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIE0udmFsaWRhdGVfZmllbGQoJGlucHV0RWxlbWVudCk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICAvLyBSYWRpbyBhbmQgQ2hlY2tib3ggZm9jdXMgY2xhc3NcbiAgICBsZXQgcmFkaW9fY2hlY2tib3ggPSAnaW5wdXRbdHlwZT1yYWRpb10sIGlucHV0W3R5cGU9Y2hlY2tib3hdJztcbiAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCByYWRpb19jaGVja2JveCwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gVEFCLCBjaGVjayBpZiB0YWJiaW5nIHRvIHJhZGlvIG9yIGNoZWNrYm94LlxuICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5UQUIpIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndGFiYmVkJyk7XG4gICAgICAgIGxldCAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICR0aGlzLm9uZSgnYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd0YWJiZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCB0ZXh0X2FyZWFfc2VsZWN0b3IgPSAnLm1hdGVyaWFsaXplLXRleHRhcmVhJztcbiAgICAkKHRleHRfYXJlYV9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgJHRleHRhcmVhID0gJCh0aGlzKTtcbiAgICAgIC8qKlxuICAgICAgICogUmVzaXplIHRleHRhcmVhIG9uIGRvY3VtZW50IGxvYWQgYWZ0ZXIgc3RvcmluZ1xuICAgICAgICogdGhlIG9yaWdpbmFsIGhlaWdodCBhbmQgdGhlIG9yaWdpbmFsIGxlbmd0aFxuICAgICAgICovXG4gICAgICAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JywgJHRleHRhcmVhLmhlaWdodCgpKTtcbiAgICAgICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnLCB0aGlzLnZhbHVlLmxlbmd0aCk7XG4gICAgICBNLnRleHRhcmVhQXV0b1Jlc2l6ZSgkdGV4dGFyZWEpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgdGV4dF9hcmVhX3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBNLnRleHRhcmVhQXV0b1Jlc2l6ZSgkKHRoaXMpKTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICAvLyBGaWxlIElucHV0IFBhdGhcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5maWxlLWZpZWxkIGlucHV0W3R5cGU9XCJmaWxlXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGZpbGVfZmllbGQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5maWxlLWZpZWxkJyk7XG4gICAgICBsZXQgcGF0aF9pbnB1dCA9IGZpbGVfZmllbGQuZmluZCgnaW5wdXQuZmlsZS1wYXRoJyk7XG4gICAgICBsZXQgZmlsZXMgICAgICA9ICQodGhpcylbMF0uZmlsZXM7XG4gICAgICBsZXQgZmlsZV9uYW1lcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaWxlX25hbWVzLnB1c2goZmlsZXNbaV0ubmFtZSk7XG4gICAgICB9XG4gICAgICBwYXRoX2lucHV0WzBdLnZhbHVlID0gZmlsZV9uYW1lcy5qb2luKFwiLCBcIik7XG4gICAgICBwYXRoX2lucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH0pO1xuXG4gIH0pOyAvLyBFbmQgb2YgJChkb2N1bWVudCkucmVhZHlcbn0oIGNhc2ggKSk7XG4iXX0=
