"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),_get=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}!function(s,a){var e={indicators:!0,height:400,duration:500,interval:6e3},t=function(t){function n(t,e){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,t,e));return(i.el.M_Slider=i).options=s.extend({},n.defaults,e),i.$slider=i.$el.find(".slides"),i.$slides=i.$slider.children("li"),i.activeIndex=i.$slides.filter(function(t){return s(t).hasClass("active")}).first().index(),-1!=i.activeIndex&&(i.$active=i.$slides.eq(i.activeIndex)),i._setSliderHeight(),i.$slides.find(".caption").each(function(t){i._animateCaptionIn(t,0)}),i.$slides.find("img").each(function(t){var e="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";s(t).attr("src")!==e&&(s(t).css("background-image",'url("'+s(t).attr("src")+'")'),s(t).attr("src",e))}),i._setupIndicators(),i.$active?i.$active.css("display","block"):(i.$slides.first().addClass("active"),a({targets:i.$slides.first()[0],opacity:1,duration:i.options.duration,easing:"easeOutQuad"}),i.activeIndex=0,i.$active=i.$slides.eq(i.activeIndex),i.options.indicators&&i.$indicators.eq(i.activeIndex).addClass("active")),i.$active.find("img").each(function(t){a({targets:i.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:i.options.duration,easing:"easeOutQuad"})}),i._setupEventHandlers(),i.start(),i}return _inherits(n,Component),_createClass(n,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(t){t.addEventListener("click",e._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each(function(t){t.removeEventListener("click",e._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(t){var e=s(t.target).index();this.set(e)}},{key:"_handleInterval",value:function(){var t=this.$slider.find(".active").index();this.$slides.length===t+1?t=0:t+=1,this.set(t)}},{key:"_animateCaptionIn",value:function(t,e){var i={targets:t,opacity:0,duration:e,easing:"easeOutQuad"};s(t).hasClass("center-align")?i.translateY=-100:s(t).hasClass("right-align")?i.translateX=100:s(t).hasClass("left-align")&&(i.translateX=-100),a(i)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var n=this;this.options.indicators&&(this.$indicators=s('<ul class="indicators"></ul>'),this.$slides.each(function(t,e){var i=s('<li class="indicator-item"></li>');n.$indicators.append(i[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(t){var e=this;if(t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.activeIndex!=t){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),a({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){e.$slides.not(".active").each(function(t){a({targets:t,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(t).addClass("active")),a({targets:this.$slides.eq(t)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),a({targets:this.$slides.eq(t).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(t).addClass("active"),this.activeIndex=t,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var t=this.activeIndex+1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}},{key:"prev",value:function(){var t=this.activeIndex-1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}}],[{key:"init",value:function(t,e){return _get(n.__proto__||Object.getPrototypeOf(n),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Slider}},{key:"defaults",get:function(){return e}}]),n}();M.Slider=t,M.jQueryLoaded&&M.initializeJqueryWrapper(t,"slider","M_Slider")}(cash,M.anime);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyIkIiwiYW5pbSIsIl9kZWZhdWx0cyIsImluZGljYXRvcnMiLCJoZWlnaHQiLCJkdXJhdGlvbiIsImludGVydmFsIiwiX0NvbXBvbmVudCIsIlNsaWRlciIsImVsIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJjYWxsIiwiTV9TbGlkZXIiLCJleHRlbmQiLCJkZWZhdWx0cyIsIiRzbGlkZXIiLCIkZWwiLCJmaW5kIiwiJHNsaWRlcyIsImNoaWxkcmVuIiwiYWN0aXZlSW5kZXgiLCJmaWx0ZXIiLCJpdGVtIiwiaGFzQ2xhc3MiLCJmaXJzdCIsImluZGV4IiwiJGFjdGl2ZSIsImVxIiwiX3NldFNsaWRlckhlaWdodCIsImVhY2giLCJfYW5pbWF0ZUNhcHRpb25JbiIsImF0dHIiLCJfc2V0dXBJbmRpY2F0b3JzIiwiY3NzIiwidGFyZ2V0cyIsIm9wYWNpdHkiLCJlYXNpbmciLCJwbGFjZWhvbGRlckJhc2U2NCIsIiRpbmRpY2F0b3JzIiwiYWRkQ2xhc3MiLCJfc2V0dXBFdmVudEhhbmRsZXJzIiwic3RhcnQiLCJfaW5oZXJpdHMiLCJDb21wb25lbnQiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsInBhdXNlIiwiX3JlbW92ZUluZGljYXRvcnMiLCJfcmVtb3ZlRXZlbnRIYW5kbGVycyIsInVuZGVmaW5lZCIsIl9oYW5kbGVJbnRlcnZhbEJvdW5kIiwiX2hhbmRsZUludGVydmFsIiwiYmluZCIsIl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kIiwiX2hhbmRsZUluZGljYXRvckNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90aGlzMiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwiY3VyckluZGV4IiwidGFyZ2V0Iiwic2V0IiwibmV3QWN0aXZlSW5kZXgiLCJsZW5ndGgiLCJhbmltT3B0aW9ucyIsImNhcHRpb24iLCJ0cmFuc2xhdGVZIiwiX3RoaXM0IiwiJGluZGljYXRvciIsImFwcGVuZCIsInJlbW92ZSIsIl90aGlzNSIsIiRjYXB0aW9uIiwicmVtb3ZlQ2xhc3MiLCJjb21wbGV0ZSIsInRyYW5zbGF0ZVgiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJuZXdJbmRleCIsImRlbGF5IiwiZWxzIiwiZ2V0IiwiTSIsImluaXRpYWxpemVKcXVlcnlXcmFwcGVyIiwiY2FzaCIsImFuaW1lIl0sIm1hcHBpbmdzIjoiNG5DQUFDLFNBQVVBLEVBQUdDLEdBR1osSUFBSUMsRUFBWSxDQUNkQyxZQUFZLEVBQ1pDLE9BQVEsSUFDUkMsU0FBVSxJQUNWQyxTQUFVLEtBSlJKLEVBSGMsU0FBQUssR0FXbEIsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQUMsZ0JBQUFDLEtBQUFKLEdBQUEsSUFBQUssRUFBQUMsMkJBQUFGLE1BQUFKLEVBQUFPLFdBQUFDLE9BQUFDLGVBQUFULElBQUFVLEtBQUFOLEtBWVVKLEVBQVFDLEVBQUlDLElBWnRCLE9BY0lHLEVBQUtKLEdBQUdVLFNBQVJOLEdBVUtILFFBQVVWLEVBQUVvQixPQUFPLEdBQUlaLEVBQU9hLFNBQVVYLEdBRzdDRyxFQUFLUyxRQUFVVCxFQUFLVSxJQUFJQyxLQUFLLFdBaEJOWCxFQUFBWSxRQUFBWixFQUFBUyxRQUFBSSxTQUFBLE1Ba0J2QmIsRUFBS2MsWUFBY2QsRUFBS1ksUUFBUUcsT0FBTyxTQUFTQyxHQUFRLE9BQU83QixFQUFFNkIsR0FBTUMsU0FBUyxZQUFjQyxRQUFRQyxTQWZ0RyxHQUFBbkIsRUFBUU0sY0FpQk5OLEVBQUtvQixRQUFVcEIsRUFBS1ksUUFBUVMsR0FBR3JCLEVBQUtjLGNBR3RDZCxFQUFLc0IsbUJBR0x0QixFQUFLWSxRQUFRRCxLQUFLLFlBQVlZLEtBQUssU0FBQzNCLEdBQ2xDSSxFQUFLd0Isa0JBQWtCNUIsRUFBSSxLQVo3QkksRUFBQVksUUFBQUQsS0FBQSxPQUFBWSxLQUFBLFNBQUEzQixHQUNBLElBQUthLEVBQW1CRSxxRkFDbkJDLEVBQUFBLEdBQUFBLEtBQVUsU0FBS0gsSUFDcEJ0QixFQUFLMkIsR0FBQUEsSUFBQUEsbUJBQTJCQyxRQUFPNUIsRUFBQVMsR0FBQTZCLEtBQUEsT0FBZSxNQUFFdEMsRUFBQVMsR0FBT1QsS0FBQSxNQUFROEIsTUFHdEVqQixFQUFBMEIsbUJBcUJHMUIsRUFBS29CLFFBakJUcEIsRUFBQW9CLFFBQUFPLElBQUEsVUFBQSxVQUVFM0IsRUFBQVksUUFBS1ksUUFBQUEsU0FBTCxVQURGcEMsRUFBQSxDQXFCSXdDLFFBQVM1QixFQUFLWSxRQUFRTSxRQUFRLEdBakJsQ1csUUFBQSxFQUNBckMsU0FBYW1CLEVBQUtkLFFBQU8wQixTQUN2Qk8sT0FBSUMsZ0JBR0Y1QyxFQUFFUyxZQUFGLEVBQ0RJLEVBQUFvQixRQUFBcEIsRUFBQVksUUFBQVMsR0FBQXJCLEVBQUFjLGFBR0VZLEVBQUFBLFFBQUFBLFlBbUJEMUIsRUFBS2dDLFlBQVlYLEdBQUdyQixFQUFLYyxhQUFhbUIsU0FBUyxXQWJqRGpDLEVBQUFvQixRQUFLUixLQUFRTSxPQUFRZSxLQUFBQSxTQUFBQSxHQUNyQjdDLEVBQUssQ0FDSHdDLFFBQVM1QixFQUFBb0IsUUFBQVQsS0FBYU8sWUFEbkIsR0FFSFcsUUFBUyxFQUNUckMsV0FBVSxFQUNWc0MsV0FBUSxFQUpWdEMsU0FBQVEsRUFBQUgsUUFBQUwsU0F3QkVzQyxPQUFRLGtCQWRWOUIsRUFBQWtDLHNCQUdDbEMsRUFBQW1DLFFBdEVQbkMsRUFYa0IsT0FBQW9DLFVBQUF6QyxFQUdGMEMsV0FIRUMsYUFBQTNDLEVBQUEsQ0FBQSxDQUFBNEMsSUFBQSxVQUFBQyxNQUFBLFdBQUF6QyxLQUFBMEMsUUEySGQxQyxLQUFLMkMsb0JBQ0wzQyxLQUFLNEMsdUJBTlA1QyxLQUFBSCxHQUFBVSxjQUFBc0MsSUF0SGdCLENBQUFMLElBQUEsc0JBQUFDLE1BQUEsV0E0SFRHLElBQUFBLEVBQUFBLEtBQ0w1QyxLQUFBOEMscUJBQW1CRCxLQUFuQkUsZ0JBQUFDLEtBQUFoRCxNQUNEQSxLQUFBaUQsMkJBQUFqRCxLQUFBa0Qsc0JBQUFGLEtBQUFoRCxNQUVEQSxLQUFBRixRQUFBUCxZQVFJUyxLQUFLaUMsWUFBWVQsS0FBSyxTQUFDM0IsR0FDckJBLEVBQUdzRCxpQkFBaUIsUUFBU0MsRUFBS0gsZ0NBekl4QixDQUFBVCxJQUFBLHVCQUFBQyxNQUFBLFdBcUlUUSxJQUFBQSxFQUFBQSxLQWFEakQsS0FBS0YsUUFBUVAsWUFYakJTLEtBQUlpQyxZQUFhMUMsS0FBQUEsU0FBQUEsR0FDZk0sRUFBQXdELG9CQUFzQixRQUFDeEQsRUFBT29ELGdDQXhJbEIsQ0FBQVQsSUFBQSx3QkFBQUMsTUFBQSxTQTZKTWEsR0E3Sk4sSUFBQUMsRUFBQW5FLEVBQUFrRSxFQUFBRSxRQUFBcEMsUUFBQXBCLEtBQUF5RCxJQUFBRixLQUFBLENBQUFmLElBQUEsa0JBQUFDLE1BQUEsV0FxSlgsSUFBQWlCLEVBRkQxRCxLQUFBVSxRQUFBRSxLQUFBLFdBQUFRLFFBR0RwQixLQUFBYSxRQUFBOEMsU0FBQUQsRUFBQSxFQUFBQSxFQUFBLEVBQ0ZBLEdBQUEsRUFFRDFELEtBQUF5RCxJQUFBQyxLQXpKZ0IsQ0FBQWxCLElBQUEsb0JBQUFDLE1BQUEsU0E4SlZjLEVBQWdCQyxHQUNwQixJQUFBSSxFQUFTTCxDQUNWMUIsUUFBQWdDLEVBcUJHL0IsUUFBUyxFQW5CYnJDLFNBQUFBLEVBcUJJc0MsT0FBUSxlQXZMSTNDLEVBQUF5RSxHQUFBM0MsU0FBQSxnQkFBQTBDLEVBQUFFLFlBQUEsSUFzS1ZKLEVBQUFBLEdBQUFBLFNBQXNCaEQsZUFDMUJrRCxFQUFTL0MsV0FBTCxJQXlCT3pCLEVBQUV5RSxHQUFTM0MsU0FBUyxnQkF0Qi9CMEMsRUFBU0YsWUFBVCxLQUdGckUsRUFBQXVFLEtBN0tnQixDQUFBcEIsSUFBQSxtQkFBQUMsTUFBQSxXQUFBekMsS0FBQVcsSUFBQU8sU0FBQSxnQkFtTFYwQyxLQUFBQSxRQUFBQSxXQUVGOUIsS0FBQUEsSUFBU0YsSUFGTyxTQUFBNUIsS0FBQUYsUUFBQU4sT0FBQSxHQUFBLE1BSWhCdUMsS0FBQUEsSUFBUUgsSUFBQSxTQUFBNUIsS0FBQUYsUUFBQU4sT0FBQSxNQTRCUlEsS0FBS1UsUUFBUWtCLElBQUksU0FBVTVCLEtBQUtGLFFBQVFOLE9BQVMsU0FuTnJDLENBQUFnRCxJQUFBLG1CQUFBQyxNQUFBLFdBa01iLElBQUFzQixFQUFBL0QsS0F5QkdBLEtBQUtGLFFBQVFQLGFBdkJqQkYsS0FBS3VFLFlBQUx4RSxFQUFBLGdDQUNEWSxLQUFBYSxRQUFBVyxLQUFBLFNBQUEzQixFQUFBdUIsR0F5QkssSUFBSTRDLEVBQWE1RSxFQUFFLG9DQXZCekIyRSxFQUFBOUIsWUFBQWdDLE9BQUFELEVBQUEsTUEwQkloRSxLQUFLVyxJQUFJc0QsT0FBT2pFLEtBQUtpQyxZQUFZLElBQ2pDakMsS0FBS2lDLFlBQWNqQyxLQUFLaUMsWUFBWW5CLFNBQVMsd0JBbE9qQyxDQUFBMEIsSUFBQSxvQkFBQUMsTUFBQSxXQStNVnpDLEtBQUFXLElBQUFDLEtBQUEsaUJBQXdCc0QsV0EvTWQsQ0FBQTFCLElBQUEsTUFBQUMsTUFBQSxTQWlQWnJCLEdBQU8sSUFBQStDLEVBQUFuRSxLQWpQSyxHQW1QVm9CLEdBQVNwQixLQUFLYSxRQUFROEMsT0FBUXZDLEVBQVEsRUFDakNBLEVBQVEsSUFBR0EsRUFBUXBCLEtBQUthLFFBQVE4QyxPQUFTLEdBcFBwQzNELEtBQUFlLGFBQUFLLEVBQUEsQ0FBQXBCLEtBQUFxQixRQUFBckIsS0FBQWEsUUFBQVMsR0FBQXRCLEtBME5HZSxhQUFBLElBQUFxRCxFQUFBcEUsS0FBQXFCLFFBQUFULEtBQUEsWUFnQ2ZaLEtBQUtxQixRQUFRZ0QsWUFBWSxVQTlCekJoRixFQUFBLENBQ0F3QyxRQUFLaEIsS0FBUVcsUUFBSyxHQUNoQk0sUUFBSWtDLEVBQ0p2RSxTQUFLd0MsS0FBQUEsUUFBWWdDLFNBQ2xCbEMsT0FIRCxjQUlBdUMsU0FBU0wsV0FDVEUsRUFBS2xDLFFBQUFBLElBQWMsV0FBS0EsS0FBTCxTQUFpQm5CLEdBQ3JDekIsRUFBQSxDQUNGd0MsUUFBQWhDLEVBaUNXaUMsUUFBUyxFQS9CckJ5QyxXQUFBLEVBaUNZVCxXQUFZLEVBQ1pyRSxTQUFVLEVBQ1ZzQyxPQUFRLHFCQU1oQi9CLEtBQUt5QixrQkFBa0IyQyxFQUFTLEdBQUlwRSxLQUFLRixRQUFRTCxVQUc3Q08sS0FBS0YsUUFBUVAsYUFDZlMsS0FBS2lDLFlBQVlYLEdBQUd0QixLQUFLZSxhQUFhc0QsWUFBWSxVQUNsRHJFLEtBQUtpQyxZQUFZWCxHQUFHRixHQUFPYyxTQUFTLFdBcFIxQjdDLEVBQUEsQ0FpUEx3QyxRQUFBN0IsS0FBQWEsUUFBQVMsR0FBQUYsR0FBQSxHQXdDTFUsUUFBUyxFQXZDYnJDLFNBQUFPLEtBQUFGLFFBQUFMLFNBQ0FzQyxPQUFJWCxnQkFJSi9CLEVBQUksQ0FDRndDLFFBQUtSLEtBQUxSLFFBQW9CQSxHQUFBQSxHQUFXRCxLQUFLRyxZQUFwQyxHQUNBZSxRQUFJc0MsRUFDSkcsV0FBQSxFQXdDRVQsV0FBWSxFQXRDZHpFLFNBQUtXLEtBQUFGLFFBQUFMLFNBQ0hvQyxNQUFBQSxLQUFTL0IsUUFBS3VCLFNBQ2RTLE9BQUFBLGdCQUdBd0MsS0FBQUEsUUFBQUEsR0FBVWxELEdBQUFjLFNBQUEsVUFDUmxDLEtBQUFlLFlBQUtGLEVBR0RpQixLQUFBQSxXQXJRSSxDQUFBVSxJQUFBLFFBQUFDLE1BQUEsV0E0UFArQixjQUFMeEUsS0FBQU4sWUE1UFksQ0FBQThDLElBQUEsUUFBQUMsTUFBQSxXQW9SVitCLGNBQUt2QyxLQUFBQSxVQUNOakMsS0FBQU4sU0FBQStFLFlBd0NEekUsS0FBSzhDLHFCQUFzQjlDLEtBQUtGLFFBQVFMLFNBQVdPLEtBQUtGLFFBQVFKLFlBN1RwRCxDQUFBOEMsSUFBQSxPQUFBQyxNQUFBLFdBOFJacEQsSUFBQUEsRUFBS1csS0FBQWUsWUFBQSxFQUdId0QsR0FBQUEsS0FIRzFELFFBQUE4QyxPQUFBZSxFQUFBLEVBSUhaLEVBSkcsSUFBQVksRUFBQTFFLEtBQUFhLFFBQUE4QyxPQUFBLEdBTUhnQixLQUFBQSxJQUFBQSxLQXBTVSxDQUFBbkMsSUFBQSxPQUFBQyxNQUFBLFdBMlNaLElBQUFpQyxFQUFBMUUsS0FBQWUsWUFBQSxFQUdIMkQsR0FBQTFFLEtBQUFhLFFBQUE4QyxPQUFBZSxFQUFBLEVBd0NVQSxFQUFXLElBQUdBLEVBQVcxRSxLQUFLYSxRQUFROEMsT0FBUyxHQUV4RDNELEtBQUt5RCxJQUFJaUIsTUF4VkssQ0FBQSxDQUFBbEMsSUFBQSxPQUFBQyxNQUFBLFNBd0ZWWCxFQUZHaEMsR0FHSHlFLE9BQUFBLEtBQUFBLEVBQUFBLFdBQUFBLE9BQUFBLGVBQUFBLEdBQUFBLE9BQUFBLE1BQUFBLEtBQUFBLEtBSEd2RSxLQUFBNEUsRUFBQTlFLEtBdEZPLENBQUEwQyxJQUFBLGNBQUFDLE1BQUEsU0FpSEc1QyxHQUVqQixPQW5CS3NDLEVBQUFBLE9BQUx0QyxFQUFBLEdBQUFBLEdBbUJlVSxXQW5IRCxDQUFBaUMsSUFBQSxXQUFBcUMsSUFBQSxXQXFGZCxPQUFLeEQsTUFyRlN6QixFQUFBLEdBQUFrRixFQUFBbEYsT0FBQUEsRUFvVGQ0RSxFQUFBQSxjQUNETSxFQUFBQyx3QkFBQW5GLEVBQUEsU0FBQSxZQXJUSixDQWtXQ29GLEtBQU1GLEVBQUVHIiwiZmlsZSI6InNsaWRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgbGV0IF9kZWZhdWx0cyA9IHtcbiAgICBpbmRpY2F0b3JzOiB0cnVlLFxuICAgIGhlaWdodDogNDAwLFxuICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgaW50ZXJ2YWw6IDYwMDBcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG4gIGNsYXNzIFNsaWRlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IFNsaWRlciBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgICAgc3VwZXIoU2xpZGVyLCBlbCwgb3B0aW9ucyk7XG5cbiAgICAgIHRoaXMuZWwuTV9TbGlkZXIgPSB0aGlzO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBTbGlkZXIjb3B0aW9uc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtpbmRpY2F0b3JzPXRydWVdIC0gU2hvdyBpbmRpY2F0b3JzXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaGVpZ2h0PTQwMF0gLSBoZWlnaHQgb2Ygc2xpZGVyXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbZHVyYXRpb249NTAwXSAtIExlbmd0aCBpbiBtcyBvZiBzbGlkZSB0cmFuc2l0aW9uXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW50ZXJ2YWw9NjAwMF0gLSBMZW5ndGggaW4gbXMgb2Ygc2xpZGUgaW50ZXJ2YWxcbiAgICAgICAqL1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIFNsaWRlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIHNldHVwXG4gICAgICB0aGlzLiRzbGlkZXIgPSB0aGlzLiRlbC5maW5kKCcuc2xpZGVzJyk7XG4gICAgICB0aGlzLiRzbGlkZXMgPSB0aGlzLiRzbGlkZXIuY2hpbGRyZW4oJ2xpJyk7XG4gICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy4kc2xpZGVzLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7IHJldHVybiAkKGl0ZW0pLmhhc0NsYXNzKCdhY3RpdmUnKTsgfSkuZmlyc3QoKS5pbmRleCgpO1xuICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggIT0gLTEpIHtcbiAgICAgICAgdGhpcy4kYWN0aXZlID0gdGhpcy4kc2xpZGVzLmVxKHRoaXMuYWN0aXZlSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zZXRTbGlkZXJIZWlnaHQoKTtcblxuICAgICAgLy8gU2V0IGluaXRpYWwgcG9zaXRpb25zIG9mIGNhcHRpb25zXG4gICAgICB0aGlzLiRzbGlkZXMuZmluZCgnLmNhcHRpb24nKS5lYWNoKChlbCkgPT4ge1xuICAgICAgICB0aGlzLl9hbmltYXRlQ2FwdGlvbkluKGVsLCAwKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb3ZlIGltZyBzcmMgaW50byBiYWNrZ3JvdW5kLWltYWdlXG4gICAgICB0aGlzLiRzbGlkZXMuZmluZCgnaW1nJykuZWFjaCgoZWwpID0+IHtcbiAgICAgICAgbGV0IHBsYWNlaG9sZGVyQmFzZTY0ID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFCQVAvLy93QUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nO1xuICAgICAgICBpZiAoJChlbCkuYXR0cignc3JjJykgIT09IHBsYWNlaG9sZGVyQmFzZTY0KSB7XG4gICAgICAgICAgJChlbCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybChcIicgKyAkKGVsKS5hdHRyKCdzcmMnKSArICdcIiknKTtcbiAgICAgICAgICAkKGVsKS5hdHRyKCdzcmMnLCBwbGFjZWhvbGRlckJhc2U2NCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXR1cEluZGljYXRvcnMoKTtcblxuICAgICAgLy8gU2hvdyBhY3RpdmUgc2xpZGVcbiAgICAgIGlmICh0aGlzLiRhY3RpdmUpIHtcbiAgICAgICAgdGhpcy4kYWN0aXZlLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kc2xpZGVzLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRzbGlkZXMuZmlyc3QoKVswXSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLiRhY3RpdmUgPSB0aGlzLiRzbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lcSh0aGlzLmFjdGl2ZUluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IGhlaWdodCB0byBjdXJyZW50IHNsaWRlXG4gICAgICB0aGlzLiRhY3RpdmUuZmluZCgnaW1nJykuZWFjaCgoZWwpID0+IHtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy4kYWN0aXZlLmZpbmQoJy5jYXB0aW9uJylbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIC8vIGF1dG8gc2Nyb2xsXG4gICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBkZWZhdWx0cygpIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gc3VwZXIuaW5pdCh0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgbGV0IGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICByZXR1cm4gZG9tRWxlbS5NX1NsaWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgdGhpcy5fcmVtb3ZlSW5kaWNhdG9ycygpO1xuICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgdGhpcy5lbC5NX1NsaWRlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAqL1xuICAgIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVJbnRlcnZhbEJvdW5kID0gdGhpcy5faGFuZGxlSW50ZXJ2YWwuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbmRpY2F0b3JDbGljay5iaW5kKHRoaXMpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lYWNoKChlbCkgPT4ge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAqL1xuICAgIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgIHRoaXMuJGluZGljYXRvcnMuZWFjaCgoZWwpID0+IHtcbiAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW5kaWNhdG9yIGNsaWNrXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIF9oYW5kbGVJbmRpY2F0b3JDbGljayhlKSB7XG4gICAgICBsZXQgY3VyckluZGV4ID0gJChlLnRhcmdldCkuaW5kZXgoKTtcbiAgICAgIHRoaXMuc2V0KGN1cnJJbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIEludGVydmFsXG4gICAgICovXG4gICAgX2hhbmRsZUludGVydmFsKCkge1xuICAgICAgbGV0IG5ld0FjdGl2ZUluZGV4ID0gdGhpcy4kc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xuICAgICAgaWYgKHRoaXMuJHNsaWRlcy5sZW5ndGggPT09IG5ld0FjdGl2ZUluZGV4ICsgMSkgbmV3QWN0aXZlSW5kZXggPSAwOyAvLyBsb29wIHRvIHN0YXJ0XG4gICAgICBlbHNlIG5ld0FjdGl2ZUluZGV4ICs9IDE7XG5cbiAgICAgIHRoaXMuc2V0KG5ld0FjdGl2ZUluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbmltYXRlIGluIGNhcHRpb25cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNhcHRpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb25cbiAgICAgKi9cbiAgICBfYW5pbWF0ZUNhcHRpb25JbihjYXB0aW9uLCBkdXJhdGlvbikge1xuICAgICAgbGV0IGFuaW1PcHRpb25zID0ge1xuICAgICAgICB0YXJnZXRzOiBjYXB0aW9uLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgfTtcblxuICAgICAgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ2NlbnRlci1hbGlnbicpKSB7XG4gICAgICAgIGFuaW1PcHRpb25zLnRyYW5zbGF0ZVkgPSAtMTAwO1xuXG4gICAgICB9IGVsc2UgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ3JpZ2h0LWFsaWduJykpIHtcbiAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWCA9IDEwMDtcblxuICAgICAgfSBlbHNlIGlmICgkKGNhcHRpb24pLmhhc0NsYXNzKCdsZWZ0LWFsaWduJykpIHtcbiAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWCA9IC0xMDA7XG4gICAgICB9XG5cbiAgICAgIGFuaW0oYW5pbU9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBoZWlnaHQgb2Ygc2xpZGVyXG4gICAgICovXG4gICAgX3NldFNsaWRlckhlaWdodCgpIHtcbiAgICAgIC8vIElmIGZ1bGxzY3JlZW4sIGRvIG5vdGhpbmdcbiAgICAgIGlmICghdGhpcy4kZWwuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICAvLyBBZGQgaGVpZ2h0IGlmIGluZGljYXRvcnMgYXJlIHByZXNlbnRcbiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsICh0aGlzLm9wdGlvbnMuaGVpZ2h0ICsgNDApICsgJ3B4Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kZWwuY3NzKCdoZWlnaHQnLCB0aGlzLm9wdGlvbnMuaGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2xpZGVyLmNzcygnaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCArICdweCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIGluZGljYXRvcnNcbiAgICAgKi9cbiAgICBfc2V0dXBJbmRpY2F0b3JzKCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgIHRoaXMuJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKTtcbiAgICAgICAgdGhpcy4kc2xpZGVzLmVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGxldCAkaW5kaWNhdG9yID0gJCgnPGxpIGNsYXNzPVwiaW5kaWNhdG9yLWl0ZW1cIj48L2xpPicpO1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuYXBwZW5kKCRpbmRpY2F0b3JbMF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHRoaXMuJGluZGljYXRvcnNbMF0pO1xuICAgICAgICB0aGlzLiRpbmRpY2F0b3JzID0gdGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbignbGkuaW5kaWNhdG9yLWl0ZW0nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgaW5kaWNhdG9yc1xuICAgICAqL1xuICAgIF9yZW1vdmVJbmRpY2F0b3JzKCkge1xuICAgICAgdGhpcy4kZWwuZmluZCgndWwuaW5kaWNhdG9ycycpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN5Y2xlIHRvIG50aCBpdGVtXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICovXG4gICAgc2V0KGluZGV4KSB7XG4gICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLlxuICAgICAgaWYgKGluZGV4ID49IHRoaXMuJHNsaWRlcy5sZW5ndGgpIGluZGV4ID0gMDtcbiAgICAgIGVsc2UgaWYgKGluZGV4IDwgMCkgaW5kZXggPSB0aGlzLiRzbGlkZXMubGVuZ3RoIC0gMTtcblxuICAgICAgLy8gT25seSBkbyBpZiBpbmRleCBjaGFuZ2VzXG4gICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCAhPSBpbmRleCkge1xuICAgICAgICB0aGlzLiRhY3RpdmUgPSB0aGlzLiRzbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCk7XG4gICAgICAgIGxldCAkY2FwdGlvbiA9IHRoaXMuJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpO1xuICAgICAgICB0aGlzLiRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJGFjdGl2ZVswXSxcbiAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRzbGlkZXMubm90KCcuYWN0aXZlJykuZWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogZWwsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9hbmltYXRlQ2FwdGlvbkluKCRjYXB0aW9uWzBdLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3JzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZXEodGhpcy5hY3RpdmVJbmRleCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHNsaWRlcy5lcShpbmRleClbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcblxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRzbGlkZXMuZXEoaW5kZXgpLmZpbmQoJy5jYXB0aW9uJylbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBkZWxheTogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiRzbGlkZXMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4O1xuXG4gICAgICAgIC8vIFJlc2V0IGludGVydmFsXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBzbGlkZXIgaW50ZXJ2YWxcbiAgICAgKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgc2xpZGVyIGludGVydmFsXG4gICAgICovXG4gICAgc3RhcnQoKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKFxuICAgICAgICB0aGlzLl9oYW5kbGVJbnRlcnZhbEJvdW5kLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKyB0aGlzLm9wdGlvbnMuaW50ZXJ2YWxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSB0byBuZXh0IHNsaWRlXG4gICAgICovXG4gICAgbmV4dCgpIHtcbiAgICAgIGxldCBuZXdJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggKyAxO1xuXG4gICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLlxuICAgICAgaWYgKG5ld0luZGV4ID49IHRoaXMuJHNsaWRlcy5sZW5ndGgpIG5ld0luZGV4ID0gMDtcbiAgICAgIGVsc2UgaWYgKG5ld0luZGV4IDwgMCkgbmV3SW5kZXggPSB0aGlzLiRzbGlkZXMubGVuZ3RoIC0gMTtcblxuICAgICAgdGhpcy5zZXQobmV3SW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdG8gcHJldmlvdXMgc2xpZGVcbiAgICAgKi9cbiAgICBwcmV2KCkge1xuICAgICAgbGV0IG5ld0luZGV4ID0gdGhpcy5hY3RpdmVJbmRleCAtIDE7XG5cbiAgICAgIC8vIFdyYXAgYXJvdW5kIGluZGljZXMuXG4gICAgICBpZiAobmV3SW5kZXggPj0gdGhpcy4kc2xpZGVzLmxlbmd0aCkgbmV3SW5kZXggPSAwO1xuICAgICAgZWxzZSBpZiAobmV3SW5kZXggPCAwKSBuZXdJbmRleCA9IHRoaXMuJHNsaWRlcy5sZW5ndGggLSAxO1xuXG4gICAgICB0aGlzLnNldChuZXdJbmRleCk7XG4gICAgfVxuICB9XG5cbiAgTS5TbGlkZXIgPSBTbGlkZXI7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihTbGlkZXIsICdzbGlkZXInLCAnTV9TbGlkZXInKTtcbiAgfVxuXG59KGNhc2gsIE0uYW5pbWUpKTtcbiJdfQ==
