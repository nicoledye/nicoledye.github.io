"use strict";var _createClass=function(){function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}}(),_get=function t(i,e,s){null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,e);if(void 0===n){var o=Object.getPrototypeOf(i);return null===o?void 0:t(o,e,s)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(s):void 0};function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}!function(u){var i={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0},t=function(t){function v(t,i){_classCallCheck(this,v);var e=_possibleConstructorReturn(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,v,t,i));return(e.el.M_Timepicker=e).options=u.extend({},v.defaults,i),e.id=M.guid(),e._insertHTMLIntoDOM(),e._setupModal(),e._setupVariables(),e._setupEventHandlers(),e._clockSetup(),e._pickerSetup(),e}return _inherits(v,Component),_createClass(v,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),u(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),u(this.spanHours).on("click",this.showView.bind(this,"hours")),u(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(t){t.which===M.keys.ENTER&&(t.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(t){t.preventDefault();var i=this.plate.getBoundingClientRect(),e=i.left,s=i.top;this.x0=e+this.options.dialRadius,this.y0=s+this.options.dialRadius,this.moved=!1;var n=v._Pos(t);this.dx=n.x-this.x0,this.dy=n.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(t){t.preventDefault();var i=v._Pos(t),e=i.x-this.x0,s=i.y-this.y0;this.moved=!0,this.setHand(e,s,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var i=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var e=v._Pos(t),s=e.x-this.x0,n=e.y-this.y0;this.moved&&s===this.dx&&n===this.dy&&this.setHand(s,n),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(u(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){i.done()},this.options.duration/2)),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=u(v._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var t=this;this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){t.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=u('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var i=u('<div class="confirmation-btns"></div>');u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(i).on("click",this.close.bind(this)),u('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(i).on("click",this.done.bind(this)),i.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=u('<div class="am-btn">AM</div>'),this.$pmBtn=u('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var t=this.options.dialRadius,i=this.options.tickRadius,e=2*t,s=v._createSVGEl("svg");s.setAttribute("class","timepicker-svg"),s.setAttribute("width",e),s.setAttribute("height",e);var n=v._createSVGEl("g");n.setAttribute("transform","translate("+t+","+t+")");var o=v._createSVGEl("circle");o.setAttribute("class","timepicker-canvas-bearing"),o.setAttribute("cx",0),o.setAttribute("cy",0),o.setAttribute("r",4);var a=v._createSVGEl("line");a.setAttribute("x1",0),a.setAttribute("y1",0);var r=v._createSVGEl("circle");r.setAttribute("class","timepicker-canvas-bg"),r.setAttribute("r",i),n.appendChild(a),n.appendChild(r),n.appendChild(o),s.appendChild(n),this._canvas.appendChild(s),this.hand=a,this.bg=r,this.bearing=o,this.g=n}},{key:"_buildHoursView",value:function(){var t=u('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var i=1;i<13;i+=1){var e=t.clone(),s=i/6*Math.PI,n=this.options.outerRadius;e.css({left:this.options.dialRadius+Math.sin(s)*n-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(s)*n-this.options.tickRadius+"px"}),e.html(0===i?"00":i),this.hoursView.appendChild(e[0])}else for(var o=0;o<24;o+=1){var a=t.clone(),r=o/6*Math.PI,l=0<o&&o<13?this.options.innerRadius:this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(r)*l-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*l-this.options.tickRadius+"px"}),a.html(0===o?"00":o),this.hoursView.appendChild(a[0])}}},{key:"_buildMinutesView",value:function(){for(var t=u('<div class="timepicker-tick"></div>'),i=0;i<60;i+=5){var e=t.clone(),s=i/30*Math.PI;e.css({left:this.options.dialRadius+Math.sin(s)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(s)*this.options.outerRadius-this.options.tickRadius+"px"}),e.html(v._addLeadingZero(i)),this.minutesView.appendChild(e[0])}}},{key:"_handleAmPmClick",value:function(t){var i=u(t.target);this.amOrPm=i.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var t=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==t[1]&&(0<t[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",t[1]=t[1].replace("AM","").replace("PM","")),"now"===t[0]){var i=new Date(+new Date+this.options.fromNow);t=[i.getHours(),i.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=t[0]&&t[0]<24?"PM":"AM")}this.hours=+t[0]||0,this.minutes=+t[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=v._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,i){"minutes"===t&&u(this.hoursView).css("visibility");var e="hours"===t,s=e?this.hoursView:this.minutesView,n=e?this.minutesView:this.hoursView;this.currentView=t,u(this.spanHours).toggleClass("text-primary",e),u(this.spanMinutes).toggleClass("text-primary",!e),n.classList.add("timepicker-dial-out"),u(s).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){u(n).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(t){var i=this.currentView,e=this[i],s="hours"===i,n=e*(Math.PI/(s?6:30)),o=s&&0<e&&e<13?this.options.innerRadius:this.options.outerRadius,a=Math.sin(n)*o,r=-Math.cos(n)*o,l=this;t?(u(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){u(l.canvas).removeClass("timepicker-canvas-out"),l.setHand(a,r)},t)):this.setHand(a,r)}},{key:"setHand",value:function(t,i,e){var s=this,n=Math.atan2(t,-i),o="hours"===this.currentView,a=Math.PI/(o||e?6:30),r=Math.sqrt(t*t+i*i),l=o&&r<(this.options.outerRadius+this.options.innerRadius)/2,u=l?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(u=this.options.outerRadius),n<0&&(n=2*Math.PI+n);var h=Math.round(n/a);n=h*a,this.options.twelveHour?o?0===h&&(h=12):(e&&(h*=5),60===h&&(h=0)):o?(12===h&&(h=0),h=l?0===h?12:h:0===h?0:h+12):(e&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){s.vibrateTimer=null},100))),this[this.currentView]=h,o?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=v._addLeadingZero(h);var c=Math.sin(n)*(u-this.options.tickRadius),d=-Math.cos(n)*(u-this.options.tickRadius),p=Math.sin(n)*u,m=-Math.cos(n)*u;this.hand.setAttribute("x2",c),this.hand.setAttribute("y2",d),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",m)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(t,i){var e=this.el.value,s=i?"":v._addLeadingZero(this.hours)+":"+v._addLeadingZero(this.minutes);this.time=s,!i&&this.options.twelveHour&&(s=s+" "+this.amOrPm),(this.el.value=s)!==e&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(t,i){return _get(v.__proto__||Object.getPrototypeOf(v),"init",this).call(this,this,t,i)}},{key:"_addLeadingZero",value:function(t){return(t<10?"0":"")+t}},{key:"_createSVGEl",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},{key:"_Pos",value:function(t){return t.targetTouches&&1<=t.targetTouches.length?{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY}:{x:t.clientX,y:t.clientY}}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Timepicker}},{key:"defaults",get:function(){return i}}]),v}();t._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=t,M.jQueryLoaded&&M.initializeJqueryWrapper(t,"timepicker","M_Timepicker")}(cash);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRpbWVwaWNrZXIuanMiXSwibmFtZXMiOlsiJCIsIl9kZWZhdWx0cyIsImRpYWxSYWRpdXMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwidGlja1JhZGl1cyIsImR1cmF0aW9uIiwiY29udGFpbmVyIiwiZGVmYXVsdFRpbWUiLCJmcm9tTm93Iiwic2hvd0NsZWFyQnRuIiwiaTE4biIsIlRpbWVwaWNrZXIiLCJfQ29tcG9uZW50IiwiZWwiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJhdXRvQ2xvc2UiLCJ2aWJyYXRlIiwiTV9UaW1lcGlja2VyIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJpZCIsIk0iLCJndWlkIiwiX2luc2VydEhUTUxJbnRvRE9NIiwiX3NldHVwTW9kYWwiLCJfc2V0dXBWYXJpYWJsZXMiLCJfY2xvY2tTZXR1cCIsIl9waWNrZXJTZXR1cCIsIl9pbmhlcml0cyIsIkNvbXBvbmVudCIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiX3JlbW92ZUV2ZW50SGFuZGxlcnMiLCJtb2RhbCIsInNwYW5NaW51dGVzIiwibW9kYWxFbCIsInJlbW92ZSIsInVuZGVmaW5lZCIsIl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCIsIl9oYW5kbGVJbnB1dEtleWRvd24iLCJiaW5kIiwiX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCIsIl9oYW5kbGVJbnB1dENsaWNrIiwiX2hhbmRsZUNsb2NrQ2xpY2tTdGFydEJvdW5kIiwiX2hhbmRsZUNsb2NrQ2xpY2tTdGFydCIsIl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZUJvdW5kIiwiX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlIiwiX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCIsIl9oYW5kbGVEb2N1bWVudENsaWNrRW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndoaWNoIiwiRU5URVIiLCJlIiwicHJldmVudERlZmF1bHQiLCJwbGF0ZSIsIm9wZW4iLCJzcGFuSG91cnMiLCJvbiIsInNob3dWaWV3IiwiY2xvY2tQbGF0ZUJSIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0IiwieSIsImNsaWNrUG9zIiwia2V5cyIsInNldEhhbmQiLCJkb2N1bWVudCIsImxlZnQiLCJ4MCIsInkwIiwibW92ZWQiLCJfUG9zIiwiZHkiLCJkeCIsIngiLCJfdGhpczIiLCJzZXRUaW1lb3V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImN1cnJlbnRWaWV3IiwiJG1vZGFsRWwiLCJtaW51dGVzVmlldyIsImFkZENsYXNzIiwiZG9uZSIsImluc2VydEJlZm9yZSIsIl90ZW1wbGF0ZSIsIm9uQ2xvc2VFbmQiLCJxdWVyeVNlbGVjdG9yIiwiaXNPcGVuIiwiY29udGFpbmVyRWwiLCJhcHBlbmRUbyIsIk1vZGFsIiwiaW5pdCIsIl90aGlzMyIsIm5hdmlnYXRvciIsIndlYmtpdFZpYnJhdGUiLCJfY2FudmFzIiwiaG91cnNWaWV3IiwiJGNsZWFyQnRuIiwiY3NzIiwidmlzaWJpbGl0eSIsImZvb3RlciIsImFtT3JQbSIsInR3ZWx2ZUhvdXIiLCJjbGVhciIsImNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIiLCJjYW5jZWwiLCIkcG1CdG4iLCJfaGFuZGxlQW1QbUNsaWNrIiwiY2xvc2UiLCIkYW1CdG4iLCJzcGFuQW1QbSIsIl9idWlsZEhvdXJzVmlldyIsInN2ZyIsImJlYXJpbmciLCJzZXRBdHRyaWJ1dGUiLCJoYW5kIiwiX2NyZWF0ZVNWR0VsIiwiZGlhbWV0ZXIiLCJiZyIsImciLCJhcHBlbmRDaGlsZCIsIiR0aWNrIiwicmFkaWFuIiwiaSIsInRpY2siLCJjbG9uZSIsIk1hdGgiLCJQSSIsInJhZGl1cyIsInNpbiIsInRvcCIsImlubmVyIiwiY29zIiwiaHRtbCIsIiRidG5DbGlja2VkIiwiX3VwZGF0ZUFtUG1WaWV3IiwidG9nZ2xlQ2xhc3MiLCJzcGxpdCIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsImluZGV4T2YiLCJub3ciLCJob3VycyIsIkRhdGUiLCJtaW51dGVzIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwidmlldyIsImlubmVySFRNTCIsIl9hZGRMZWFkaW5nWmVybyIsImRlbGF5IiwiaXNIb3VycyIsImhpZGVWaWV3IiwiY2xhc3NMaXN0IiwiYWRkIiwibmV4dFZpZXciLCJyZW1vdmVDbGFzcyIsInJlc2V0Q2xvY2siLCJ0b2dnbGVWaWV3VGltZXIiLCJjbGVhclRpbWVvdXQiLCJ1bml0Iiwic2VsZiIsImNhbnZhcyIsImF0YW4yIiwieiIsInNxcnQiLCJyb3VuZEJ5NSIsInZpYnJhdGVUaW1lciIsIl90aGlzNCIsImN5MSIsImN4MSIsImN4MiIsImN5MiIsIl91cGRhdGVUaW1lRnJvbUlucHV0IiwiY2xlYXJWYWx1ZSIsInRpbWUiLCJsYXN0IiwiZm9jdXMiLCIkZWwiLCJ0cmlnZ2VyIiwiX2dldCIsImVscyIsIm51bSIsIm5hbWUiLCJjcmVhdGVFbGVtZW50TlMiLCJ0YXJnZXRUb3VjaGVzIiwibGVuZ3RoIiwiY2xpZW50WCIsImNsaWVudFkiLCJnZXQiLCJqb2luIiwialF1ZXJ5TG9hZGVkIiwiaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIiLCJjYXNoIl0sIm1hcHBpbmdzIjoiNG5DQUFBLFNBQVVBLEdBR1IsSUFBSUMsRUFBWSxDQUNkQyxXQUFZLElBQ2RDLFlBQWEsSUFDYkMsWUFBYSxHQUNiQyxXQUFZLEdBQ1pDLFNBQVUsSUFDUkMsVUFBVyxLQUNYQyxZQUFhLE1BQ2ZDLFFBQVMsRUFYVkMsY0FBWSxFQUdYQyxLQUFJVixDQUNGQyxPQUFBQSxTQUNGQyxNQUFBQSxRQUNBQyxLQUFBQSxNQUdFRyxXQUFBQSxFQUNBQyxZQUFBQSxFQUNGQyxTQUFBQSxHQVJnQkcsRUFITCxTQUFBQyxHQWdDVCxTQUFBRCxFQUFZRSxFQUFJQyxHQUFTQyxnQkFBQUMsS0FBQUwsR0FBQSxJQUFBTSxFQUFBQywyQkFBQUYsTUFBQUwsRUFBQVEsV0FBQUMsT0FBQUMsZUFBQVYsSUFBQVcsS0FBQU4sS0FYM0JPLEVBQXVCVixFQUFBQyxJQVdJLE9BVDNCVSxFQUFBQSxHQUFTQyxhQUFURCxHQWNTVixRQUFVZixFQUFFMkIsT0FBTyxHQUFJZixFQUFXZ0IsU0FBVWIsR0FFakRHLEVBQUtXLEdBQUtDLEVBQUVDLE9BQ1piLEVBQUtjLHFCQUNMZCxFQUFLZSxjQUNMZixFQUFLZ0Isa0JBWEh0QixFQUFBQSxzQkFjRk0sRUFBS2lCLGNBYlBqQixFQUFBa0IsZUFBeUJsQixFQWhDaEIsT0FBQW1CLFVBQUF6QixFQUdLMEIsV0FITEMsYUFBQTNCLEVBQUEsQ0FBQSxDQUFBNEIsSUFBQSxVQUFBQyxNQUFBLFdBdUhQekMsS0FBRTBDLHVCQUNKMUMsS0FBRTJDLE1BQUtDLFVBQ041QyxFQUFBaUIsS0FBQTRCLFNBQUFDLFNBekhRN0IsS0FBQUgsR0FBQVksa0JBQUFxQixJQUFBLENBQUFQLElBQUEsc0JBQUFDLE1BQUEsV0FBQXhCLEtBQUErQix5QkFBQS9CLEtBQUFnQyxvQkFBQUMsS0FBQWpDLE1BQUFBLEtBQUFrQyx1QkFBQWxDLEtBQUFtQyxrQkFnSVdGLEtBQUFqQyxNQUNsQkEsS0FBQW9DLDRCQUFBcEMsS0FBQXFDLHVCQUFBSixLQUFBakMsTUFDREEsS0FBQXNDLDhCQUFBdEMsS0FBQXVDLHlCQUFBTixLQUFBakMsTUFsSVFBLEtBQUF3Qyw2QkFBQXhDLEtBQUF5Qyx3QkFBQVIsS0FBQWpDLE1BQUFBLEtBQUFILEdBQUE2QyxpQkFBQSxRQUFBMUMsS0FvSWNrQyx3QkFDckJsQyxLQUFBSCxHQUFNOEMsaUJBQWlCQyxVQUFPNUMsS0FBQStCLDBCQUM1QmMsS0FBQUEsTUFBRUMsaUJBQUYsWUFBQTlDLEtBQUFvQyw2QkFDQXBDLEtBQUErQyxNQUFLQyxpQkFBTCxhQUFBaEQsS0FBQW9DLDZCQUVIckQsRUFBQWlCLEtBQUFpRCxXQUFBQyxHQUFBLFFBQUFsRCxLQUFBbUQsU0FBQWxCLEtBQUFqQyxLQUFBLFVBeklRakIsRUFBQWlCLEtBQUEyQixhQUFBdUIsR0FBQSxRQUFBbEQsS0FBQW1ELFNBQUFsQixLQUFBakMsS0FBQSxjQUFBLENBQUF1QixJQUFBLHVCQUFBQyxNQUFBLFdBNklQeEIsS0FBQUgsR0FBSXVELG9CQUFvQkwsUUFBTU0sS0FBQUEsd0JBQy9CckQsS0FBQUgsR0FBSXlELG9CQUFhRixVQUFtQkcsS0FBR0gsNEJBOUkvQixDQUFBN0IsSUFBQSxvQkFBQUMsTUFBQSxXQWtKUHhCLEtBQUFnRCxTQWxKTyxDQUFBekIsSUFBQSxzQkFBQUMsTUFBQSxTQXFKR2dDLEdBaEJOWCxFQUFFRixRQUFVOUIsRUFBRTRDLEtBQUtiLFFBa0J2QkMsRUFBQUMsaUJBQ0E5QyxLQUFLMEQsVUF4SkUsQ0FBQW5DLElBQUEseUJBQUFDLE1BQUEsU0E0SkVrQixHQWhCVEcsRUFBRUMsaUJBa0JMLElBQUFNLEVBQUFwRCxLQUFBK0MsTUFBQU0sd0JBQ0dNLEVBQVNqQixFQUFpQmtCLEtBQTFCRCxFQUFBUCxFQUEwQ1osSUFFM0N4QyxLQUFBNkQsR0FBQVAsRUFBQXRELEtBQUFGLFFBQUFiLFdBaktRZSxLQUFBOEQsR0FBQVIsRUFBQXRELEtBQUFGLFFBQUFiLFdBQUFlLEtBQUErRCxPQUFBLEVBQUEsSUFBQVAsRUFBQTdELEVBQUFxRSxLQUFBbkIsR0FvS1BBLEtBQUFBLEdBQUVDLEVBQUFBLEVBQUY5QyxLQUFBNkQsR0FDSDdELEtBQUFpRSxHQUFJVCxFQUFXN0QsRUFBQUEsS0FBV3FFLEdBRzFCaEUsS0FBQTBELFFBQUExRCxLQUFha0UsR0FBYmxFLEtBQUFpRSxJQUFBLEdBeEtVTixTQUFBakIsaUJBQUEsWUFBQTFDLEtBQUFzQywrQkFBQXFCLFNBQUFqQixpQkFBQSxZQUFBMUMsS0FBQXNDLCtCQStKUHFCLFNBQVNqQixpQkFBaUIsVUFBVzFDLEtBQUt3Qyw4QkFjMUNLLFNBQUVDLGlCQUFGLFdBQUE5QyxLQUFBd0MsZ0NBN0tPLENBQUFqQixJQUFBLDJCQUFBQyxNQUFBLFNBZ0xLN0IsR0FDZmtELEVBQUFDLGlCQUNBLElBQUFVLEVBQVFBLEVBQWFRLEtBQUtGLEdBQzFCSyxFQUFBWCxFQUFTTyxFQUFML0QsS0FBY21FLEdBQ2pCWixFQUFBQyxFQUFLRSxFQUFMMUQsS0FBQThELEdBQ0c5RCxLQUFBK0QsT0FBQSxFQVpKL0QsS0FBSzBELFFBQVFTLEVBQUdaLEdBQUcsR0FBTyxLQXpLaEIsQ0FBQWhDLElBQUEsMEJBQUFDLE1BQUEsU0EwTFMxQixHQUFMLElBQUFzRSxFQUFBcEUsS0FDYmpCLEVBQUFBLGlCQUNBc0YsU0FBQUEsb0JBQWlCLFVBQUFyRSxLQUFBd0MsOEJBQ2hCbUIsU0FBQVcsb0JBQUEsV0FBQXRFLEtBQUF3Qyw4QkFDQSxJQUFBZ0IsRUFBTzFELEVBQVFULEtBQWJ3RCxHQUNBc0IsRUFBQVgsRUFBQVcsRUFBQW5FLEtBQUE2RCxHQWJBTixFQUFJQyxFQUFTRCxFQUFJdkQsS0FBSzhELEdBZTFCOUQsS0FBQStELE9BQUFJLElBQUFuRSxLQUFBa0UsSUFBQVgsSUFBQXZELEtBQUFpRSxJQUNBTixLQUFBQSxRQUFTVyxFQUFBQSxHQWxNQyxVQUFBdEUsS0FBQXVFLFlBQUF2RSxLQUFBbUQsU0FBQSxVQUFBbkQsS0FBQUYsUUFBQVQsU0FBQSxHQXVNRm1GLEtBQUwxRSxRQUFrQkgsWUFDbEJaLEVBQUFpQixLQUFBeUUsYUFBZUMsU0FBS0YsdUJBQ3BCSCxXQUFLekMsV0FaTndDLEVBQUtPLFFBY0ozRSxLQUFBRixRQUFBVCxTQUFBLElBS0NzRSxTQUhEVyxvQkFHTyxZQUFBdEUsS0FBQXNDLCtCQUNMcUIsU0FBS2Esb0JBQVNJLFlBQWQ1RSxLQUFBc0MsaUNBak5LLENBQUFmLElBQUEscUJBQUFDLE1BQUEsV0FBQXhCLEtBQUF3RSxTQUFBekYsRUFBQVksRUFBQWtGLFdBQUE3RSxLQUFBNEIsUUFBQTVCLEtBQUF3RSxTQUFBLEdBcU5LeEUsS0FBQTRCLFFBQUFoQixHQUFBLFNBQUFaLEtBQUFZLEdBRVZrRSxJQUFBQSxFQUFZbkIsU0FBQW9CLGNBQU0vRSxLQUFBRixRQUFBUixXQUNoQlUsS0FBQUYsUUFBS2tGLFdBQUxDLEVBQ0RqRixLQUFBd0UsU0FBQVUsU0FBQUQsR0F6TklqRixLQUFBd0UsU0FBQUksYUFBQTVFLEtBQUFILE1BQUEsQ0FBQTBCLElBQUEsY0FBQUMsTUFBQSxXQStORmhCLElBQUFBLEVBQUFBLEtBVExSLEtBQUswQixNQUFRYixFQUFFc0UsTUFBTUMsS0FBS3BGLEtBQUs0QixRQUFTLENBV3hDa0QsV0FBQSxXQUNGTyxFQUFLdEMsUUFBUSxPQWxPSixDQUFBeEIsSUFBQSxrQkFBQUMsTUFBQSxXQXdPVHhCLEtBQUF1RSxZQUFBLFFBQ0F2RSxLQUFBUSxRQUFBOEUsVUFBbUIxRCxRQUFRbUQsVUFBY08sVUFBQUMsY0FBekMsZ0JBQUEsS0FFQ3ZGLEtBQUF3RixRQUFBeEYsS0FBQTRCLFFBQUFtRCxjQUFBLHNCQTNPUS9FLEtBQUErQyxNQUFBL0MsS0FBQTRCLFFBQUFtRCxjQUFBLHFCQUFBL0UsS0FBQXlGLFVBQUF6RixLQUFBNEIsUUFBQW1ELGNBNk9NLHFCQVJmL0UsS0FBS3lFLFlBQWN6RSxLQUFLNEIsUUFBUW1ELGNBQWMsdUJBVTVDL0UsS0FBQWlELFVBQUl5QyxLQUFjOUQsUUFBQW1ELGNBQUEsMEJBRWxCL0UsS0FBQTJCLFlBQVM3QixLQUFRTCxRQUFBQSxjQUFjLDRCQUM3QmlHLEtBQUFBLFNBQVVDLEtBQUkvRCxRQUFDZ0UsY0FBZiwwQkFDRDVGLEtBQUE2RixPQUFBN0YsS0FBQTRCLFFBQUFtRCxjQUFBLHNCQVRIL0UsS0FBSzhGLE9BQVMsT0ExT0wsQ0FBQXZFLElBQUEsZUFBQUMsTUFBQSxXQTJQUixJQUFBa0UsRUFBQTNHLEVBQUEsK0dBQUFpQixLQUFBRixRQUFBaUcsV0FBQSxJQUFBLEtBQUEsS0FBQS9GLEtBQUFGLFFBQUFKLEtBQUFzRyxNQUFBLGFBM1BRZCxTQUFBbEYsS0FBQTZGLFFBQUEzQyxHQUFBLFFBQUFsRCxLQUFBZ0csTUFBQS9ELEtBQUFqQyxPQUFBQSxLQUFBRixRQUFBTCxjQUFBaUcsRUFBQUMsSUFBQSxDQUFBQyxXQUFBLEtBaVFMLElBQUFLLEVBQWdCbEgsRUFBQSx5Q0FDaEJBLEVBQUEsbUZBQUFpQixLQUFBRixRQUFBaUcsV0FBQSxJQUFBLEtBQUEsS0FBQS9GLEtBQUFGLFFBQUFKLEtBQUF3RyxPQUFBLGFBQ0poQixTQUFLaUIsR0FBd0JDLEdBQUFBLFFBQWlCbkUsS0FBS29FLE1BQU9uQixLQUFBQSxPQUN6RG5HLEVBQUEsbUZBQUFpQixLQUFBRixRQUFBaUcsV0FBQSxJQUFBLEtBQUEsS0FBQS9GLEtBQUFGLFFBQUFKLEtBQUFpRixLQUFBLGFBWElPLFNBQVNlLEdBQTJCL0MsR0FBRyxRQUFTbEQsS0FBSzJFLEtBQUsxQyxLQUFLakMsT0FhbEVpRyxFQUFBZixTQUFBbEYsS0FBQTZGLFVBdFFPLENBQUF0RSxJQUFBLGNBQUFDLE1BQUEsV0FBQXhCLEtBQUFGLFFBQUFpRyxhQUFBL0YsS0FBQXNHLE9BQUF2SCxFQUFBLGdDQTRRUGlCLEtBQUFtRyxPQUFBcEgsRUFBQSxnQ0FDQWlCLEtBQUlmLE9BQUFBLEdBQUFBLFFBQWtCYSxLQUFMc0csaUJBQWpCbkUsS0FBQWpDLE9BQUFrRixTQUFBbEYsS0FBQXVHLFVBQ0F2RyxLQUFBbUcsT0FBSS9HLEdBQUFBLFFBQWFZLEtBQUtGLGlCQUF0Qm1DLEtBQUFqQyxPQUFBa0YsU0FBQWxGLEtBQUF1RyxXQUdIdkcsS0FBQXdHLGtCQUNBQyxLQUFBQSxvQkFDQUEsS0FBQUEsbUJBblJVLENBQUFsRixJQUFBLGlCQUFBQyxNQUFBLFdBd1JWa0YsSUFBQUEsRUFBUUMsS0FBUjdHLFFBQUFiLFdBQ0F5SCxFQUFRQyxLQUFSN0csUUFBQVYsV0FDQXNILEVBQUEsRUFBUUMsRUFFUkYsRUFBSUcsRUFBT2pILGFBQVdrSCxPQUN0QkQsRUFBQUEsYUFBS0QsUUFBYSxrQkFDbEJDLEVBQUFBLGFBQUtELFFBQWFHLEdBQ2xCTCxFQUFBRSxhQUFTaEgsU0FBV2tILEdBQ3BCRSxJQUFBQSxFQUFHSixFQUFBQSxhQUFzQixLQUN6QkksRUFBQUEsYUFBR0osWUFBa0J2SCxhQUFyQkgsRUFBQSxJQUFBQSxFQUFBLEtBQ0ErSCxJQUFBQSxFQUFFQyxFQUFGSixhQUFBLFVBQ0FHLEVBQUVDLGFBQUYsUUFBQSw2QkFDQUQsRUFBRUMsYUFBWVAsS0FBZCxHQUNBRCxFQUFBQSxhQUFnQk8sS0FBaEIsR0FDQU4sRUFBQUMsYUFBYU0sSUFBQUEsR0FWYixJQUFJTCxFQUFPakgsRUFBV2tILGFBQWEsUUFZbkNELEVBQUFELGFBQVlDLEtBQVosR0FDQUEsRUFBQUQsYUFBQSxLQUFBLEdBQ0EsSUFBQUksRUFBQXBILEVBQWUrRyxhQUFmLFVBQ0FLLEVBQUFKLGFBQUEsUUFBQSx3QkFDRUksRUFBQUosYUFBQSxJQUFBdkgsR0E1U1E0SCxFQUFBQyxZQUFBTCxHQUFBSSxFQUFBQyxZQUFBRixHQUFBQyxFQUFBQyxZQUFBUCxHQStTUEQsRUFBQVEsWUFBSUMsR0FDTGxILEtBQUF3RixRQUFBeUIsWUFBQVIsR0FFQXpHLEtBQUE0RyxLQUFLQSxFQUNKNUcsS0FBQStHLEdBQUFBLEVBQ0EvRyxLQUFBMEcsUUFBSVMsRUFDSm5ILEtBQUFnSCxFQUFBQSxJQXJUTyxDQUFBekYsSUFBQSxrQkFBQUMsTUFBQSxXQXNURSxJQUFBMEYsRUFBVG5JLEVBQUEsdUNBS0EsR0FBQWlCLEtBQUFGLFFBQUsyRixXQUNMLElBQUEsSUFBQTJCLEVBQUEsRUFBQUEsRUFBQSxHQUFBQSxHQUFBLEVBQUEsQ0FDQSxJQUFBQyxFQUFBSCxFQUFBSSxRQVpGSCxFQWFPQyxFQUFBLEVBQUFHLEtBQUFDLEdBQ05DLEVBQVNMLEtBQUl0SCxRQUFPWixZQUNuQm1JLEVBQUExQixJQUFBLENBQ0EvQixLQUFBNUQsS0FBSW1ILFFBQVNDLFdBQVFHLEtBQXJCRyxJQUFBUCxHQUFBTSxFQUFBekgsS0FBQUYsUUFBQVYsV0FBQSxLQUNBdUksSUFBQTNILEtBQUk0SCxRQUFRUixXQUFTQSxLQUFyQlMsSUFBQVYsR0FBQU0sRUFBQXpILEtBQUFGLFFBQUFWLFdBQUEsT0FFQWlJLEVBQUFBLEtBQVMsSUFBVEEsRUFBUyxLQUFBRCxHQUNSeEQsS0FBQUEsVUFBTXFELFlBQWFoSSxFQUFBQSxTQUlwQixJQUFBLElBQUFtSSxFQUFLM0IsRUFBQUEsRUFBQUEsR0FBVXdCLEdBQUFBLEVBQUFBLENBQ2YsSUFBQUksRUFBQUgsRUFBQUksUUFDQUgsRUFBQUMsRUFBQSxFQUFBRyxLQUFBQyxHQUVEQyxFQURBLEVBQUFMLEdBQUFBLEVBQUEsR0FDQXBILEtBQUFGLFFBQUFYLFlBQUFhLEtBQUFGLFFBQUFaLFlBN1VRbUksRUFBQTFCLElBQUEsQ0FBQS9CLEtBQUE1RCxLQUFBRixRQUFBYixXQUFBc0ksS0FBQUcsSUFBQVAsR0FBQU0sRUFBQXpILEtBQUFGLFFBQUFWLFdBQUEsS0FBQXVJLElBQUEzSCxLQUFBRixRQUFBYixXQUFBc0ksS0ErVVdNLElBQUFWLEdBQUFNLEVBQUF6SCxLQUFBRixRQUFBVixXQUFBLE9BRXBCaUksRUFBQVMsS0FBQSxJQUFBVixFQUFBLEtBQUFBLEdBQ0FwSCxLQUFBeUYsVUFBYXdCLFlBQVdHLEVBQXhCLE9BbFZTLENBQUE3RixJQUFBLG9CQUFBQyxNQUFBLFdBMlZSLElBRkE2RixJQUFBQSxFQUFLUyxFQUFLbkksdUNBRVZ5SCxFQUFBLEVBQUFBLEVBQUEsR0FBQUEsR0FBQSxFQUFBLENBQ0EsSUFBQUMsRUFBQUgsRUFBQUksUUE1VlFILEVBQUFDLEVBQUEsR0FBQUcsS0FBQUMsR0FBQUgsRUFBQTFCLElBQUEsQ0FBQS9CLEtBQUE1RCxLQUFBRixRQUFBYixXQUFBc0ksS0E4VldHLElBQUFQLEdBQUFuSCxLQUFBRixRQUFBWixZQUFBYyxLQUFBRixRQUFBVixXQUFBLEtBQ2xCdUksSUFBQTNILEtBQUkrSCxRQUFBQSxXQUFKUixLQUFBTSxJQUFBVixHQUFBbkgsS0FBQUYsUUFBQVosWUFBQWMsS0FBQUYsUUFBQVYsV0FBQSxPQUVBaUksRUFBQVMsS0FBS0UsRUFBQUEsZ0JBQUxaLElBQ0RwSCxLQUFBeUUsWUFBQXdDLFlBQUFJLEVBQUEsT0FsV1EsQ0FBQTlGLElBQUEsbUJBQUFDLE1BQUEsU0FxV0UxQixHQUNQLElBQUFpSSxFQUFZRSxFQUFBQSxFQUFBQSxRQUNaakksS0FBQThGLE9BQUtLLEVBQU84QixTQUFZLFVBQWdCLEtBQUtuQyxLQUM5QzlGLEtBQUFnSSxvQkF4V00sQ0FBQXpHLElBQUEsa0JBQUFDLE1BQUEsV0FBQXhCLEtBQUFGLFFBQUFpRyxhQTRXUC9GLEtBQUFzRyxPQUFBMkIsWUFBQSxlQUFBLE9BQUFqSSxLQUFBOEYsUUFDRjlGLEtBQUl3QixPQUFReUcsWUFBVXpHLGVBQVIsT0FBc0IxQixLQUFRUCxXQTdXbkMsQ0FBQWdDLElBQUEsdUJBQUFDLE1BQUEsV0FtWFAsSUFBQUEsSUFBQXhCLEtBQUFILEdBQUEyQixPQUFBeEIsS0FBQUYsUUFBQVAsYUFBQSxJQUFBLElBQUEySSxNQUFBLEtBWUQsR0FYQTFHLEtBQUFBLFFBQVdBLGlCQUFtQyxJQUFaQSxFQUFJMkcsS0FDdEMsRUFBQTNHLEVBQUEsR0FBQTRHLGNBQUFDLFFBQUEsTUFDRHJJLEtBQUE4RixPQUFJLEtBRUh0RSxLQUFBQSxPQUNDOEcsS0FJSTlHLEVBQUEsR0FBQUEsRUFBS3NFLEdBQUxxQyxRQUFjLEtBQVksSUFBWkEsUUFBa0IsS0FBbEIsS0FFbkIsUUFBQTNHLEVBQUEsR0FBQSxDQUNELElBQUE4RyxFQUFLQyxJQUFMQyxNQUFlaEgsSUFBRmdILEtBQWJ4SSxLQUFBRixRQUFBTixTQUNBZ0MsRUFBS2lILENBQ0xILEVBQUFJLFdBQ0FKLEVBQUFLLGNBRUUzSSxLQUFLZ0ksUUFBQUEsYUFDTmhJLEtBQUE4RixPQUFBLElBQUF0RSxFQUFBLElBQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsTUF0WVF4QixLQUFBdUksT0FBQS9HLEVBQUEsSUF3WUFvSCxFQUNUNUksS0FBQXlJLFNBQWFqSCxFQUFBLElBQVQsRUFDSHhCLEtBQUFpRCxVQUFBNEYsVUFBQTdJLEtBQUF1SSxNQUNBdkksS0FBQTJCLFlBQUFrSCxVQUFBbEosRUFBQW1KLGdCQUFBOUksS0FBQXlJLFNBQ0R6SSxLQUFBZ0ksb0JBNVlTLENBQUF6RyxJQUFBLFdBQUFDLE1BQUEsU0F3WUFvSCxFQUFNRyxHQVNSOUYsWUFBUGxFLEdBQWtCa0osRUFBQUEsS0FBbEJ4QyxXQUE4QkUsSUFBOUIsY0FHQSxJQUFBcUQsRUFBQSxVQUFBSixFQUNBSyxFQUFTQyxFQUFVQyxLQUFJMUQsVUFBQXpGLEtBQUF5RSxZQUN2QjFGLEVBQUVxSyxFQUFjcEosS0FBQXlFLFlBQWN6RSxLQUN2QnFKLFVBUlBySixLQUFLdUUsWUFBY3FFLEVBV25CN0osRUFBQWlCLEtBQUFpRCxXQUFLcUcsWUFBTCxlQUFBTixHQVJBakssRUFBRWlCLEtBQUsyQixhQUFhc0csWUFBWSxnQkFBaUJlLEdBWWpEQyxFQUFLTSxVQUFBQSxJQUFBQSx1QkFDSnhLLEVBQUFBLEdBQUVrSyxJQUFGLGFBQWdCLFdBQ2RJLFlBQUEsdUJBaGFNckosS0FBQXNKLFdBQUFQLEdBb2FQUyxhQUNBaEksS0FBUStILGlCQURSdkosS0FBQXVKLGdCQUVVWCxXQUZWLFdBQUE3SixFQUFBa0ssR0FHQVEsSUFBT2xDLGFBQVd5QixXQUhsQmhKLEtBSUFtSCxRQUFBQSxZQXhhTyxDQUFBNUYsSUFBQSxhQUFBQyxNQUFBLFNBNGFQK0IsR0FSQSxJQUFBcUYsRUFTQWMsS0FBT25GLFlBUlAvQyxFQUFReEIsS0FBSzRJLEdBVWZJLEVBQVcsVUFBUEQsRUFFSDFFLEVBQUFBLEdBREVrRCxLQUFLb0MsSUFBUFgsRUFBd0IsRUFBQSxLQUV2QmpLLEVBQUUySyxHQUFhTCxFQUFmN0gsR0FBMkJBLEVBQUEsR0FDM0JrSSxLQUFBQSxRQUFLaEcsWUFBTDFELEtBQUFGLFFBQUFaLFlBQ0FpRixFQUFBb0QsS0FBRXdCLElBSEg1QixHQUFBTSxFQUlBbEUsR0FORGdFLEtBTU9NLElBQUFWLEdBQUFNLEVBQ05pQyxFQUFBMUosS0FFQStJLEdBeGJRaEssRUFBQWlCLEtBQUEySixRQUFBakYsU0FBQSx5QkFBQUwsV0FBQSxXQUFBdEYsRUFBQTJLLEVBQUFDLFFBQUFOLFlBMGJFOUYseUJBQWFtRyxFQUFBaEcsUUFBQVMsRUFBQVosSUFOcEJ3RixJQU9KL0ksS0FBQTBELFFBQ0RzRixFQUFBQSxLQTViVSxDQUFBekgsSUFBQSxVQUFBQyxNQUFBLFNBZ2NWaUcsRUFBQUEsRUFBQUEsR0FBU0csSUFBQUEsRUFBQUEsS0FMSlQsRUFBU0ksS0FBS3FDLE1BQU16RixHQUFLWixHQU83QnlGLEVBQWlCakQsVUFBYi9GLEtBQUtGLFlBQ1IySCxFQUFBQSxLQUFBQSxJQUFTdUIsR0FBYTlKLEVBQUFBLEVBQXRCLElBQ0UySyxFQUFBdEMsS0FBQXVDLEtBQUEzRixFQUFBQSxFQUFBWixFQUFBQSxHQUxKcUUsRUFBUW9CLEdBQVdhLEdBQUs3SixLQUFLRixRQUFRWixZQUFjYyxLQUFLRixRQUFRWCxhQUFlLEVBTzlFc0ksRUFBQUcsRUFBQTVILEtBQUFGLFFBQUFYLFlBQUFhLEtBQUFGLFFBQUFaLFlBRUNpSSxLQUFBQSxRQUFTSSxhQUNQRSxFQUFBekgsS0FBQUYsUUFBQVosYUFGQ2lJLEVBQVMsSUFPYkEsRUFBQSxFQUFBSSxLQUFBQyxHQUFBTCxHQUlBLElBQUEzRixFQUFJK0YsS0FBS3pILE1BQVFpRyxFQUFqQjBELEdBSUV0QyxFQUhEM0YsRUFHT2lJLEVBS056SixLQUFBRixRQUFBaUcsV0FURmlELEVBV0tBLElBQUp4SCxJQUNDQSxFQUFBLEtBRUt1SSxJQUNMdkksR0FBQUEsR0FDTSxLQUFOQSxJQUNBQSxFQUFBLElBR0F3SCxHQUNDeEgsS0FBQUEsSUFDSUEsRUFBQSxHQUVOQSxFQUFBb0csRUFBQSxJQUFBcEcsRUFBQSxHQUFBQSxFQUFBLElBQUFBLEVBQUEsRUFBQUEsRUFBQSxLQUVEdUksSUFDQXZJLEdBQUksR0FFRixLQUFBQSxJQUNBQSxFQUFBLElBTUd4QixLQUFBQSxLQUFBdUUsZUFBQS9DLEdBQ0Z4QixLQUFBUSxTQUFBUixLQUFBRixRQUFBVSxVQUVIUixLQUFLZ0ssZUFDSDFFLFVBQUkwRCxLQUFTeEksU0FBQSxJQUNYUixLQUFBZ0ssYUFBQTNGLFdBQUEsV0FDRDRGLEVBRkRELGFBRU8sTUFDTCxPQUlKaEssS0FBQUEsS0FDR2tLLGFBQWlCL0MsRUFEcEI2QixFQUFBaEosS0FBQSxVQUdnQjZILFVBQWNKLEVBRTlCekgsS0FBQSxZQUFVMkcsVUFBVmhILEVBQUFtSixnQkFBQXRILEdBdGdCUyxJQUFBMkksRUFBQTVDLEtBQUFHLElBQUFQLElBQUFNLEVBQUF6SCxLQUFBRixRQUFBVixZQUFBOEssR0FBQTNDLEtBQUFNLElBQUFWLElBQUFNLEVBQUF6SCxLQUFBRixRQUFBVixZQUFBZ0wsRUFBQTdDLEtBQUFHLElBQUFQLEdBMmdCRk0sRUFDTDRDLEdBQUk5QyxLQUFLdkMsSUFBVG1DLEdBQWlCTSxFQUNmekgsS0FBQTRHLEtBQUFELGFBQUEsS0FBQXdELEdBQ0RuSyxLQUFBNEcsS0FBQUQsYUFBQSxLQUFBdUQsR0FQSGxLLEtBQUsrRyxHQUFHSixhQUFhLEtBQU15RCxHQVN6QnBLLEtBQUErRyxHQUFBSixhQUFjLEtBQWQwRCxLQWhoQk8sQ0FBQTlJLElBQUEsT0FBQUMsTUFBQSxXQW9oQlJ4QixLQUFBZ0YsU0FHQ2hGLEtBQUFnRixRQUFVQSxFQUNSaEYsS0FBQXNLLHVCQUNEdEssS0FBQW1ELFNBQUEsU0FORG5ELEtBQUswQixNQUFNc0IsVUFuaEJKLENBQUF6QixJQUFBLFFBQUFDLE1BQUEsV0F1aEJGeEIsS0FBS2dGLFNBSVZoRixLQUFLZ0YsUUFBUyxFQTNoQlBoRixLQUFBMEIsTUFBQTJFLFdBQUEsQ0FBQTlFLElBQUEsT0FBQUMsTUFBQSxTQXVpQlBxQixFQUFBMEgsR0FFRC9JLElBQUFBLEVBQUFBLEtBQVdBLEdBQVhBLE1BQ0VBLEVBQUErSSxFQUFBLEdBQUE1SyxFQUFBbUosZ0JBQUE5SSxLQUFBdUksT0FBQSxJQUNINUksRUFBQW1KLGdCQUFBOUksS0FBQXlJLFNBSkV6SSxLQUFLd0ssS0FBT2hKLEdBTVorSSxHQUFBdkssS0FBQUYsUUFBQWlHLGFBQ0Z2RSxFQUFJQSxFQUFKLElBQWNpSixLQUFNM0UsU0FFbkI5RixLQUFBSCxHQUFBMkIsTUFBQUEsS0FHU2tKLEdBQ1QxSyxLQUFBMkssSUFBQUMsUUFBQSxVQXBqQlE1SyxLQUFBcUcsUUF1akJQckcsS0FBQUgsR0FBSzhFLFVBdmpCRSxDQUFBcEQsSUFBQSxRQUFBQyxNQUFBLFdBQUF4QixLQUFBMkUsS0FBQSxNQUFBLE1BQUEsQ0FBQSxDQUFBcEQsSUFBQSxPQUFBQyxNQUFBLFNBcUNGMUIsRUFBTEEsR0FpQkEsT0FBQStLLEtBQUFsTCxFQUFBUSxXQUFBQyxPQUFBQyxlQUFBVixHQUFBLE9BQUFLLE1BQUFNLEtBQUFOLEtBQWtCQSxLQUFNOEssRUFBS2hMLEtBdER0QixDQUFBeUIsSUFBQSxrQkFBQUMsTUFBQSxTQXlDUHVKLEdBQ0EsT0FBSzlKLEVBQUFBLEdBQUFBLElBQUwsSUFBQThKLElBMUNPLENBQUF4SixJQUFBLGVBQUFDLE1BQUEsU0E2Q1B3SixHQWJ1QixPQUFBckgsU0FBQXNILGdCQWNsQjlKLDZCQWRrQjZKLEtBaENoQixDQUFBekosSUFBQSxPQUFBQyxNQUFBLFNBc0dScUIsR0F2QkMsT0FBSUEsRUFBRXFJLGVBQTRDLEdBQTFCckksRUFBRXFJLGNBQWNDLE9BeUIxQyxDQUFBaEgsRUFBQXRCLEVBQUFxSSxjQUFBLEdBQUFFLFFBQUE3SCxFQUFBVixFQUFBcUksY0FBQSxHQUFBRyxTQXJCUyxDQUFDbEgsRUFBR3RCLEVBQUV1SSxRQUFTN0gsRUFBR1YsRUFBRXdJLFdBbkZwQixDQUFBOUosSUFBQSxjQUFBQyxNQUFBLFNBOEdGWSxHQUVMLE9BREtFLEVBQUFBLE9BQUFBLEVBQUFBLEdBQUx6QyxHQUNLMkMsZUFoSEUsQ0FBQWpCLElBQUEsV0FBQStKLElBQUEsV0FrRFAsT0FBT3RNLE1BbERBVyxFQUFBLEdBQUFBLEVBQUFrRixVQUFBLENBQUEsd0NBMERQLG1EQUNELDJDQTNEUSwwQ0FBQSwwQ0FBQSwyREE4RFAsSUFDQSxnREFDRCxTQXFnQkMsbUVBbGdCRiw0Q0FvZ0JFLFNBQ0QsU0FDRCxTQUNBLDBDQUNDLGlDQWxnQkQsd0NBb2dCRSx1REFDQSw2RUFDQSxTQUNFLHdDQUNKLFNBamxCUyxTQUFBLFVBQUEwRyxLQUFBLElBZ0ZMMUssRUFBQWxCLFdBQU9BLEVBRVRrQixFQUFBMkssY0FDQTNLLEVBQUE0Syx3QkFBTzlMLEVBQW9CMEwsYUFBM0IsZ0JBbkZOLENBc0ZJSyIsImZpbGUiOiJ0aW1lcGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGxldCBfZGVmYXVsdHMgPSB7XG4gICAgZGlhbFJhZGl1czogMTM1LFxuXHRcdG91dGVyUmFkaXVzOiAxMDUsXG5cdFx0aW5uZXJSYWRpdXM6IDcwLFxuXHRcdHRpY2tSYWRpdXM6IDIwLFxuXHRcdGR1cmF0aW9uOiAzNTAsXG4gICAgY29udGFpbmVyOiBudWxsLFxuICAgIGRlZmF1bHRUaW1lOiAnbm93JywgICAgICAgICAvLyBkZWZhdWx0IHRpbWUsICdub3cnIG9yICcxMzoxNCcgZS5nLlxuXHRcdGZyb21Ob3c6IDAsICAgICAgICAgICAgLy8gTWlsbGlzZWNvbmQgb2Zmc2V0IGZyb20gdGhlIGRlZmF1bHRUaW1lXG4gICAgc2hvd0NsZWFyQnRuOiBmYWxzZSxcblxuICAgIC8vIGludGVybmF0aW9uYWxpemF0aW9uXG4gICAgaTE4bjoge1xuICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgIGNsZWFyOiAnQ2xlYXInLFxuICAgICAgZG9uZTogJ09rJ1xuICAgIH0sXG5cblx0XHRhdXRvQ2xvc2U6IGZhbHNlLCAgICAgIC8vIGF1dG8gY2xvc2Ugd2hlbiBtaW51dGUgaXMgc2VsZWN0ZWRcblx0XHR0d2VsdmVIb3VyOiB0cnVlLCAgICAgIC8vIGNoYW5nZSB0byAxMiBob3VyIEFNL1BNIGNsb2NrIGZyb20gMjQgaG91clxuXHRcdHZpYnJhdGU6IHRydWUgICAgICAgICAgLy8gdmlicmF0ZSB0aGUgZGV2aWNlIHdoZW4gZHJhZ2dpbmcgY2xvY2sgaGFuZFxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cbiAgY2xhc3MgVGltZXBpY2tlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICAgIHN1cGVyKFRpbWVwaWNrZXIsIGVsLCBvcHRpb25zKTtcblxuICAgICAgdGhpcy5lbC5NX1RpbWVwaWNrZXIgPSB0aGlzO1xuXG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGltZXBpY2tlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHRoaXMuaWQgPSBNLmd1aWQoKTtcbiAgICAgIHRoaXMuX2luc2VydEhUTUxJbnRvRE9NKCk7XG4gICAgICB0aGlzLl9zZXR1cE1vZGFsKCk7XG4gICAgICB0aGlzLl9zZXR1cFZhcmlhYmxlcygpO1xuICAgICAgdGhpcy5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIHRoaXMuX2Nsb2NrU2V0dXAoKTtcbiAgICAgIHRoaXMuX3BpY2tlclNldHVwKCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBkZWZhdWx0cygpIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gc3VwZXIuaW5pdCh0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBfYWRkTGVhZGluZ1plcm8obnVtKSB7XG4gICAgICByZXR1cm4gKG51bSA8IDEwID8gJzAnIDogJycpICsgbnVtO1xuICAgIH1cblxuICAgIHN0YXRpYyBfY3JlYXRlU1ZHRWwgKG5hbWUpIHtcbiAgICAgIGxldCBzdmdOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCBuYW1lKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtPYmplY3R9IFBvaW50XG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHggVGhlIFggQ29vcmRpbmF0ZVxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB5IFRoZSBZIENvb3JkaW5hdGVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEdldCB4IHBvc2l0aW9uIG9mIG1vdXNlIG9yIHRvdWNoIGV2ZW50XG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqIEByZXR1cm4ge1BvaW50fSB4IGFuZCB5IGxvY2F0aW9uXG4gICAgICovXG4gICAgc3RhdGljIF9Qb3MoZSkge1xuICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+PSAxKSkge1xuICAgICAgICByZXR1cm4ge3g6IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYLCB5OiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WX07XG4gICAgICB9XG4gICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgcmV0dXJuIHt4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WX07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IEluc3RhbmNlXG4gICAgICovXG4gICAgc3RhdGljIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICBsZXQgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgIHJldHVybiBkb21FbGVtLk1fVGltZXBpY2tlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgdGhpcy5tb2RhbC5kZXN0cm95KCk7XG4gICAgICAkKHRoaXMubW9kYWxFbCkucmVtb3ZlKCk7XG4gICAgICB0aGlzLmVsLk1fVGltZXBpY2tlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAqL1xuICAgIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQgPSB0aGlzLl9oYW5kbGVDbG9ja0NsaWNrU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQgPSB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kID0gdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZC5iaW5kKHRoaXMpO1xuXG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgIHRoaXMucGxhdGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQpO1xuICAgICAgdGhpcy5wbGF0ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQpO1xuXG4gICAgICAkKHRoaXMuc3BhbkhvdXJzKS5vbignY2xpY2snLCB0aGlzLnNob3dWaWV3LmJpbmQodGhpcywgJ2hvdXJzJykpO1xuXHRcdCAgJCh0aGlzLnNwYW5NaW51dGVzKS5vbignY2xpY2snLCB0aGlzLnNob3dWaWV3LmJpbmQodGhpcywgJ21pbnV0ZXMnKSk7XG4gICAgfVxuXG4gICAgX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlSW5wdXRDbGljaygpIHtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cblxuICAgIF9oYW5kbGVJbnB1dEtleWRvd24oZSkge1xuICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9oYW5kbGVDbG9ja0NsaWNrU3RhcnQoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGV0IGNsb2NrUGxhdGVCUiA9IHRoaXMucGxhdGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICBsZXQgb2Zmc2V0ID0ge3g6IGNsb2NrUGxhdGVCUi5sZWZ0LCB5OiBjbG9ja1BsYXRlQlIudG9wfTtcblxuICAgICAgdGhpcy54MCA9IG9mZnNldC54ICsgdGhpcy5vcHRpb25zLmRpYWxSYWRpdXM7XG5cdFx0XHR0aGlzLnkwID0gb2Zmc2V0LnkgKyB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cztcbiAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBjbGlja1BvcyA9IFRpbWVwaWNrZXIuX1BvcyhlKTtcblx0XHRcdHRoaXMuZHggPSBjbGlja1Bvcy54IC0gdGhpcy54MDtcbiAgICAgIHRoaXMuZHkgPSBjbGlja1Bvcy55IC0gdGhpcy55MDtcblxuICAgICAgLy8gU2V0IGNsb2NrIGhhbmRzXG4gICAgICB0aGlzLnNldEhhbmQodGhpcy5keCwgdGhpcy5keSwgZmFsc2UpO1xuXG5cdFx0XHQvLyBNb3VzZW1vdmUgb24gZG9jdW1lbnRcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7XG5cblx0XHRcdC8vIE1vdXNldXAgb24gZG9jdW1lbnRcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQpO1xuICAgIH1cblxuICAgIF9oYW5kbGVEb2N1bWVudENsaWNrTW92ZShlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRsZXQgY2xpY2tQb3MgPSBUaW1lcGlja2VyLl9Qb3MoZSk7XG5cdFx0XHRsZXQgeCA9IGNsaWNrUG9zLnggLSB0aGlzLngwO1xuXHRcdFx0bGV0IHkgPSBjbGlja1Bvcy55IC0gdGhpcy55MDtcblx0XHRcdHRoaXMubW92ZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy5zZXRIYW5kKHgsIHksIGZhbHNlLCB0cnVlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRG9jdW1lbnRDbGlja0VuZChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTtcblx0XHRcdGxldCBjbGlja1BvcyA9IFRpbWVwaWNrZXIuX1BvcyhlKTtcblx0XHRcdGxldCB4ID0gY2xpY2tQb3MueCAtIHRoaXMueDA7XG5cdFx0XHRsZXQgeSA9IGNsaWNrUG9zLnkgLSB0aGlzLnkwO1xuXHRcdFx0aWYgKHRoaXMubW92ZWQgJiYgeCA9PT0gdGhpcy5keCAmJiB5ID09PSB0aGlzLmR5KSB7XG5cdFx0XHRcdHRoaXMuc2V0SGFuZCh4LCB5KTtcbiAgICAgIH1cblxuXHRcdFx0aWYgKHRoaXMuY3VycmVudFZpZXcgPT09ICdob3VycycpIHtcblx0XHRcdFx0dGhpcy5zaG93VmlldygnbWludXRlcycsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAvIDIpO1xuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5hdXRvQ2xvc2UpIHtcblx0XHRcdFx0JCh0aGlzLm1pbnV0ZXNWaWV3KS5hZGRDbGFzcygndGltZXBpY2tlci1kaWFsLW91dCcpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmRvbmUoKTtcblx0XHRcdFx0fSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uIC8gMik7XG4gICAgICB9XG5cblx0XHRcdC8vIFVuYmluZCBtb3VzZW1vdmUgZXZlbnRcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7XG4gICAgfVxuXG4gICAgX2luc2VydEhUTUxJbnRvRE9NKCkge1xuICAgICAgdGhpcy4kbW9kYWxFbCA9ICQoVGltZXBpY2tlci5fdGVtcGxhdGUpO1xuICAgICAgdGhpcy5tb2RhbEVsID0gdGhpcy4kbW9kYWxFbFswXTtcbiAgICAgIHRoaXMubW9kYWxFbC5pZCA9ICdtb2RhbC0nICsgdGhpcy5pZDtcblxuICAgICAgLy8gQXBwZW5kIHBvcG92ZXIgdG8gaW5wdXQgYnkgZGVmYXVsdFxuICAgICAgbGV0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGFpbmVyKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyICYmICEhY29udGFpbmVyRWwpIHtcbiAgICAgICAgdGhpcy4kbW9kYWxFbC5hcHBlbmRUbyhjb250YWluZXJFbCk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJG1vZGFsRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9zZXR1cE1vZGFsKCkge1xuICAgICAgdGhpcy5tb2RhbCA9IE0uTW9kYWwuaW5pdCh0aGlzLm1vZGFsRWwsIHtcbiAgICAgICAgb25DbG9zZUVuZDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9zZXR1cFZhcmlhYmxlcygpIHtcblx0XHQgIHRoaXMuY3VycmVudFZpZXcgPSAnaG91cnMnO1xuICAgICAgdGhpcy52aWJyYXRlID0gbmF2aWdhdG9yLnZpYnJhdGUgPyAndmlicmF0ZScgOiBuYXZpZ2F0b3Iud2Via2l0VmlicmF0ZSA/ICd3ZWJraXRWaWJyYXRlJyA6IG51bGw7XG5cbiAgICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1jYW52YXMnKTtcblx0XHQgIHRoaXMucGxhdGUgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItcGxhdGUnKTtcblxuXHRcdCAgdGhpcy5ob3Vyc1ZpZXcgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItaG91cnMnKTtcblx0XHQgIHRoaXMubWludXRlc1ZpZXcgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItbWludXRlcycpO1xuXHRcdCAgdGhpcy5zcGFuSG91cnMgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItc3Bhbi1ob3VycycpO1xuXHRcdCAgdGhpcy5zcGFuTWludXRlcyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1zcGFuLW1pbnV0ZXMnKTtcblx0XHQgIHRoaXMuc3BhbkFtUG0gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItc3Bhbi1hbS1wbScpO1xuXHRcdCAgdGhpcy5mb290ZXIgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItZm9vdGVyJyk7XG5cdFx0ICB0aGlzLmFtT3JQbSA9ICdQTSc7XG4gICAgfVxuXG4gICAgX3BpY2tlclNldHVwKCkge1xuXG4gICAgICBsZXQgJGNsZWFyQnRuID0gJCgnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IHRpbWVwaWNrZXItY2xlYXIgd2F2ZXMtZWZmZWN0XCIgc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIgdHlwZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiJyArICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cj8gJzMnIDogJzEnKSArICdcIj4nICsgdGhpcy5vcHRpb25zLmkxOG4uY2xlYXIgKyAnPC9idXR0b24+JylcbiAgICAgICAgLmFwcGVuZFRvKHRoaXMuZm9vdGVyKS5vbignY2xpY2snLCB0aGlzLmNsZWFyLmJpbmQodGhpcykpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHtcbiAgICAgICAgJGNsZWFyQnRuLmNzcyh7dmlzaWJpbGl0eTogJyd9KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiY29uZmlybWF0aW9uLWJ0bnNcIj48L2Rpdj4nKTtcblx0XHQgICQoJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCB0aW1lcGlja2VyLWNsb3NlIHdhdmVzLWVmZmVjdFwiIHR5cGU9XCJidXR0b25cIiB0YWJpbmRleD1cIicgKyAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXI/ICczJyA6ICcxJykgKyAnXCI+JyArIHRoaXMub3B0aW9ucy5pMThuLmNhbmNlbCArICc8L2J1dHRvbj4nKVxuICAgICAgICAuYXBwZW5kVG8oY29uZmlybWF0aW9uQnRuc0NvbnRhaW5lcikub24oJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcblx0XHQgICQoJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCB0aW1lcGlja2VyLWNsb3NlIHdhdmVzLWVmZmVjdFwiIHR5cGU9XCJidXR0b25cIiB0YWJpbmRleD1cIicgKyAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXI/ICczJyA6ICcxJykgKyAnXCI+JyArIHRoaXMub3B0aW9ucy5pMThuLmRvbmUgKyAnPC9idXR0b24+JylcbiAgICAgICAgLmFwcGVuZFRvKGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIpLm9uKCdjbGljaycsIHRoaXMuZG9uZS5iaW5kKHRoaXMpKTtcbiAgICAgIGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIuYXBwZW5kVG8odGhpcy5mb290ZXIpO1xuICAgIH1cblxuXG4gICAgX2Nsb2NrU2V0dXAoKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcbiAgICAgICAgdGhpcy4kYW1CdG4gPSAkKCc8ZGl2IGNsYXNzPVwiYW0tYnRuXCI+QU08L2Rpdj4nKTtcbiAgICAgICAgdGhpcy4kcG1CdG4gPSAkKCc8ZGl2IGNsYXNzPVwicG0tYnRuXCI+UE08L2Rpdj4nKTtcbiAgICAgICAgdGhpcy4kYW1CdG4ub24oJ2NsaWNrJywgdGhpcy5faGFuZGxlQW1QbUNsaWNrLmJpbmQodGhpcykpLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pO1xuXHRcdFx0XHR0aGlzLiRwbUJ0bi5vbignY2xpY2snLCB0aGlzLl9oYW5kbGVBbVBtQ2xpY2suYmluZCh0aGlzKSkuYXBwZW5kVG8odGhpcy5zcGFuQW1QbSk7XG5cdFx0ICB9XG5cbiAgICAgIHRoaXMuX2J1aWxkSG91cnNWaWV3KCk7XG4gICAgICB0aGlzLl9idWlsZE1pbnV0ZXNWaWV3KCk7XG4gICAgICB0aGlzLl9idWlsZFNWR0Nsb2NrKCk7XG4gICAgfVxuXG4gICAgX2J1aWxkU1ZHQ2xvY2soKSB7XG4gICAgICAvLyBEcmF3IGNsb2NrIGhhbmRzIGFuZCBvdGhlcnNcbiAgICAgIGxldCBkaWFsUmFkaXVzID0gdGhpcy5vcHRpb25zLmRpYWxSYWRpdXM7XG4gICAgICBsZXQgdGlja1JhZGl1cyA9IHRoaXMub3B0aW9ucy50aWNrUmFkaXVzO1xuICAgICAgbGV0IGRpYW1ldGVyID0gZGlhbFJhZGl1cyAqIDI7XG5cblx0XHRcdGxldCBzdmcgPSBUaW1lcGlja2VyLl9jcmVhdGVTVkdFbCgnc3ZnJyk7XG5cdFx0XHRzdmcuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0aW1lcGlja2VyLXN2ZycpO1xuXHRcdFx0c3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBkaWFtZXRlcik7XG5cdFx0XHRzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBkaWFtZXRlcik7XG5cdFx0XHRsZXQgZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdnJyk7XG5cdFx0XHRnLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgZGlhbFJhZGl1cyArICcsJyArIGRpYWxSYWRpdXMgKyAnKScpO1xuXHRcdFx0bGV0IGJlYXJpbmcgPSBUaW1lcGlja2VyLl9jcmVhdGVTVkdFbCgnY2lyY2xlJyk7XG5cdFx0XHRiZWFyaW5nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGltZXBpY2tlci1jYW52YXMtYmVhcmluZycpO1xuXHRcdFx0YmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2N4JywgMCk7XG5cdFx0XHRiZWFyaW5nLnNldEF0dHJpYnV0ZSgnY3knLCAwKTtcblx0XHRcdGJlYXJpbmcuc2V0QXR0cmlidXRlKCdyJywgNCk7XG5cdFx0XHRsZXQgaGFuZCA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdsaW5lJyk7XG5cdFx0XHRoYW5kLnNldEF0dHJpYnV0ZSgneDEnLCAwKTtcblx0XHRcdGhhbmQuc2V0QXR0cmlidXRlKCd5MScsIDApO1xuXHRcdFx0bGV0IGJnID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ2NpcmNsZScpO1xuXHRcdFx0Ymcuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0aW1lcGlja2VyLWNhbnZhcy1iZycpO1xuXHRcdFx0Ymcuc2V0QXR0cmlidXRlKCdyJywgdGlja1JhZGl1cyk7XG5cdFx0XHRnLmFwcGVuZENoaWxkKGhhbmQpO1xuXHRcdFx0Zy5hcHBlbmRDaGlsZChiZyk7XG5cdFx0XHRnLmFwcGVuZENoaWxkKGJlYXJpbmcpO1xuXHRcdFx0c3ZnLmFwcGVuZENoaWxkKGcpO1xuXHRcdFx0dGhpcy5fY2FudmFzLmFwcGVuZENoaWxkKHN2Zyk7XG5cblx0XHRcdHRoaXMuaGFuZCA9IGhhbmQ7XG5cdFx0XHR0aGlzLmJnID0gYmc7XG5cdFx0XHR0aGlzLmJlYXJpbmcgPSBiZWFyaW5nO1xuXHRcdFx0dGhpcy5nID0gZztcbiAgICB9XG5cbiAgICBfYnVpbGRIb3Vyc1ZpZXcoKSB7XG4gICAgICBsZXQgJHRpY2sgPSAkKCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10aWNrXCI+PC9kaXY+Jyk7XG5cdCAgICAvLyBIb3VycyB2aWV3XG5cdFx0ICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcblx0XHRcdCAgZm9yIChsZXQgaSA9IDE7IGkgPCAxMzsgaSArPSAxKSB7XG5cdFx0XHRcdCAgbGV0IHRpY2sgPSAkdGljay5jbG9uZSgpO1xuXHRcdFx0XHQgIGxldCByYWRpYW4gPSBpIC8gNiAqIE1hdGguUEk7XG5cdFx0XHRcdCAgbGV0IHJhZGl1cyA9IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cztcblx0XHRcdFx0ICB0aWNrLmNzcyh7XG5cdFx0XHRcdFx0ICBsZWZ0OiB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cyArIE1hdGguc2luKHJhZGlhbikgKiByYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCcsXG5cdFx0XHRcdFx0ICB0b3A6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzIC0gTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4J1xuXHRcdFx0XHQgIH0pO1xuXHRcdFx0XHQgIHRpY2suaHRtbChpID09PSAwID8gJzAwJyA6IGkpO1xuXHRcdFx0XHQgIHRoaXMuaG91cnNWaWV3LmFwcGVuZENoaWxkKHRpY2tbMF0pO1xuXHRcdFx0XHQgIC8vIHRpY2sub24obW91c2Vkb3duRXZlbnQsIG1vdXNlZG93bik7XG5cdFx0XHQgIH1cblx0XHQgIH0gZWxzZSB7XG5cdFx0XHQgIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkgKz0gMSkge1xuXHRcdFx0XHQgIGxldCB0aWNrID0gJHRpY2suY2xvbmUoKTtcblx0XHRcdFx0ICBsZXQgcmFkaWFuID0gaSAvIDYgKiBNYXRoLlBJO1xuXHRcdFx0XHQgIGxldCBpbm5lciA9IGkgPiAwICYmIGkgPCAxMztcblx0XHRcdFx0ICBsZXQgcmFkaXVzID0gaW5uZXIgPyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMgOiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXM7XG5cdFx0XHRcdCAgdGljay5jc3Moe1xuXHRcdFx0XHRcdCAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLFxuXHRcdFx0XHRcdCAgdG9wOiB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cyAtIE1hdGguY29zKHJhZGlhbikgKiByYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCdcblx0XHRcdFx0ICB9KTtcblx0XHRcdFx0ICB0aWNrLmh0bWwoaSA9PT0gMCA/ICcwMCcgOiBpKTtcblx0XHRcdFx0ICB0aGlzLmhvdXJzVmlldy5hcHBlbmRDaGlsZCh0aWNrWzBdKTtcblx0XHRcdFx0ICAvLyB0aWNrLm9uKG1vdXNlZG93bkV2ZW50LCBtb3VzZWRvd24pO1xuXHRcdFx0ICB9XG5cdFx0ICB9XG4gICAgfVxuXG4gICAgX2J1aWxkTWludXRlc1ZpZXcoKSB7XG4gICAgICBsZXQgJHRpY2sgPSAkKCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10aWNrXCI+PC9kaXY+Jyk7XG5cdFx0ICAvLyBNaW51dGVzIHZpZXdcblx0XHQgIGZvciAobGV0IGkgPSAwOyBpIDwgNjA7IGkgKz0gNSkge1xuXHRcdFx0ICBsZXQgdGljayA9ICR0aWNrLmNsb25lKCk7XG5cdFx0XHQgIGxldCByYWRpYW4gPSBpIC8gMzAgKiBNYXRoLlBJO1xuXHRcdFx0ICB0aWNrLmNzcyh7XG5cdFx0XHRcdCAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLFxuXHRcdFx0XHQgIHRvcDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgLSBNYXRoLmNvcyhyYWRpYW4pICogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnXG5cdFx0XHQgIH0pO1xuXHRcdFx0ICB0aWNrLmh0bWwoVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8oaSkpO1xuXHRcdFx0ICB0aGlzLm1pbnV0ZXNWaWV3LmFwcGVuZENoaWxkKHRpY2tbMF0pO1xuXHRcdCAgfVxuICAgIH1cblxuICAgIF9oYW5kbGVBbVBtQ2xpY2soZSkge1xuICAgICAgbGV0ICRidG5DbGlja2VkID0gJChlLnRhcmdldCk7XG4gICAgICB0aGlzLmFtT3JQbSA9ICRidG5DbGlja2VkLmhhc0NsYXNzKCdhbS1idG4nKSA/ICdBTScgOiAnUE0nO1xuICAgICAgdGhpcy5fdXBkYXRlQW1QbVZpZXcoKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlQW1QbVZpZXcoKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcbiAgICAgICAgdGhpcy4kYW1CdG4udG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIHRoaXMuYW1PclBtID09PSAnQU0nKTtcbiAgICAgICAgdGhpcy4kcG1CdG4udG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIHRoaXMuYW1PclBtID09PSAnUE0nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlVGltZUZyb21JbnB1dCgpIHtcbiAgICAgIC8vIEdldCB0aGUgdGltZVxuXHRcdCAgbGV0IHZhbHVlID0gKCh0aGlzLmVsLnZhbHVlIHx8IHRoaXMub3B0aW9ucy5kZWZhdWx0VGltZSB8fCAnJykgKyAnJykuc3BsaXQoJzonKTtcblx0XHQgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91ciAmJiAhKHR5cGVvZiB2YWx1ZVsxXSA9PT0gJ3VuZGVmaW5lZCcpKSB7XG5cdFx0XHQgIGlmICh2YWx1ZVsxXS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoXCJBTVwiKSA+IDApe1xuXHRcdFx0XHQgIHRoaXMuYW1PclBtID0gJ0FNJztcblx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICB0aGlzLmFtT3JQbSA9ICdQTSc7XG5cdFx0XHQgIH1cblx0XHRcdCAgdmFsdWVbMV0gPSB2YWx1ZVsxXS5yZXBsYWNlKFwiQU1cIiwgXCJcIikucmVwbGFjZShcIlBNXCIsIFwiXCIpO1xuXHRcdCAgfVxuXHRcdCAgaWYgKHZhbHVlWzBdID09PSAnbm93Jykge1xuXHRcdFx0ICBsZXQgbm93ID0gbmV3IERhdGUoKyBuZXcgRGF0ZSgpICsgdGhpcy5vcHRpb25zLmZyb21Ob3cpO1xuXHRcdFx0ICB2YWx1ZSA9IFtcblx0XHRcdFx0ICBub3cuZ2V0SG91cnMoKSxcblx0XHRcdFx0ICBub3cuZ2V0TWludXRlcygpXG5cdFx0XHQgIF07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIHRoaXMuYW1PclBtID0gdmFsdWVbMF0gPj0gMTIgJiYgdmFsdWVbMF0gPCAyNCA/ICdQTScgOiAnQU0nO1xuICAgICAgICB9XG5cdFx0ICB9XG5cdFx0ICB0aGlzLmhvdXJzID0gKyB2YWx1ZVswXSB8fCAwO1xuXHRcdCAgdGhpcy5taW51dGVzID0gKyB2YWx1ZVsxXSB8fCAwO1xuXHRcdCAgdGhpcy5zcGFuSG91cnMuaW5uZXJIVE1MPSB0aGlzLmhvdXJzO1xuXHRcdCAgdGhpcy5zcGFuTWludXRlcy5pbm5lckhUTUwgPSBUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyh0aGlzLm1pbnV0ZXMpO1xuXG4gICAgICB0aGlzLl91cGRhdGVBbVBtVmlldygpO1xuICAgIH1cblxuICAgIHNob3dWaWV3KHZpZXcsIGRlbGF5KSB7XG5cdFx0ICBpZiAodmlldyA9PT0gJ21pbnV0ZXMnICYmICQodGhpcy5ob3Vyc1ZpZXcpLmNzcyhcInZpc2liaWxpdHlcIikgPT09IFwidmlzaWJsZVwiKSB7XG5cdFx0XHQgIC8vIHJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZUhvdXJTZWxlY3QpO1xuXHRcdCAgfVxuXHRcdCAgbGV0IGlzSG91cnMgPSB2aWV3ID09PSAnaG91cnMnLFxuXHRcdFx0XHQgIG5leHRWaWV3ID0gaXNIb3VycyA/IHRoaXMuaG91cnNWaWV3IDogdGhpcy5taW51dGVzVmlldyxcblx0XHRcdFx0ICBoaWRlVmlldyA9IGlzSG91cnMgPyB0aGlzLm1pbnV0ZXNWaWV3IDogdGhpcy5ob3Vyc1ZpZXc7XG5cdFx0ICB0aGlzLmN1cnJlbnRWaWV3ID0gdmlldztcblxuXHRcdCAgJCh0aGlzLnNwYW5Ib3VycykudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIGlzSG91cnMpO1xuXHRcdCAgJCh0aGlzLnNwYW5NaW51dGVzKS50b2dnbGVDbGFzcygndGV4dC1wcmltYXJ5JywgIWlzSG91cnMpO1xuXG5cdFx0ICAvLyBUcmFuc2l0aW9uIHZpZXdcblx0XHQgIGhpZGVWaWV3LmNsYXNzTGlzdC5hZGQoJ3RpbWVwaWNrZXItZGlhbC1vdXQnKTtcblx0XHQgICQobmV4dFZpZXcpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3RpbWVwaWNrZXItZGlhbC1vdXQnKTtcblxuXHRcdCAgLy8gUmVzZXQgY2xvY2sgaGFuZFxuXHRcdCAgdGhpcy5yZXNldENsb2NrKGRlbGF5KTtcblxuXHRcdCAgLy8gQWZ0ZXIgdHJhbnNpdGlvbnMgZW5kZWRcblx0XHQgIGNsZWFyVGltZW91dCh0aGlzLnRvZ2dsZVZpZXdUaW1lcik7XG5cdFx0ICB0aGlzLnRvZ2dsZVZpZXdUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0ICAkKGhpZGVWaWV3KS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG5cdFx0ICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuICAgIH1cblxuICAgIHJlc2V0Q2xvY2soZGVsYXkpIHtcbiAgICAgIGxldCB2aWV3ID0gdGhpcy5jdXJyZW50Vmlldyxcblx0XHRcdFx0ICB2YWx1ZSA9IHRoaXNbdmlld10sXG5cdFx0XHRcdCAgaXNIb3VycyA9IHZpZXcgPT09ICdob3VycycsXG5cdFx0XHRcdCAgdW5pdCA9IE1hdGguUEkgLyAoaXNIb3VycyA/IDYgOiAzMCksXG5cdFx0XHRcdCAgcmFkaWFuID0gdmFsdWUgKiB1bml0LFxuXHRcdFx0XHQgIHJhZGl1cyA9IGlzSG91cnMgJiYgdmFsdWUgPiAwICYmIHZhbHVlIDwgMTMgP1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5pbm5lclJhZGl1cyA6IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cyxcblx0XHRcdFx0ICB4ID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cyxcblx0XHRcdFx0ICB5ID0gLSBNYXRoLmNvcyhyYWRpYW4pICogcmFkaXVzLFxuXHRcdFx0XHQgIHNlbGYgPSB0aGlzO1xuXG5cdFx0ICBpZiAoZGVsYXkpIHtcblx0XHRcdCAgJCh0aGlzLmNhbnZhcykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItY2FudmFzLW91dCcpO1xuXHRcdFx0ICBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0ICAkKHNlbGYuY2FudmFzKS5yZW1vdmVDbGFzcygndGltZXBpY2tlci1jYW52YXMtb3V0Jyk7XG5cdFx0XHRcdCAgc2VsZi5zZXRIYW5kKHgsIHkpO1xuXHRcdFx0ICB9LCBkZWxheSk7XG5cdFx0ICB9IGVsc2Uge1xuXHRcdFx0ICB0aGlzLnNldEhhbmQoeCwgeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0SGFuZCh4LCB5LCByb3VuZEJ5NSkge1xuXHRcdCAgbGV0IHJhZGlhbiA9IE1hdGguYXRhbjIoeCwgLSB5KSxcblx0XHRcdGlzSG91cnMgPSB0aGlzLmN1cnJlbnRWaWV3ID09PSAnaG91cnMnLFxuXHRcdFx0dW5pdCA9IE1hdGguUEkgLyAoaXNIb3VycyB8fCByb3VuZEJ5NT8gNiA6IDMwKSxcblx0XHRcdHogPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSksXG5cdFx0XHRpbm5lciA9IGlzSG91cnMgJiYgeiA8ICh0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMgKyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMpIC8gMixcblx0XHRcdHJhZGl1cyA9IGlubmVyID8gdGhpcy5vcHRpb25zLmlubmVyUmFkaXVzIDogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzO1xuXG5cdFx0ICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcblx0XHRcdCAgcmFkaXVzID0gdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzO1xuICAgICAgfVxuXG5cdFx0ICAvLyBSYWRpYW4gc2hvdWxkIGluIHJhbmdlIFswLCAyUEldXG5cdFx0ICBpZiAocmFkaWFuIDwgMCkge1xuXHRcdFx0ICByYWRpYW4gPSBNYXRoLlBJICogMiArIHJhZGlhbjtcbiAgICAgIH1cblxuXHRcdCAgLy8gR2V0IHRoZSByb3VuZCB2YWx1ZVxuXHRcdCAgbGV0IHZhbHVlID0gTWF0aC5yb3VuZChyYWRpYW4gLyB1bml0KTtcblxuXHRcdCAgLy8gR2V0IHRoZSByb3VuZCByYWRpYW5cblx0XHQgIHJhZGlhbiA9IHZhbHVlICogdW5pdDtcblxuXHRcdCAgLy8gQ29ycmVjdCB0aGUgaG91cnMgb3IgbWludXRlc1xuXHRcdCAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG5cdFx0XHQgIGlmIChpc0hvdXJzKSB7XG5cdFx0XHRcdCAgaWYgKHZhbHVlID09PSAwKVxuXHRcdFx0XHRcdCAgdmFsdWUgPSAxMjtcblx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICBpZiAocm91bmRCeTUpXG5cdFx0XHRcdFx0ICB2YWx1ZSAqPSA1O1xuXHRcdFx0XHQgIGlmICh2YWx1ZSA9PT0gNjApXG5cdFx0XHRcdFx0ICB2YWx1ZSA9IDA7XG5cdFx0XHQgIH1cblx0XHQgIH0gZWxzZSB7XG5cdFx0XHQgIGlmIChpc0hvdXJzKSB7XG5cdFx0XHRcdCAgaWYgKHZhbHVlID09PSAxMikge1xuXHRcdFx0XHRcdCAgdmFsdWUgPSAwO1xuICAgICAgICAgIH1cblx0XHRcdFx0ICB2YWx1ZSA9IGlubmVyID8gKHZhbHVlID09PSAwID8gMTIgOiB2YWx1ZSkgOiB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSArIDEyO1xuXHRcdFx0ICB9IGVsc2Uge1xuXHRcdFx0XHQgIGlmIChyb3VuZEJ5NSkge1xuXHRcdFx0XHRcdCAgdmFsdWUgKj0gNTtcbiAgICAgICAgICB9XG5cdFx0XHRcdCAgaWYgKHZhbHVlID09PSA2MCkge1xuXHRcdFx0XHRcdCAgdmFsdWUgPSAwO1xuICAgICAgICAgIH1cblx0XHRcdCAgfVxuXHRcdCAgfVxuXG5cdFx0ICAvLyBPbmNlIGhvdXJzIG9yIG1pbnV0ZXMgY2hhbmdlZCwgdmlicmF0ZSB0aGUgZGV2aWNlXG5cdFx0ICBpZiAodGhpc1t0aGlzLmN1cnJlbnRWaWV3XSAhPT0gdmFsdWUpIHtcblx0XHRcdCAgaWYgKHRoaXMudmlicmF0ZSAmJiB0aGlzLm9wdGlvbnMudmlicmF0ZSkge1xuXHRcdFx0XHQgIC8vIERvIG5vdCB2aWJyYXRlIHRvbyBmcmVxdWVudGx5XG5cdFx0XHRcdCAgaWYgKCF0aGlzLnZpYnJhdGVUaW1lcikge1xuXHRcdFx0XHRcdCAgbmF2aWdhdG9yW3RoaXMudmlicmF0ZV0oMTApO1xuXHRcdFx0XHRcdCAgdGhpcy52aWJyYXRlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdCAgdGhpcy52aWJyYXRlVGltZXIgPSBudWxsO1xuXHRcdFx0XHRcdCAgfSwgMTAwKTtcblx0XHRcdFx0ICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuXHRcdCAgdGhpc1t0aGlzLmN1cnJlbnRWaWV3XSA9IHZhbHVlO1xuICAgICAgaWYgKGlzSG91cnMpIHtcbiAgICAgICAgdGhpc1snc3BhbkhvdXJzJ10uaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzWydzcGFuTWludXRlcyddLmlubmVySFRNTCA9IFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHZhbHVlKTtcbiAgICAgIH1cblxuXHRcdCAgLy8gU2V0IGNsb2NrIGhhbmQgYW5kIG90aGVycycgcG9zaXRpb25cblx0XHQgIGxldCBjeDEgPSBNYXRoLnNpbihyYWRpYW4pICogKHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzKSxcblx0XHRcdCAgICBjeTEgPSAtIE1hdGguY29zKHJhZGlhbikgKiAocmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMpLFxuXHRcdCAgICAgIGN4MiA9IE1hdGguc2luKHJhZGlhbikgKiByYWRpdXMsXG5cdFx0XHQgICAgY3kyID0gLSBNYXRoLmNvcyhyYWRpYW4pICogcmFkaXVzO1xuXHRcdCAgdGhpcy5oYW5kLnNldEF0dHJpYnV0ZSgneDInLCBjeDEpO1xuXHRcdCAgdGhpcy5oYW5kLnNldEF0dHJpYnV0ZSgneTInLCBjeTEpO1xuXHRcdCAgdGhpcy5iZy5zZXRBdHRyaWJ1dGUoJ2N4JywgY3gyKTtcblx0XHQgIHRoaXMuYmcuc2V0QXR0cmlidXRlKCdjeScsIGN5Mik7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3VwZGF0ZVRpbWVGcm9tSW5wdXQoKTtcbiAgICAgIHRoaXMuc2hvd1ZpZXcoJ2hvdXJzJyk7XG4gICAgICB0aGlzLm1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5tb2RhbC5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmlzaCB0aW1lcGlja2VyIHNlbGVjdGlvbi5cbiAgICAgKi9cbiAgICBkb25lKGUsIGNsZWFyVmFsdWUpIHtcbiAgICAgIC8vIFNldCBpbnB1dCB2YWx1ZVxuXHRcdCAgbGV0IGxhc3QgPSB0aGlzLmVsLnZhbHVlO1xuXHRcdCAgbGV0IHZhbHVlID0gY2xlYXJWYWx1ZSA/ICcnIDogVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8odGhpcy5ob3VycykgKyAnOicgK1xuICAgICAgICAgIFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHRoaXMubWludXRlcyk7XG4gICAgICB0aGlzLnRpbWUgPSB2YWx1ZTtcblx0XHQgIGlmICghY2xlYXJWYWx1ZSAmJiB0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuXHRcdFx0ICB2YWx1ZSA9IGAke3ZhbHVlfSAke3RoaXMuYW1PclBtfWA7XG4gICAgICB9XG5cdFx0ICB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG5cbiAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50XG5cdFx0ICBpZiAodmFsdWUgIT09IGxhc3QpIHtcblx0XHRcdCAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0ICB9XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgIHRoaXMuZG9uZShudWxsLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBUaW1lcGlja2VyLl90ZW1wbGF0ZSA9IFtcblx0XHQnPGRpdiBjbGFzcz0gXCJtb2RhbCB0aW1lcGlja2VyLW1vZGFsXCI+Jyxcblx0XHRcdCc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudCB0aW1lcGlja2VyLWNvbnRhaW5lclwiPicsXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaWdpdGFsLWRpc3BsYXlcIj4nLFxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10ZXh0LWNvbnRhaW5lclwiPicsXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZGlzcGxheS1jb2x1bW5cIj4nLFxuXHRcdFx0XHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJ0aW1lcGlja2VyLXNwYW4taG91cnMgdGV4dC1wcmltYXJ5XCI+PC9zcGFuPicsXG5cdFx0XHRcdFx0XHRcdCc6Jyxcblx0XHRcdFx0XHRcdFx0JzxzcGFuIGNsYXNzPVwidGltZXBpY2tlci1zcGFuLW1pbnV0ZXNcIj48L3NwYW4+Jyxcblx0XHRcdFx0XHRcdCc8L2Rpdj4nLFxuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWRpc3BsYXktY29sdW1uIHRpbWVwaWNrZXItZGlzcGxheS1hbS1wbVwiPicsXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1zcGFuLWFtLXBtXCI+PC9kaXY+Jyxcblx0XHRcdFx0XHRcdCc8L2Rpdj4nLFxuXHRcdFx0XHRcdCc8L2Rpdj4nLFxuXHRcdFx0XHQnPC9kaXY+Jyxcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWFuYWxvZy1kaXNwbGF5XCI+Jyxcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItcGxhdGVcIj4nLFxuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWNhbnZhc1wiPjwvZGl2PicsXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZGlhbCB0aW1lcGlja2VyLWhvdXJzXCI+PC9kaXY+Jyxcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaWFsIHRpbWVwaWNrZXItbWludXRlcyB0aW1lcGlja2VyLWRpYWwtb3V0XCI+PC9kaXY+Jyxcblx0XHRcdFx0ICAnPC9kaXY+Jyxcblx0XHQgICAgICAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZm9vdGVyXCI+PC9kaXY+Jyxcblx0XHRcdFx0JzwvZGl2PicsXG5cdFx0XHQnPC9kaXY+Jyxcblx0XHQnPC9kaXY+J1xuXHRdLmpvaW4oJycpO1xuXG4gIE0uVGltZXBpY2tlciA9IFRpbWVwaWNrZXI7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihUaW1lcGlja2VyLCAndGltZXBpY2tlcicsICdNX1RpbWVwaWNrZXInKTtcbiAgfVxuXG59KShjYXNoKTtcbiJdfQ==
