"use strict";var _createClass=function(){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(o):void 0};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}!function(h,e){var i={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},t=function(t){function o(t,e){_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,t,e));return(i.el.M_Tooltip=i).options=h.extend({},o.defaults,e),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){h(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var t=document.createElement("div");t.classList.add("material-tooltip"),this.tooltipEl=t;var e=document.createElement("div");e.classList.add("tooltip-content"),e.innerHTML=this.options.html,t.appendChild(e),document.body.appendChild(t)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.options=h.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var t=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){t.isHovered||t.isFocused||t._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(t.isHovered||t.isFocused)&&t._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,e=this.el,i=this.tooltipEl,o=e.offsetHeight,n=e.offsetWidth,s=i.offsetHeight,l=i.offsetWidth,r=this.options.margin,u=void 0,a=void 0;this.xMovement=0,this.yMovement=0,u=e.getBoundingClientRect().top+M.getDocumentScrollTop(),a=e.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(u+=-s-r,a+=n/2-l/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(u+=o/2-s/2,a+=n+r,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(u+=o/2-s/2,a+=-l-r,this.xMovement=-this.options.transitionMovement):(u+=o+r,a+=n/2-l/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(a,u,l,s),h(i).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(t,e,i,o){var n=M.getDocumentScrollLeft(),s=M.getDocumentScrollTop(),l=t-n,r=e-s,u={left:l,top:r,width:i,height:o},a=this.options.margin+this.options.transitionMovement,h=M.checkWithinContainer(document.body,u,a);return h.left?l=a:h.right&&(l-=l+i-window.innerWidth),h.top?r=a:h.bottom&&(r-=r+o-window.innerHeight),{x:l+n,y:r+s}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.open()}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.close()}},{key:"_handleFocus",value:function(){this.isFocused=!0,this.open()}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var t={},e=this.el.getAttribute("data-tooltip"),i=this.el.getAttribute("data-position");return e&&(t.html=e),i&&(t.position=i),t}}],[{key:"init",value:function(t,e){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Tooltip}},{key:"defaults",get:function(){return i}}]),o}();M.Tooltip=t,M.jQueryLoaded&&M.initializeJqueryWrapper(t,"tooltip","M_Tooltip")}(cash,M.anime);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvb2x0aXAuanMiXSwibmFtZXMiOlsiJCIsImFuaW0iLCJfZGVmYXVsdHMiLCJleGl0RGVsYXkiLCJlbnRlckRlbGF5IiwiaHRtbCIsIm1hcmdpbiIsImluRHVyYXRpb24iLCJvdXREdXJhdGlvbiIsInBvc2l0aW9uIiwidHJhbnNpdGlvbk1vdmVtZW50IiwiX0NvbXBvbmVudCIsIlRvb2x0aXAiLCJlbCIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiY2FsbCIsIk1fVG9vbHRpcCIsImV4dGVuZCIsImRlZmF1bHRzIiwiaXNPcGVuIiwiaXNIb3ZlcmVkIiwiaXNGb2N1c2VkIiwiX2FwcGVuZFRvb2x0aXBFbCIsIl9zZXR1cEV2ZW50SGFuZGxlcnMiLCJfaW5oZXJpdHMiLCJDb21wb25lbnQiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsInRvb2x0aXBFbCIsInJlbW92ZSIsIl9yZW1vdmVFdmVudEhhbmRsZXJzIiwidW5kZWZpbmVkIiwiYWRkIiwidG9vbHRpcENvbnRlbnRFbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImlubmVySFRNTCIsIl9oYW5kbGVNb3VzZUVudGVyQm91bmQiLCJfaGFuZGxlTW91c2VFbnRlciIsImJpbmQiLCJfaGFuZGxlTW91c2VMZWF2ZUJvdW5kIiwiX2hhbmRsZU1vdXNlTGVhdmUiLCJfaGFuZGxlRm9jdXNCb3VuZCIsIl9oYW5kbGVGb2N1cyIsIl9oYW5kbGVCbHVyQm91bmQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfZ2V0QXR0cmlidXRlT3B0aW9ucyIsIl91cGRhdGVUb29sdGlwQ29udGVudCIsIl9zZXRFbnRlckRlbGF5VGltZW91dCIsIl9zZXRFeGl0RGVsYXlUaW1lb3V0IiwiX3RoaXMyIiwiY2xlYXJUaW1lb3V0IiwiX2V4aXREZWxheVRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX2FuaW1hdGVPdXQiLCJfdGhpczMiLCJfZW50ZXJEZWxheVRpbWVvdXQiLCJfYW5pbWF0ZUluIiwibmV3Q29vcmRpbmF0ZXMiLCJvcmlnaW4iLCJ0b29sdGlwIiwib3JpZ2luSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib3JpZ2luV2lkdGgiLCJvZmZzZXRXaWR0aCIsInRvb2x0aXBIZWlnaHQiLCJ0b29sdGlwV2lkdGgiLCJ0YXJnZXRUb3AiLCJ4TW92ZW1lbnQiLCJ5TW92ZW1lbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJNIiwiZ2V0RG9jdW1lbnRTY3JvbGxUb3AiLCJ0YXJnZXRMZWZ0IiwibGVmdCIsImdldERvY3VtZW50U2Nyb2xsTGVmdCIsInkiLCJoZWlnaHQiLCJuZXdYIiwibmV3WSIsInNjcm9sbFRvcCIsIndpZHRoIiwiZWRnZXMiLCJjaGVja1dpdGhpbkNvbnRhaW5lciIsImJvZHkiLCJib3VuZGluZyIsIm9mZnNldCIsInJpZ2h0Iiwic2Nyb2xsTGVmdCIsImJvdHRvbSIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwieCIsInRhcmdldHMiLCJvcGFjaXR5IiwidHJhbnNsYXRlWSIsImVhc2luZyIsInRyYW5zbGF0ZVgiLCJfcG9zaXRpb25Ub29sdGlwIiwiZHVyYXRpb24iLCJzdHlsZSIsInZpc2liaWxpdHkiLCJjbG9zZSIsImF0dHJpYnV0ZU9wdGlvbnMiLCJ0b29sdGlwVGV4dE9wdGlvbiIsImdldEF0dHJpYnV0ZSIsInBvc2l0aW9uT3B0aW9uIiwiZWxzIiwiX2dldCIsImdldCIsImpRdWVyeUxvYWRlZCIsImluaXRpYWxpemVKcXVlcnlXcmFwcGVyIiwiY2FzaCIsImFuaW1lIl0sIm1hcHBpbmdzIjoiNG5DQUFBLFNBQVdBLEVBQUdDLEdBR1osSUFBSUMsRUFBWSxDQUNkQyxVQUFXLElBQ1hDLFdBQVksRUFDWkMsS0FBTSxLQUNOQyxPQUFRLEVB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c291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBsZXQgX2RlZmF1bHRzID0ge1xuICAgIGV4aXREZWxheTogMjAwLFxuICAgIGVudGVyRGVsYXk6IDAsXG4gICAgaHRtbDogbnVsbCxcbiAgICBtYXJnaW46IDUsXG4gICAgaW5EdXJhdGlvbjogMjUwLFxuICAgIG91dER1cmF0aW9uOiAyMDAsXG4gICAgcG9zaXRpb246ICdib3R0b20nLFxuICAgIHRyYW5zaXRpb25Nb3ZlbWVudDogMTBcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG4gIGNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBUb29sdGlwIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICAgIHN1cGVyKFRvb2x0aXAsIGVsLCBvcHRpb25zKTtcblxuICAgICAgdGhpcy5lbC5NX1Rvb2x0aXAgPSB0aGlzO1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIFRvb2x0aXAuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9hcHBlbmRUb29sdGlwRWwoKTtcbiAgICAgIHRoaXMuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgZGVmYXVsdHMoKSB7XG4gICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgIH1cblxuICAgIHN0YXRpYyBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHN1cGVyLmluaXQodGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgIGxldCBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Ub29sdGlwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAkKHRoaXMudG9vbHRpcEVsKS5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHRoaXMuZWwuTV9Ub29sdGlwID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIF9hcHBlbmRUb29sdGlwRWwoKSB7XG4gICAgICBsZXQgdG9vbHRpcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0b29sdGlwRWwuY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtdG9vbHRpcCcpO1xuICAgICAgdGhpcy50b29sdGlwRWwgPSB0b29sdGlwRWw7XG5cbiAgICAgIGxldCB0b29sdGlwQ29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0b29sdGlwQ29udGVudEVsLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtY29udGVudCcpO1xuICAgICAgdG9vbHRpcENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaHRtbDtcbiAgICAgIHRvb2x0aXBFbC5hcHBlbmRDaGlsZCh0b29sdGlwQ29udGVudEVsKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9vbHRpcEVsKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlVG9vbHRpcENvbnRlbnQoKSB7XG4gICAgICB0aGlzLnRvb2x0aXBFbC5xdWVyeVNlbGVjdG9yKCcudG9vbHRpcC1jb250ZW50JykuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmh0bWw7XG4gICAgfVxuXG4gICAgX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgIHRoaXMuX2hhbmRsZU1vdXNlRW50ZXJCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlRW50ZXIuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlTGVhdmUuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5faGFuZGxlQmx1ckJvdW5kID0gdGhpcy5faGFuZGxlQmx1ci5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpO1xuICAgIH1cblxuICAgIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAvLyBVcGRhdGUgdG9vbHRpcCBjb250ZW50IHdpdGggSFRNTCBhdHRyaWJ1dGUgb3B0aW9uc1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgdGhpcy5fZ2V0QXR0cmlidXRlT3B0aW9ucygpKTtcbiAgICAgIHRoaXMuX3VwZGF0ZVRvb2x0aXBDb250ZW50KCk7XG4gICAgICB0aGlzLl9zZXRFbnRlckRlbGF5VGltZW91dCgpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICB0aGlzLl9zZXRFeGl0RGVsYXlUaW1lb3V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRpbWVvdXQgd2hpY2ggZGVsYXlzIHdoZW4gdGhlIHRvb2x0aXAgY2xvc2VzXG4gICAgICovXG4gICAgX3NldEV4aXREZWxheVRpbWVvdXQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fZXhpdERlbGF5VGltZW91dCk7XG5cbiAgICAgIHRoaXMuX2V4aXREZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNIb3ZlcmVkIHx8IHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpO1xuICAgICAgfSwgdGhpcy5vcHRpb25zLmV4aXREZWxheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRpbWVvdXQgd2hpY2ggZGVsYXlzIHdoZW4gdGhlIHRvYXN0IGNsb3Nlc1xuICAgICAqL1xuICAgIF9zZXRFbnRlckRlbGF5VGltZW91dCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9lbnRlckRlbGF5VGltZW91dCk7XG5cbiAgICAgIHRoaXMuX2VudGVyRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc0hvdmVyZWQgJiYgIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZUluKCk7XG4gICAgICB9LCB0aGlzLm9wdGlvbnMuZW50ZXJEZWxheSk7XG4gICAgfVxuXG4gICAgX3Bvc2l0aW9uVG9vbHRpcCgpIHtcbiAgICAgIGxldCBvcmlnaW4gPSB0aGlzLmVsLFxuICAgICAgICB0b29sdGlwID0gdGhpcy50b29sdGlwRWwsXG4gICAgICAgIG9yaWdpbkhlaWdodCA9IG9yaWdpbi5vZmZzZXRIZWlnaHQsXG4gICAgICAgIG9yaWdpbldpZHRoID0gb3JpZ2luLm9mZnNldFdpZHRoLFxuICAgICAgICB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcC5vZmZzZXRIZWlnaHQsXG4gICAgICAgIHRvb2x0aXBXaWR0aCA9IHRvb2x0aXAub2Zmc2V0V2lkdGgsXG4gICAgICAgIG5ld0Nvb3JkaW5hdGVzLFxuICAgICAgICBtYXJnaW4gPSB0aGlzLm9wdGlvbnMubWFyZ2luLFxuICAgICAgICB0YXJnZXRUb3AsXG4gICAgICAgIHRhcmdldExlZnQ7XG5cbiAgICAgIHRoaXMueE1vdmVtZW50ID0gMCxcbiAgICAgICAgdGhpcy55TW92ZW1lbnQgPSAwO1xuXG4gICAgICB0YXJnZXRUb3AgPSBvcmlnaW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgdGFyZ2V0TGVmdCA9IG9yaWdpbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgTS5nZXREb2N1bWVudFNjcm9sbExlZnQoKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgdGFyZ2V0VG9wICs9IC0odG9vbHRpcEhlaWdodCkgLSBtYXJnaW47XG4gICAgICAgIHRhcmdldExlZnQgKz0gb3JpZ2luV2lkdGggLyAyIC0gdG9vbHRpcFdpZHRoIC8gMjtcbiAgICAgICAgdGhpcy55TW92ZW1lbnQgPSAtKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQpO1xuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICB0YXJnZXRUb3AgKz0gb3JpZ2luSGVpZ2h0IC8gMiAtIHRvb2x0aXBIZWlnaHQgLyAyO1xuICAgICAgICB0YXJnZXRMZWZ0ICs9IG9yaWdpbldpZHRoICsgbWFyZ2luO1xuICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgdGFyZ2V0VG9wICs9IG9yaWdpbkhlaWdodCAvIDIgLSB0b29sdGlwSGVpZ2h0IC8gMjtcbiAgICAgICAgdGFyZ2V0TGVmdCArPSAtKHRvb2x0aXBXaWR0aCkgLSBtYXJnaW47XG4gICAgICAgIHRoaXMueE1vdmVtZW50ID0gLSh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50KTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0VG9wICs9IG9yaWdpbkhlaWdodCArIG1hcmdpbjtcbiAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCAvIDIgLSB0b29sdGlwV2lkdGggLyAyO1xuICAgICAgICB0aGlzLnlNb3ZlbWVudCA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIG5ld0Nvb3JkaW5hdGVzID0gdGhpcy5fcmVwb3NpdGlvbldpdGhpblNjcmVlbihcbiAgICAgICAgdGFyZ2V0TGVmdCwgdGFyZ2V0VG9wLCB0b29sdGlwV2lkdGgsIHRvb2x0aXBIZWlnaHQpO1xuICAgICAgJCh0b29sdGlwKS5jc3Moe1xuICAgICAgICB0b3A6IG5ld0Nvb3JkaW5hdGVzLnkgKyAncHgnLFxuICAgICAgICBsZWZ0OiBuZXdDb29yZGluYXRlcy54ICsgJ3B4J1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3JlcG9zaXRpb25XaXRoaW5TY3JlZW4oeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgbGV0IHNjcm9sbExlZnQgPSBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpO1xuICAgICAgbGV0IHNjcm9sbFRvcCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKTtcbiAgICAgIGxldCBuZXdYID0geCAtIHNjcm9sbExlZnQ7XG4gICAgICBsZXQgbmV3WSA9IHkgLSBzY3JvbGxUb3A7XG5cbiAgICAgIGxldCBib3VuZGluZyA9IHtcbiAgICAgICAgbGVmdDogbmV3WCxcbiAgICAgICAgdG9wOiBuZXdZLFxuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9O1xuXG4gICAgICBsZXQgb2Zmc2V0ID0gdGhpcy5vcHRpb25zLm1hcmdpbiArIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG4gICAgICBsZXQgZWRnZXMgPSBNLmNoZWNrV2l0aGluQ29udGFpbmVyKGRvY3VtZW50LmJvZHksIGJvdW5kaW5nLCBvZmZzZXQpO1xuXG4gICAgICBpZiAoZWRnZXMubGVmdCkge1xuICAgICAgICBuZXdYID0gb2Zmc2V0O1xuICAgICAgfSBlbHNlIGlmIChlZGdlcy5yaWdodCkge1xuICAgICAgICBuZXdYIC09IG5ld1ggKyB3aWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWRnZXMudG9wKSB7XG4gICAgICAgIG5ld1kgPSBvZmZzZXQ7XG4gICAgICB9IGVsc2UgaWYgKGVkZ2VzLmJvdHRvbSkge1xuICAgICAgICBuZXdZIC09IG5ld1kgKyBoZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IG5ld1ggKyBzY3JvbGxMZWZ0LFxuICAgICAgICB5OiBuZXdZICsgc2Nyb2xsVG9wXG4gICAgICB9O1xuICAgIH1cblxuICAgIF9hbmltYXRlSW4oKSB7XG4gICAgICB0aGlzLl9wb3NpdGlvblRvb2x0aXAoKTtcbiAgICAgIHRoaXMudG9vbHRpcEVsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICBhbmltLnJlbW92ZSh0aGlzLnRvb2x0aXBFbCk7XG4gICAgICBhbmltKHtcbiAgICAgICAgdGFyZ2V0czogdGhpcy50b29sdGlwRWwsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIHRyYW5zbGF0ZVg6IHRoaXMueE1vdmVtZW50LFxuICAgICAgICB0cmFuc2xhdGVZOiB0aGlzLnlNb3ZlbWVudCxcbiAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfYW5pbWF0ZU91dCgpIHtcbiAgICAgIGFuaW0ucmVtb3ZlKHRoaXMudG9vbHRpcEVsKTtcbiAgICAgIGFuaW0oe1xuICAgICAgICB0YXJnZXRzOiB0aGlzLnRvb2x0aXBFbCxcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgdHJhbnNsYXRlWDogMCxcbiAgICAgICAgdHJhbnNsYXRlWTogMCxcbiAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgICB0aGlzLmlzSG92ZXJlZCA9IHRydWU7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlTW91c2VMZWF2ZSgpIHtcbiAgICAgIHRoaXMuaXNIb3ZlcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUZvY3VzKCkge1xuICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUJsdXIoKSB7XG4gICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIF9nZXRBdHRyaWJ1dGVPcHRpb25zKCkge1xuICAgICAgbGV0IGF0dHJpYnV0ZU9wdGlvbnMgPSB7fTtcbiAgICAgIGxldCB0b29sdGlwVGV4dE9wdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAnKTtcbiAgICAgIGxldCBwb3NpdGlvbk9wdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBvc2l0aW9uJyk7XG5cbiAgICAgIGlmICh0b29sdGlwVGV4dE9wdGlvbikge1xuICAgICAgICBhdHRyaWJ1dGVPcHRpb25zLmh0bWwgPSB0b29sdGlwVGV4dE9wdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uT3B0aW9uKSB7XG4gICAgICAgIGF0dHJpYnV0ZU9wdGlvbnMucG9zaXRpb24gPSBwb3NpdGlvbk9wdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVPcHRpb25zO1xuICAgIH1cbiAgfVxuXG4gIE0uVG9vbHRpcCA9IFRvb2x0aXA7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihUb29sdGlwLCAndG9vbHRpcCcsICdNX1Rvb2x0aXAnKTtcbiAgfVxuXG59KShjYXNoLCBNLmFuaW1lKTtcbiJdfQ==
