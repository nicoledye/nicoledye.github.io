"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){var t=t||{},e=document.querySelectorAll.bind(document);function h(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}var b={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,o=document.createElement("div");o.className="waves-ripple",n.appendChild(o);var a,i,r,s,u,c,d,l=(c={top:0,left:0},d=(a=n)&&a.ownerDocument,i=d.documentElement,"undefined"!==_typeof(a.getBoundingClientRect)&&(c=a.getBoundingClientRect()),r=null!==(u=s=d)&&u===u.window?s:9===s.nodeType&&s.defaultView,{top:c.top+r.pageYOffset-i.clientTop,left:c.left+r.pageXOffset-i.clientLeft}),f=t.pageY-l.top,m=t.pageX-l.left,p="scale("+n.clientWidth/100*10+")";"touches"in t&&(f=t.touches[0].pageY-l.top,m=t.touches[0].pageX-l.left),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-scale",p),o.setAttribute("data-x",m),o.setAttribute("data-y",f);var v={top:f+"px",left:m+"px"};o.className=o.className+" waves-notransition",o.setAttribute("style",h(v)),o.className=o.className.replace("waves-notransition",""),v["-webkit-transform"]=p,v["-moz-transform"]=p,v["-ms-transform"]=p,v["-o-transform"]=p,v.transform=p,v.opacity="1",v["-webkit-transition-duration"]=b.duration+"ms",v["-moz-transition-duration"]=b.duration+"ms",v["-o-transition-duration"]=b.duration+"ms",v["transition-duration"]=b.duration+"ms",v["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",o.setAttribute("style",h(v))},hide:function(t){u.touchup(t);var e=this,n=(e.clientWidth,null),o=e.getElementsByClassName("waves-ripple");if(!(0<o.length))return!1;var a=(n=o[o.length-1]).getAttribute("data-x"),i=n.getAttribute("data-y"),r=n.getAttribute("data-scale"),s=350-(Date.now()-Number(n.getAttribute("data-hold")));s<0&&(s=0),setTimeout(function(){var t={top:i+"px",left:a+"px",opacity:"0","-webkit-transition-duration":b.duration+"ms","-moz-transition-duration":b.duration+"ms","-o-transition-duration":b.duration+"ms","transition-duration":b.duration+"ms","-webkit-transform":r,"-moz-transform":r,"-ms-transform":r,"-o-transform":r,transform:r};n.setAttribute("style",h(t)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},b.duration)},s)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var o=n.parentNode;if("i"===o.tagName.toLowerCase()&&-1!==o.className.indexOf("waves-effect"))continue;var a=document.createElement("i");a.className=n.className+" waves-input-wrapper";var i=n.getAttribute("style");i||(i=""),a.setAttribute("style",i),n.className="waves-button-input",n.removeAttribute("style"),o.replaceChild(a,n),a.appendChild(n)}}}},u={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?u.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){0<u.touches&&(u.touches-=1)},500):"mousedown"===t.type&&0<u.touches&&(e=!1),e},touchup:function(t){u.allowEvent(t)}};function o(t){var e=function(t){if(!1===u.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){e=n;break}n=n.parentNode}return e}(t);null!==e&&(b.show(t,e),"ontouchstart"in n&&(e.addEventListener("touchend",b.hide,!1),e.addEventListener("touchcancel",b.hide,!1)),e.addEventListener("mouseup",b.hide,!1),e.addEventListener("mouseleave",b.hide,!1),e.addEventListener("dragend",b.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(b.duration=t.duration),b.wrapInput(e(".waves-effect")),"ontouchstart"in n&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(b.wrapInput([t]),t=t.parentNode),"ontouchstart"in n&&t.addEventListener("touchstart",o,!1),t.addEventListener("mousedown",o,!1)},n.Waves=t,document.addEventListener("DOMContentLoaded",function(){t.displayEffect()},!1)}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndhdmVzLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIldhdmVzIiwiJCQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYmluZCIsImRvY3VtZW50IiwidG9wIiwib2JqIiwibGVmdCIsImJveCIsImEiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbnZlcnRTdHlsZSIsInN0eWxlIiwiRWZmZWN0IiwiZHVyYXRpb24iLCJlIiwiZWxlbWVudCIsImJ1dHRvbiIsImVsIiwidGhpcyIsInJpcHBsZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImdldFdpbmRvdyIsImRvY0VsZW0iLCJpc1dpbmRvdyIsImRvYyIsImVsZW0iLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRUb3AiLCJjbGllbnRMZWZ0IiwicGFnZVkiLCJwb3MiLCJwYWdlWCIsInNjYWxlIiwiY2xpZW50V2lkdGgiLCJyZWxhdGl2ZVkiLCJyZWxhdGl2ZVgiLCJ0b3VjaGVzIiwic2V0QXR0cmlidXRlIiwicmlwcGxlU3R5bGUiLCJyZXBsYWNlIiwidHJhbnNmb3JtIiwib3BhY2l0eSIsIlRvdWNoSGFuZGxlciIsInRvdWNodXAiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwid2lkdGgiLCJyaXBwbGVzIiwibGVuZ3RoIiwiZ2V0QXR0cmlidXRlIiwiZGVsYXkiLCJzZXRUaW1lb3V0IiwiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uIiwiLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uIiwiLW8tdHJhbnNpdGlvbi1kdXJhdGlvbiIsInRyYW5zaXRpb24tZHVyYXRpb24iLCItd2Via2l0LXRyYW5zZm9ybSIsIi1tb3otdHJhbnNmb3JtIiwiLW1zLXRyYW5zZm9ybSIsIi1vLXRyYW5zZm9ybSIsInJlbW92ZUNoaWxkIiwid3JhcElucHV0IiwiZWxlbWVudHMiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwiaW5kZXhPZiIsIndyYXBwZXIiLCJlbGVtZW50U3R5bGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyZXBsYWNlQ2hpbGQiLCJhbGxvd0V2ZW50IiwiYWxsb3ciLCJ0eXBlIiwic2hvd0VmZmVjdCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJnZXRXYXZlc0VmZmVjdEVsZW1lbnQiLCJoaWRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BsYXlFZmZlY3QiLCJvcHRpb25zIiwiYm9keSIsImF0dGFjaCJdLCJtYXBwaW5ncyI6Im9PQVNDLFNBQVVBLEdBR1AsSUFBSUMsRUFBUUEsR0FBUyxHQUh2QkMsRUFBU0YsU0FBUUcsaUJBQUFDLEtBQUFDLFVBMkJQQyxTQUFBQSxFQUFLQyxHQUNMQyxJQUFBQSxFQUFNQyxHQUViLElBQUEsSUFBQUMsS0FBQUgsRUFNV0EsRUFBSUksZUFBZUQsS0FKdEJFLEdBQWFMLEVBQXRCLElBQTJCQSxFQUFBRyxHQUFBLEtBSW5CLE9BQUFHLEVBR0gsSUFBQUMsRUFBQSxDQUdKQyxTQUFBLElBRUdELEtBQUFBLFNBQVNFLEVBQUFDLEdBR1RGLEdBSFMsSUFHVEEsRUFBVUcsT0FNRixPQUFPLEVBRlgsSUFBQUMsRUFBQUYsR0FBQUcsS0FHQ0MsRUFBQWhCLFNBQUFpQixjQUFBLE9BTURELEVBQU9FLFVBQVksZUFKbkJKLEVBQUFLLFlBQVNQLEdBR1QsSUFoRENRLEVBQ0xDLEVBQU9DLEVBTE9wQixFQUpOTixFQVVYUSxFQUtPbUIsRUF5Q0lQLEdBOUNYWixFQUFBLENBQUFILElBQUEsRUFBQUUsS0FBQSxHQUtPb0IsR0FQQ0gsRUFnRHFCSCxJQXpDUk8sRUFBS0MsY0FGdkJKLEVBQUlBLEVBQUpLLGdCQUNJdEIsY0FBQUEsUUFBTW9CLEVBQUN2Qix5QkFDUHNCLEVBQU1DLEVBQUFBLHlCQUVWSCxFQWhCY3ZCLFFBRE5GLEVBSU1NLEVBYUF3QixJQWhCQTVCLElBQWlCQyxFQUExQkosT0FJa0JPLEVBQXZCLElBQStCQSxFQUFJUCxV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QWpFLEVBVVNtRSxDQUFzQnBFLEdBRHBCQSxPQUFwQkMsSUFDUUEsRUFBQUEsS0FBVW1FLEVBQUFBLEdBRVZuRSxpQkFBa0JqQixJQUNsQmMsRUFBWUUsaUJBQVosV0FBQUYsRUFBQXVFLE1BQUEsR0FJSXBFLEVBQVFxRSxpQkFBaUIsY0FBZXhFLEVBQU91RSxNQUFNLElBQXJEcEUsRUFBQUEsaUJBQVFxRSxVQUFpQnhFLEVBQXpCdUUsTUFBd0N2RSxHQUMzQ0csRUFBQXFFLGlCQUFBLGFBQUF4RSxFQUFBdUUsTUFBQSxHQUlEcEUsRUFBUXFFLGlCQUFpQixVQUFXeEUsRUFBT3VFLE1BQU0sSUFDcERwRixFQUFBc0YsY0FBQSxTQUFBQyxHQUdDRCxhQUZMQyxFQUFBQSxHQUFBLE1BR0dBLEVBQVVBLFNBQVdBLEVBQXJCekUsVUFJQ0QsRUFBQXFELFVBQUFqRSxFQUFBLGtCQUVELGlCQUFBRixHQUNBYyxTQUFPcUQsS0FBVWpFLGlCQUFBLGFBQWpCK0UsR0FBQSxHQUdJNUUsU0FBQUEsS0FBU29GLGlCQUFLSCxZQUFpQkwsR0FBY0EsSUFZckRoRixFQUFNeUYsT0FBUyxTQUFTekUsR0FBUyxVQUEzQnlFLEVBQVNyQixRQUFBQyxnQkFDWHhELEVBQUFxRCxVQUFBLENBQUFsRCxJQUNBQSxFQUFBQSxFQUFBdUQsWUFHSXZELGlCQUFrQnVELEdBQ3JCdkQsRUFBQXFFLGlCQUFBLGFBQUFMLEdBQUEsR0FHR2hFLEVBQUFBLGlCQUFRcUUsWUFBaUJMLEdBQWNBLElBRzNDaEUsRUFBQUEsTUFBUXFFLEVBS1pqRixTQUFTaUYsaUJBQWlCLG1CQUFvQixXQUY5Q3RGLEVBQU9DLGtCQUlKLEdBblVOLENBa1VPQSIsImZpbGUiOiJ3YXZlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogV2F2ZXMgdjAuNi40XG4gKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZpYW5zL1dhdmVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG47KGZ1bmN0aW9uKHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBXYXZlcyA9IFdhdmVzIHx8IHt9O1xuICAgIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG5cbiAgICAvLyBGaW5kIGV4YWN0IHBvc2l0aW9uIG9mIGVsZW1lbnRcbiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGlzV2luZG93KGVsZW0pID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvZmZzZXQoZWxlbSkge1xuICAgICAgICB2YXIgZG9jRWxlbSwgd2luLFxuICAgICAgICAgICAgYm94ID0ge3RvcDogMCwgbGVmdDogMH0sXG4gICAgICAgICAgICBkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBpZiAodHlwZW9mIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSB0eXBlb2YgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHdpbiA9IGdldFdpbmRvdyhkb2MpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG4gICAgICAgICAgICBsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnZlcnRTdHlsZShvYmopIHtcbiAgICAgICAgdmFyIHN0eWxlID0gJyc7XG5cbiAgICAgICAgZm9yICh2YXIgYSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYSkpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSArPSAoYSArICc6JyArIG9ialthXSArICc7Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuXG4gICAgdmFyIEVmZmVjdCA9IHtcblxuICAgICAgICAvLyBFZmZlY3QgZGVsYXlcbiAgICAgICAgZHVyYXRpb246IDc1MCxcblxuICAgICAgICBzaG93OiBmdW5jdGlvbihlLCBlbGVtZW50KSB7XG5cbiAgICAgICAgICAgIC8vIERpc2FibGUgcmlnaHQgY2xpY2tcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudCB8fCB0aGlzO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgcmlwcGxlXG4gICAgICAgICAgICB2YXIgcmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gJ3dhdmVzLXJpcHBsZSc7XG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyaXBwbGUpO1xuXG4gICAgICAgICAgICAvLyBHZXQgY2xpY2sgY29vcmRpbmF0ZSBhbmQgZWxlbWVudCB3aXRkaFxuICAgICAgICAgICAgdmFyIHBvcyAgICAgICAgID0gb2Zmc2V0KGVsKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgICA9IChlLnBhZ2VZIC0gcG9zLnRvcCk7XG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVYICAgPSAoZS5wYWdlWCAtIHBvcy5sZWZ0KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9ICdzY2FsZSgnKygoZWwuY2xpZW50V2lkdGggLyAxMDApICogMTApKycpJztcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XG4gICAgICAgICAgICAgIHJlbGF0aXZlWSAgID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgICByZWxhdGl2ZVggICA9IChlLnRvdWNoZXNbMF0ucGFnZVggLSBwb3MubGVmdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCBkYXRhIHRvIGVsZW1lbnRcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcsIERhdGUubm93KCkpO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTtcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHJlbGF0aXZlWCk7XG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXknLCByZWxhdGl2ZVkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgcmlwcGxlIHBvc2l0aW9uXG4gICAgICAgICAgICB2YXIgcmlwcGxlU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLFxuICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lICsgJyB3YXZlcy1ub3RyYW5zaXRpb24nO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTtcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lLnJlcGxhY2UoJ3dhdmVzLW5vdHJhbnNpdGlvbicsICcnKTtcblxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHJpcHBsZVxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1zLXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlLnRyYW5zZm9ybSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGUub3BhY2l0eSAgID0gJzEnO1xuXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbiddICAgID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddICAgICAgICAgPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgICAgPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaHVwKGUpO1xuXG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGggKiAxLjQ7XG5cbiAgICAgICAgICAgIC8vIEdldCBmaXJzdCByaXBwbGVcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHJpcHBsZXMgPSBlbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3YXZlcy1yaXBwbGUnKTtcbiAgICAgICAgICAgIGlmIChyaXBwbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCAgID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVZICAgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTtcblxuICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xuXG4gICAgICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGYWRlIG91dCByaXBwbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAndG9wJzogcmVsYXRpdmVZKydweCcsXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCcsXG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogJzAnLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIER1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHN0eWxlKSk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQocmlwcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBFZmZlY3QuZHVyYXRpb24pO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3RcbiAgICAgICAgd3JhcElucHV0OiBmdW5jdGlvbihlbGVtZW50cykge1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBlbGVtZW50cy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRzW2FdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpbnB1dCBhbHJlYWR5IGhhdmUgcGFyZW50IGp1c3QgcGFzcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaScgJiYgcGFyZW50LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHV0IGVsZW1lbnQgY2xhc3MgYW5kIHN0eWxlIHRvIHRoZSBzcGVjaWZpZWQgcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICcgd2F2ZXMtaW5wdXQtd3JhcHBlcic7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0eWxlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBlbGVtZW50U3R5bGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9ICd3YXZlcy1idXR0b24taW5wdXQnO1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHV0IGVsZW1lbnQgYXMgY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbCk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIERpc2FibGUgbW91c2Vkb3duIGV2ZW50IGZvciA1MDBtcyBkdXJpbmcgYW5kIGFmdGVyIHRvdWNoXG4gICAgICovXG4gICAgdmFyIFRvdWNoSGFuZGxlciA9IHtcbiAgICAgICAgLyogdXNlcyBhbiBpbnRlZ2VyIHJhdGhlciB0aGFuIGJvb2wgc28gdGhlcmUncyBubyBpc3N1ZXMgd2l0aFxuICAgICAgICAgKiBuZWVkaW5nIHRvIGNsZWFyIHRpbWVvdXRzIGlmIGFub3RoZXIgdG91Y2ggZXZlbnQgb2NjdXJyZWRcbiAgICAgICAgICogd2l0aGluIHRoZSA1MDBtcy4gQ2Fubm90IG1vdXNldXAgYmV0d2VlbiB0b3VjaHN0YXJ0IGFuZFxuICAgICAgICAgKiB0b3VjaGVuZCwgbm9yIGluIHRoZSA1MDBtcyBhZnRlciB0b3VjaGVuZC4gKi9cbiAgICAgICAgdG91Y2hlczogMCxcbiAgICAgICAgYWxsb3dFdmVudDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2hlcyAtPSAxOyAvL3BvcCBhZnRlciA1MDBtc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiBUb3VjaEhhbmRsZXIudG91Y2hlcyA+IDApIHtcbiAgICAgICAgICAgICAgICBhbGxvdyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWxsb3c7XG4gICAgICAgIH0sXG4gICAgICAgIHRvdWNodXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogRGVsZWdhdGVkIGNsaWNrIGhhbmRsZXIgZm9yIC53YXZlcy1lZmZlY3QgZWxlbWVudC5cbiAgICAgKiByZXR1cm5zIG51bGwgd2hlbiAud2F2ZXMtZWZmZWN0IGVsZW1lbnQgbm90IGluIFwiY2xpY2sgdHJlZVwiXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpIHtcbiAgICAgICAgaWYgKFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKHRhcmdldC5wYXJlbnROb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hvd0VmZmVjdChlKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpO1xuXG4gICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBXYXZlcy5kaXNwbGF5RWZmZWN0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoJ2R1cmF0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBFZmZlY3QuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnXG4gICAgICAgIEVmZmVjdC53cmFwSW5wdXQoJCQoJy53YXZlcy1lZmZlY3QnKSk7XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBXYXZlcyB0byBhbiBpbnB1dCBlbGVtZW50IChvciBhbnkgZWxlbWVudCB3aGljaCBkb2Vzbid0XG4gICAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuXG4gICAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcbiAgICAgKiB3aGVyZSB0aGUgdXNlciBkb2Vzbid0IHdhbnQgYSBkZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlci5cbiAgICAgKi9cbiAgICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIC8vRlVUVVJFOiBhdXRvbWF0aWNhbGx5IGFkZCB3YXZlcyBjbGFzc2VzIGFuZCBhbGxvdyB1c2Vyc1xuICAgICAgICAvLyB0byBzcGVjaWZ5IHRoZW0gd2l0aCBhbiBvcHRpb25zIHBhcmFtPyBFZy4gbGlnaHQvY2xhc3NpYy9idXR0b25cbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICBFZmZlY3Qud3JhcElucHV0KFtlbGVtZW50XSk7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5XYXZlcyA9IFdhdmVzO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBXYXZlcy5kaXNwbGF5RWZmZWN0KCk7XG4gICAgfSwgZmFsc2UpO1xuXG59KSh3aW5kb3cpO1xuIl19
